/*!
 * PikadayPlus 1.0.12
 *
 * Copyright © 2014 David Bushell | BSD & MIT license | https://github.com/dbushell/Pikaday
 * Copyright © 2018 Hinderling Volkart | BSD & MIT license | https://github.com/hinderlingvolkart/PikadayPlus
 */

//! moment.js
//! version : 2.17.1
//! authors : Tim Wood, Iskren Chernev, Moment.js contributors
//! license : MIT
//! momentjs.com

/*!
 * Pikarange 1.0.12
 *
 * Copyright © 2018 Hinderling Volkart | BSD & MIT license | https://github.com/hinderlingvolkart/PikadayPlus
 */

/*!
 * Swiss.com
 * by Hinderling & Volkart AG / 2016 / v160203
 * http://hinderlingvolkart.com/
 */

define("jquery",[],function(){return jQuery}),define("app/Config",["jquery"],function(t){var e={language:"de",body:document.getElementById("body")},i=t.extend(e,window.app_config);return{get:function(){var t=i;try{for(var e=0;e<arguments.length;e++)t=t[arguments[e]]}catch(n){return void 0}return t},set:function(t,e){return i[t]=e,e}}}),define("lib/shim/ie8IconFontFix",[],function(){return function(t){var e=document.getElementsByTagName("head")[0],i=document.createElement("style"),n="";t?"string"==typeof t&&(t=t.split(",")):t=[""];for(var s=0;s<t.length;s++)n+=t[s]+":before,"+t[s]+":after{content:none !important;} ";i.type="text/css",i.styleSheet?i.styleSheet.cssText=n:i.appendChild(document.createTextNode(n)),e.appendChild(i),setTimeout(function(){e.removeChild(i)},0)}}),define("app/api",[],function(){function t(t){for(var e=window,i=t instanceof Array?t:t.split("."),n=0;n<i.length;n++)if(e=e[i[n]],!e)return e;return e}function e(t){for(var e=window,i=t instanceof Array?t:t.split("."),n=0;n<i.length;n++)e=e[i[n]]=e[i[n]]||{};return e}function i(t,i){var n=e(t);for(var s in i)n[s]=i[s]}function n(t,i){var n=t.split("."),s=n.pop(),o=e(n.join("."));o[s]=i}return n("swiss.ui.getModule",function(t){var e=$(t).data("moduleInstance");return e}),{addCollection:function(t,e){i(t,e)},addFunction:function(t,e){n(t,e)},get:function(e){t(e)},fn:function(e){var i=t(e);return i||console.warn("API function missing:",e),i||function(){}}}}),define("app/plugins/ScrollSighting",["jquery"],function(t){function e(){var e=this;this.targets=[],document.addEventListener("scroll",function(t){e.validate(t.target)},!0),window.MutationObserver&&t(function(){function t(){clearTimeout(a),a=setTimeout(i,500)}function i(){clearTimeout(a),e.validate()}var n=window.document.body,s=new MutationObserver(function(e){for(var i=0,n=e.length;n>i;i++)if(e[i].addedNodes.length){t();break}}),o={subtree:!0,childList:!0};s.observe(n,o);var a})}function i(e,i){this.selector=e,this.options=t.extend({},s,i)}function n(t){var e=t,i=o.width(),n=o.height(),s="vertical",a=!0,r=e.getBoundingClientRect(),l=r.top>=0&&r.top<n,h=r.bottom>0&&r.bottom<=n,u=r.left>=0&&r.left<i,d=r.right>0&&r.right<=i,c=a?l||h:l&&h,p=a?u||d:u&&d;return"both"===s?c&&p:"vertical"===s?c:"horizontal"===s?p:void 0}var s={delay:0,hide:!1,action:function(e){t(e).addClass("is-visible")},init:function(e){t(e).addClass("has-scrollsighter")}};e.get=function(){return e.instance||(e.instance=new e),e.instance},e.prototype.watch=function(t,e){for(var n=new i(t,e),s=0,o=this.targets.length;o>s;s++)if(this.targets[s].equals(n))return;this.targets.push(n),this.validateTarget(n)},e.prototype.validate=function(t){for(var e=0;e<this.targets.length;e++)this.validateTarget(this.targets[e],t)},e.prototype.validateTarget=function(i,n){var s=0,o=t(n||document).find(i.selector);o.each(function(){var t=this;i.options.init(t);var n,o,a,r;e.checkVisibility(t)&&(n=i.lastTime||0,o=n+i.options.delay,a=(new Date).getTime(),o>a?(r=o-a,i.lastTime=o):(r=0,i.lastTime=a),setTimeout(function(){i.options.action(t)},r),s++)})},e.prototype.appearAll=function(){for(var i,n,s=0;s<this.targets.length;s++)i=this.targets[s],n=t(i.selector),n.each(function(){this.hasBeenScrollSighted=!0,i.options.action(this)});e.checkVisibility=function(t){return t.hasBeenScrollSighted?!1:(t.hasBeenScrollSighted=!0,!0)}},e.checkVisibility=function(t){return t.hasBeenScrollSighted?!1:n(t)?(t.hasBeenScrollSighted=!0,!0):!1},i.prototype.equals=function(t){return t.selector===this.selector&&t.options.context===this.options.context};var o=t(window);return e}),define("app/util/dev/dev",["jquery"],function(t){function e(t){require([t],function(t){t.toggle()})}function i(){var t=document.title.match(/\(\#(\d+)\)/);if(t){var e="https://tracker.hinderlingvolkart.com/issues/"+t[1];window.open(e,"_blank")}}t(document).on("keydown",function(t){var n=String.fromCharCode(t.keyCode);if(t.altKey&&n&&n.match(/[a-z]/gi))switch(n=n.toLowerCase()){case"m":e("app/util/dev/modulePicker");break;case"t":i()}})}),define("lib/util/EventDispatcher",[],function(){function t(t,e){this.target=t,this.method=e}function e(t){var e=t.indexOf(".");return e>=0?{name:t.substr(0,e),ns:t.substr(e+1)}:{name:t,ns:o}}function i(t,e,i){for(var n=t.length-1;n>=0;n--)if(t[n].isEqual(e,i))return n;return-1}function n(t,e,n){var s;if(t)if(n)s=i(t,e,n),s>=0&&t.splice(s,1);else for(s=t.length-1;s>=0;s--)e&&t[s].target!=e||t.splice(s,1)}function s(){}var o="d_e_f_a_u_l_t";return t.prototype.call=function(t,e){"string"==typeof this.method?this.target[this.method].apply(this.target||e,t):this.method.apply(this.target||e,t)},t.prototype.isEqual=function(t,e){return this.target==t&&this.method==e},s.prototype.addEventListener=function(n,s,o){var a,r,l,h=e(n);return"undefined"==typeof this.eventListeners&&(this.eventListeners={}),"undefined"==typeof this.eventListeners[h.name]&&(this.eventListeners[h.name]={}),"undefined"==typeof this.eventListeners[h.name][h.ns]&&(this.eventListeners[h.name][h.ns]=[]),l=this.eventListeners[h.name][h.ns],r=i(l,o,s),0>r&&(a=new t(o,s),l.push(a)),a},s.prototype.removeEventListener=function(t,i,s){var a,r;if("undefined"==typeof this.eventListeners&&(this.eventListeners={}),t){var l=e(t),h=l.name,u=l.ns;if(h||!u)if(r=this.eventListeners[h],i||s)if(u!==o)n(r[u],s,i);else for(a in r)n(r[a],s,i);else u!==o?r[u]=[]:this.eventListeners[h]={};else for(a in this.eventListeners)n(this.eventListeners[a][u],s,i)}else for(a in this.eventListeners)this.removeEventListener(a,i,s)},s.prototype.removeAllEventListeners=function(t){"string"==typeof t?this.removeEventListener(t):this.removeEventListenersOf(t)},s.prototype.removeEventListenersOf=function(t){this.removeEventListener(null,null,t)},s.prototype.trigger=function(t){var e,i=[];for(e=1;e<arguments.length;e++)i.push(arguments[e]);var n,s=!0;"undefined"==typeof this.eventListeners&&(this.eventListeners={});for(var o in this.eventListeners[t])for(n=this.eventListeners[t][o],e=n.length-1;e>=0;e--)s|=n[e].call(i,this)!==!1;return s},s}),define("lib/util/DeferredState",["lib/util/EventDispatcher"],function(t){function e(t,e){t[e]=function(t,i){var n=this.addEventListener(e,t,i);return n&&e==this.state&&n.call([this.state],this),this}}function i(t){if(this.___states=[],t)for(var i=t.length-1;i>=0;i--)this.___states.push(t[i]),e(this,t[i])}return i.prototype=new t,i.prototype.set=function(t){return t!=this.state&&(this.state=t,this.trigger(this.state)),this},i.prototype.unlisten=function(t,e){"string"==typeof t||"function"==typeof t||e?this.removeEventListener(null,t,e):(e=t,this.removeEventListenersOf(e))},i}),define("lib/util/DeferredBoolean",["lib/util/DeferredState"],function(t){function e(t){"undefined"!=typeof t&&this.set(t)}return e.prototype=new t(["yes","no"]),e.prototype._set=e.prototype.set,e.prototype.set=function(t){return this._set(t?"yes":"no")},e.prototype.get=function(){return"yes"==this.state},e.prototype.then=e.prototype.yes,e.prototype.otherwise=e.prototype.no,e}),define("lib/browser/MediaDispatcher",["jquery","lib/util/DeferredBoolean"],function(t,e){function i(t){a.push(t),t.validate()}function n(){for(var t=a.length-1;t>=0;t--)a[t].validate()}function s(t,i){this.name=t,this.index=i,this.isOrBelow=new e,this.isOrAbove=new e,this.isExactly=new e}var o=t(window),a=[],r=new e(!1);return new e(!0),o.resize(n),n(),MediaTrigger=function(t){this.element=document.body,this.pseudo="after",this.mediaIndex=-1,this.triggerPoints=[],t&&this.setTriggerPoints(t),i(this)},MediaTrigger.prototype.setTriggerPoints=function(t){this.triggerPoints=[],this.triggerPoints.push(new s("default",0));for(var e=0;e<t.length;e++)this.triggerPoints.push(new s(t[e],this.triggerPoints.length))},MediaTrigger.prototype.is=function(t,e){return this._is(t,0,"isExactly",e)},MediaTrigger.prototype.isOrAbove=function(t,e){return this._is(t,0,"isOrAbove",e)},MediaTrigger.prototype.isOrBelow=function(t,e){return this._is(t,0,"isOrBelow",e)},MediaTrigger.prototype.isAbove=function(t,e){return this._is(t,-1,"isOrAbove",e)},MediaTrigger.prototype.isBelow=function(t,e){return this._is(t,1,"isOrBelow",e)},MediaTrigger.prototype._is=function(t,e,i,n){var s=this._getTrigger(t);if(!s)throw new Error("Media Trigger point '"+t+"' doesn't exist.");e&&(s=this.triggerPoints[s.index+e]);var o=s?s[i]:r;return n&&o.then(n),o},MediaTrigger.prototype._getTrigger=function(t){for(var e=this.triggerPoints.length-1;e>=0;e--)if(this.triggerPoints[e].name==t)return this.triggerPoints[e];return null},MediaTrigger.prototype._setMediaIndex=function(t){var e,i,n=this.mediaIndex;if(t!==n)for(this.mediaIndex=t,e=this.triggerPoints.length-1;e>=0;e--)i=this.triggerPoints[e],i.isOrBelow.set(e<=this.mediaIndex),i.isExactly.set(e==this.mediaIndex),i.isOrAbove.set(e>=this.mediaIndex)},MediaTrigger.prototype._setMedia=function(t){for(var e=this.triggerPoints.length-1;e>0;e--)if(this.triggerPoints[e].name==t)return this._setMediaIndex(e),void 0;this._setMediaIndex(0)},MediaTrigger.prototype.validate=function(){var t;window.getComputedStyle&&(t=window.getComputedStyle(this.element,":"+this.pseudo).getPropertyValue("content"),t=t.replace(/['"]/g,"")),t||(t=this.getFallback()),this._setMedia(t)},MediaTrigger.prototype.unlisten=function(t,e){for(var i=this.triggerPoints.length-1;i>=0;i--){var n=this.triggerPoints[i];n.isExactly.unlisten(t,e),n.isOrAbove.unlisten(t,e),n.isOrBelow.unlisten(t,e)}},MediaTrigger.prototype.getFallback=function(){this.$fallback||(this.$fallback=t('<div class="media-dispatcher-fallback"></div>'),this.$fallback.css({position:"absolute",left:-1e3}),this.$fallback.appendTo("body"));var e=parseInt(this.$fallback.css("margin-bottom"),10),i=this.triggerPoints[e];return i?i.name:"unknown"},MediaTrigger}),define("app/plugins/mediaDispatcher",["lib/browser/MediaDispatcher"],function(t){return new t(["tablet","tablet-portrait","mobile","mobile-portrait"])}),define("app/plugins/stateChanger",["jquery"],function(){function t(t){var i=$(t),n=e(i,i.data("target")||".js-has-state"),s=!!i.data("class-state-toggle"),o=i.data("value")||i.attr("value")||!1;if(o!==!1){var a="has-state-"+o;if(s&&n.hasClass(a))n.removeClass(a);else{var r=n[0].className;r=r.replace(/(\s?\bhas-state-\S+)/g,""),n[0].className=r+" "+a}}}function e(t,e){for(var i=t.parents(),n=0;n<i.length;n++){var s=i.eq(n),o=s.find(e);if(o.length)return o.eq(0);if(s.is(e))return s}return $("<div>")}var i=".class-changer";return $(document).on("click"+i,".js-state-on-click",function(e){e.preventDefault(),t(this)}),$(document).on("change"+i,".js-state-on-change",function(){t(this)}),$(document).on("change"+i,".js-location-on-change",function(t){t.preventDefault();var e=$(this).data("value")||$(this).val();e&&(document.location.href=e)}),$(document).on("change"+i,".js-tabs-on-change",function(t){t.preventDefault();var e=$(this).data("value")||$(this).val(),i=$(this).parents(".js-tabs").eq(0);try{var n=i.data("moduleInstance");n.select("#"+e)}catch(s){console.log("Could not select tab",n,e)}}),t}),define("app/modules/helpers/JSONP",["jquery"],function(t){var e=0,i=function(){this.id=e++,this.callbackName="swiss_autocomplete_"+this.id},n=i.prototype;return n.init=function(t,e){this.source=t,this.callback=e},n.search=function(t,e,i){e||(e=this.callback),i||(i=this.source);var n=i.split("%query%").join(encodeURIComponent(t));this.request(n,e)},n.request=function(e,i){var n,s=this,o=document.head||t("head")[0]||document.documentElement;e+="&callback="+this.callbackName,this.abort(),window[this.callbackName]=function(t){Array.isArray&&Array.isArray(t)?i.apply(void 0,t):i(t),s.abort()},n=document.createElement("script"),n.async=!0,n.src=e,n.id=this.callbackName,o.insertBefore(n,o.firstChild)},n.abort=function(){var t=document.getElementById(this.callbackName);t&&t.parentNode.removeChild(t),delete window[this.callbackName]},i}),define("lib/util/contextTrigger",["jquery"],function(){function t(t,e){this.selector=t,this.callback=e,this.processed=!1}function e(t,i){if(t.contextTriggerProcessed)for(var n=t.firstChild;n;)1===n.nodeType&&e(n,i),n=n.nextSibling;else i.push(t)}function i(){var t,i=document.body.querySelectorAll("*"),s=i.length,o=!document.body.contextTriggerProcessed;for(t=0;!o&&s>t;t++)i[t].contextTriggerProcessed||(o=!0);if(o){var a=[];e(document.body,a),n.validate(a)}}var n;n={events:[]},n.add=function(e,i){n.events.push(new t(e,i)),n.invalidate()},n.remove=function(t,e){for(var i,s=n.events.length-1;s>=0;s--)if(i=n.events[s],i.selector===t&&i.callback===e)return n.events.splice(s,1),!0;return!1},n.run=function(){},n.invalidate=function(){var t=this;n.events.length&&(this.validationTimeout||(this.validationTimeout=setTimeout(function(){t.validationTimeout=null,i()},50)))};var s=0;n.validate=function(t){var e,i,a=new Date;t=t||"body";var r=$(t),l=$(document.body);if(!r.length)return!1;var h,u,d,c,p,f;for(h=0;h<n.events.length;h++){for(e=n.events[h],i=e.processed?r:l,e.processed=!0,f=[],u=0;u<i.length;u++)for(c=i[u],p=c.querySelectorAll(e.selector),d=0;d<p.length;d++)f.push(p[d]);for(u=0;u<r.length;u++)c=r[u],o(c,e.selector)&&f.push(c);for(u=0;u<f.length;u++)c=f[u],c.contextTriggerProcessed||e.callback.call(c,c)}for(h=0;h<r.length;h++)for(c=r[h],c.contextTriggerProcessed=!0,p=c.querySelectorAll("*"),d=0;d<p.length;d++)p[d].contextTriggerProcessed=!0;s+=new Date-a};var o=function(t,e){return(t.matches||t.matchesSelector||t.msMatchesSelector||t.mozMatchesSelector||t.webkitMatchesSelector||t.oMatchesSelector).call(t,e)};return window.MutationObserver?!function(){var t=window.document.body,e=new MutationObserver(function(t){var e,i=t.length;for(e=0;i>e;e++)if(t[e].addedNodes.length){n.invalidate();break}}),i={subtree:!0,childList:!0};e.observe(t,i)}():setInterval(function(){n.invalidate()},1e3),n}),define("app/plugins/formshim",["jquery","lib/util/contextTrigger"],function(t,e){var i=t("html").is(".lt-ie9"),n=t("html").hasClass("no-csstransitions")&&navigator.userAgent.match(/Firefox/);i&&!function(){function i(){var e=t(this);e.is(":checked")?e.addClass("is-checked"):e.removeClass("is-checked")}t(document).on("change",'input[type="radio"], input[type="checkbox"]',function(){var e=t(this),n=e.prop("name"),s=e.attr("type");t('input[type="'+s+'"][name="'+n+'"]').each(i)}),e.add('input[type="radio"], input[type="checkbox"]',i)}(),(i||n)&&!function(){function e(){this.checked&&(this.was_checked||t(this).change())}function i(e){return this.was_checked?(e.stopImmediatePropagation(),void 0):(t('input[name="'+this.name+'"]').each(function(){this.was_checked=this.checked}),void 0)}t("input[type=radio]").focus(e).change(i)}()}),define("app/plugins/bottomFooter",["jquery"],function(){function t(){var t=$(".site-footer");t.height(t.children(".site-footer-inner").outerHeight(!0));var e=t;$(window).height()>$("body").outerHeight(!0)?(e.addClass("no-scroll"),e.removeClass("has-scroll")):(e.addClass("has-scroll"),e.removeClass("no-scroll"))}return $(window).resize(t),$(window).load(t),setInterval(t,2e3),t(),!0}),define("lib/net/HTMLLoader",["jquery"],function(t){var e=/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,i=/<body\b[^>]*>([\s\S]*?)<\/body>/gim,n={allowInlineScript:!1},s=function(e){this.options=t.extend({},n,e),this.loading=!1};return s.prototype.load=function(e,i,n){var s=this;return n=n||{},n.success=function(t){s.handleSuccess(t,i)},this.loading=!0,this.xhr=t.ajax(e,n),this.xhr},s.prototype.isLoading=function(){return this.loading},s.prototype.handleSuccess=function(t,n){var s=t;s.indexOf("<body")>=0&&(s=t.match(i)[0]),!this.options.allowInlineScript&&s.indexOf("<script")&&(s=s.replace(e,"")),n&&n(s,t),this.xhr=null,this.loading=!1},s.prototype.cancel=function(){this.xhr&&(this.xhr.abort(),this.xhr=null,this.loading=!1)},s.prototype.dispose=function(){this.cancel()},s}),define("lib/util/MicroTemplate",[],function(){function t(t){var e=t.replace(/[\r\t\n]/g," ").split("[%").join("	").replace(/((^|%])[^\t]*)'/g,"$1\r").replace(/\t=(.*?)%]/g,"',$1,'").split("	").join("');").split("%]").join("p.push('").split("\r").join("\\'");return new Function("obj","var p=[],print=function(){p.push.apply(p,arguments);};with(obj){p.push('"+e+"');}return p.join('');")}var e={convert:t};return e}),define("lib/util/Templates",["lib/util/MicroTemplate","app/Config"],function(t,e){var i=function(){this.templates=e.get("templates")||{}},n=i.prototype;return n.createInstance=function(){return new i},n.add=function(t,e){this.templates[t]=e},n.get=function(e){var i=this.templates[e];return i||(i=$("script#"+e).html()),"string"==typeof i&&(i=this.templates[e]=t.convert(i)),i},n.render=function(t,e){var i=this.get(t);return i?i(e):(console.error("Template not found: ",t),"")},new i}),define("lib/browser/KeyCode",[],function(){var t={BACKSPACE:8,TAB:9,ENTER:13,SHIFT:16,CTRL:17,ALT:18,PAUSE_BREAK:19,CAPS_LOCK:20,ESC:27,ESCAPE:27,SPACE:32,SPACE_BAR:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT_ARROW:37,UP_ARROW:38,RIGHT_ARROW:39,DOWN_ARROW:40,LEFT:37,UP:38,RIGHT:39,DOWN:40,INSERT:45,DELETE:46,LEFT_WINDOW:91,RIGHT_WINDOW:92,SELECT_KEY:93,NUMPAD_0:96,NUMPAD_1:97,NUMPAD_2:98,NUMPAD_3:99,NUMPAD_4:100,NUMPAD_5:101,NUMPAD_6:102,NUMPAD_7:103,NUMPAD_8:104,NUMPAD_9:105,MULTIPLY:106,ADD:107,SUBTRACT:109,DECIMAL_POINT:110,DIVIDE:111,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,NUM_LOCK:144,SCROLL_LOCK:145};return t.toString=function(e){for(var i in t)if(t[i]==e)return i},t.isPure=function(t){return!(t.ctrlKey||t.metaKey||t.altKey)},t}),define("lib/browser/Accessibility",["jquery"],function(t){function e(t){var e,i;for(i=0;i<t.childNodes.length;i++)if(e=t.childNodes[i],3===e.nodeType&&o.test(e.nodeValue))return!0;return!1}/iP(ad|hone|od)/.test(navigator.userAgent);var i=0,n={focus:function(e){function i(){s.removeAttr("tabindex"),s.off("blur",i)}if(!this.focusing){this.focusing=!0;var n,s=t(e);return e=s.get(0),e.focus(),document.activeElement!==e&&(n=s.attr("tabindex"),s.attr("tabindex","-1"),e.focus(),s.on("blur",i),document.activeElement!==e&&setTimeout(function(){i()},0)),this.focusing=!1,e}},focusFirstText:function(i,s){for(var o,a,r=document.activeElement,l=t(i),h=l.find(s||"*").filter(":visible"),u=l.get(0),d=0;d<h.length;d++)if(e(h[d])){o=h[d];break}for(o||(o=a=u);o!==u;){if(o.focus(),document.activeElement===o||document.activeElement!==r)return!0;a||"block"!==t(o).css("display")||(a=o),o=o.parentNode}return n.focus(a||u),a||u},keepFocus:function(t,e){var i=new s;return i.keep(t,e),function(){i.release()}},describeBy:function(t,e){n._addAriaLabel(t,e,"aria-describedby")},labelBy:function(t,e){n._addAriaLabel(t,e,"aria-labelledby")},_addAriaLabel:function(e,i,s){var o=t(e);if("string"!=typeof i){var a=t(i).first();if(0===a.length||0===o.length)return;i=n.getId(a)}var r=o.attr(s);r=r?r.split(" "):[],-1===t.inArray(i,r)&&(r.push(i),o.attr(s,r.join(" ")))},getId:function(e){var i=t(e),s=i.attr("id");return s||(s=n.createId(),i.attr("id",s)),s},createId:function(){return"accessible-id-"+ ++i},speak:function(e){var i=this;(e||!isNaN(e))&&(this.$speakField||(this.$speakField=t('<span class="is-visuallyhidden" role="status" aria-live="assertive" aria-atomic="true"></span>'),t("body").append(this.$speakField)),setTimeout(function(){i.$speakField.text(e)},0))}},s=function(){s.instanceCounter=(s.instanceCounter||0)+1,this.ns=".keepfocus_"+s.instanceCounter};s.current=null,s.prototype.keep=function(e,i){s.current&&s.current.release(),s.current=this;var n=t(e),o=n.add(n.parents()).add(n.find("*"));this.$disable=t('*:not([aria-hidden="true"])').not(o),this.$disable.attr("aria-hidden","true"),this.keepingFocus=!0,i&&t(document).on("focusin"+this.ns,function(e){var i=n.is(e.target)||t(e.target).parents().is(n);i||n.find("button, a, [tabindex]").first().focus()})},s.prototype.release=function(){this.keepingFocus&&(s.current=null,this.$disable.removeAttr("aria-hidden"),this.$disable=null,t(document).off(this.ns),this.keepingFocus=!1)};var o=/\S/;return n}),define("app/plugins/lightboxLink",["jquery","lib/net/HTMLLoader","lib/util/Templates","lib/util/EventDispatcher","lib/browser/KeyCode","lib/browser/Accessibility"],function(t,e,i,n,s,o){function a(){this.loader=new e,this.$element=null,this.ns=r+ ++u}var r=".plugins-lightbox",l=0,h=0,u=0;return t(document).on("click","a[data-lightbox], form button[data-lightbox]",function(e){var i=t(e.currentTarget),n=i.data("lightbox"),s=i.attr("href")||i.data("lightbox-source"),o=i.data("lightbox-instance"),r=null;if(i.is("button")){var l=i.parents("form").first();s=i.data("action")||l.attr("action");var h=l.serializeArray();i.attr("name")!==!1&&h.push({name:i.attr("name"),value:i.attr("value")||""}),r={data:h,method:l.attr("method")}}o||(o=new a,i.data("lightbox-instance",o)),"youtube"==n?o.handleYoutube(e):(e.preventDefault(),i.addClass("is-ajax-loader"),o.open(s,function(){i.removeClass("is-ajax-loader")},r))}),a.prototype=new n,a.prototype.getElement=function(){return this.$element},a.prototype.handleYoutube=function(e){if(!(Modernizr.touch&&t(window).width()<600)){var n,s=t(e.currentTarget),o=s.attr("href");if(n=o.indexOf("youtu.be")>=0?o.match(/\youtu.be\/([^\/]+)/):o.match(/\Wv=([^&]+)/)){var a=i.render("youtube-lightbox",{title:s.attr("title")||"",id:n[1]});a&&(e.preventDefault(),this.show(t("<div></div>").html(a).children().eq(0)))}}},a.prototype.open=function(e,n,s){var o,a,r,l=this;s||(s={}),0===e.indexOf("#")?(r=i.get(e.substr(1)),o=t("<div></div>").html(r?r(s.data||{}):t(e).html()),a=o.children().eq(0),l.show(a),n&&n.call(l)):this.loading||(this.loading=!0,this.loader.load(e,function(e){l.loading=!1,o=t("<div></div>").html(e),a=o.find(".lightbox").eq(0),l.show(a),n&&n.call(l)},s))},a.prototype.show=function(e){var i=this;if(l++,this.$element=t(e),h=t(document).scrollTop(),t("#body").append(this.$element),t("html").addClass("has-lightbox"),this.$element.on("click"+r,".js-lightbox-close",function(t){t.currentTarget.attributes["data-silent"]||t.preventDefault(),i.close()}),t("body").on("touchstart"+r,function(t){t.stopPropagation()}),this.$element.find(".lightbox-body").length&&this.$element.on("click"+r,function(e){t(e.target).is(".lightbox-body")||t(e.target).parents().is(".lightbox-body")||(e.preventDefault(),i.close())}),this.$element.addClass("is-hidden is-hidden-start"),setTimeout(function(){i.$element.removeClass("is-hidden is-hidden-start")},20),this.$focusedElement=t(":focus"),!this.$element.attr("aria-labelledby")){var n=this.$element.find("#dialog_title,h1,h2").first();o.labelBy(this.$element,n)}this.releaseFocus=o.keepFocus(this.getAccessibleElements(),!0),o.focusFirstText(this.$element),t("body").on("keydown"+r,t.proxy(function(t){switch(t.keyCode){case s.ESC:this.close()}},this)),this.trigger("open")},a.prototype.getAccessibleElements=function(){return this.$element},a.prototype.close=function(){var e=this.$element;this.$element.off(r),this.releaseFocus&&(this.releaseFocus(),this.releaseFocus=null),this.$focusedElement&&(this.$focusedElement.focus(),this.$focusedElement=null),l--,0===l&&t("html").removeClass("has-lightbox"),this.$element.addClass("is-hidden is-hidden-end"),this.$element.css("pointer-events","none"),t("body").off(r),Modernizr.csstransitions?setTimeout(function(){e.remove()},1e3):(t("html").hasClass("lt-ie9")&&e.find("iframe").remove(),e.remove()),t("html, body").scrollTop(h),this.trigger("close"),this.$element=null},a}),define("app/plugins/externalLink",["jquery","app/plugins/lightboxLink","app/Config"],function(t,e){return t(document),t(document).on("click","a.js-external_disclaimer",function(i){var n=t(i.currentTarget),s=n.attr("href");i.preventDefault(),setTimeout(function(){var i=s.match(/https?:\/\/[^\/]+/);i&&(i=i[0]);var o={title:t.trim(n.find("h1,h2,h3,h4,h5,strong").first().text())||t.trim(n.text())||n.attr("title")||n.find("img").attr("alt"),subtitle:i||s,link:s,target:n.attr("target")||""},a=new e;a.open("#external-link-disclaimer",function(){},{data:o})},0)}),!0}),define("app/plugins/inlineLink",["jquery","lib/browser/Accessibility"],function(t,e){return t(document).on("click",'a[href^="#"]',function(i){setTimeout(function(){if(!i.isDefaultPrevented()){var n=t(t(i.currentTarget).attr("href"));n.length&&e.focusFirstText(n.first())}},10)}),!0}),define("app/plugins/flyingFocus",["jquery"],function(t){function e(){return!1}function i(t){var e=t.getBoundingClientRect(),i=document.documentElement,n=document.defaultView,s=document.body,o=i.clientTop||s.clientTop||0,a=i.clientLeft||s.clientLeft||0,r=n.pageYOffset||i.scrollTop||s.scrollTop,l=n.pageXOffset||i.scrollLeft||s.scrollLeft,h=e.top+r-o,u=e.left+l-a;return{top:h,left:u,width:e.width,height:e.height,bottom:h+e.height,right:u+e.width}}function n(e){var n=t(e),s=n.attr("id"),o=t('label[for="'+s+'"]:visible');n=n.add(o);var a={top:1e6,left:1e6,bottom:-1e4,right:-1e4};return n.each(function(){var t=i(this);a.top=Math.min(a.top,t.top),a.left=Math.min(a.left,t.left),a.bottom=Math.max(a.bottom,t.bottom),a.right=Math.max(a.right,t.right)}),a.width=a.right-a.left,a.height=a.bottom-a.top,a}function s(t,e,i){t.addEventListener?t.addEventListener(e,i,!1):t.attachEvent("on"+e,i)}function o(){g||(clearTimeout(m),clearTimeout(w),w=setTimeout(a,10))}function a(){t(c).removeClass("flying-focus_visible"),g=!0,clearTimeout($)}function r(){clearTimeout(w),clearTimeout($);var e=g?0:p/1e3;c.style.transitionDuration=c.style.WebkitTransitionDuration=e+"s",k=0,$=setTimeout(l,100),g&&(t(c).addClass("flying-focus_visible"),g=!1)}function l(){var t=h(f);t.top!=y.top||t.left!=y.left||t.width!=y.width||t.height!=y.height?(y=t,k=0):k++,$=3>k?setTimeout(l,100):setTimeout(l,1e3)}function h(t){if(!g){var e=n(t);return(e.top!=y.top||e.left!=y.left||e.width!=y.width||e.height!=y.height)&&(c.style.left=e.left+"px",c.style.top=e.top+"px",c.style.width=e.width+"px",c.style.height=e.height+"px"),e}}var u=".flying-focus",d=!0;if(!document.getElementById("flying-focus")&&document.documentElement.addEventListener){var c=document.createElement("flying-focus");c.id="flying-focus",t(function(){document.body.appendChild(c)});var p=150;!!navigator.userAgent.match(/gecko/i)&&!navigator.userAgent.match(/webkit/i);var f,m,g=!0,v=0,y={};s(document.documentElement,"keydown",function(t){t.keyCode<65&&(v=new Date,d=!0)},!0),t(document).on("focusin"+u,function(t){clearTimeout(w),m=setTimeout(function(){var i=e(t.target);if(i||d){var n=t.target;if("flying-focus"!==n.id){var s=new Date;!i&&g&&s-v>100||(r(),y=h(n),f=n)}}},1)}),t(document).on("focusout"+u,function(){o()});var b=function(){o(),d=!1};s(document.documentElement,"mousedown",b),s(document.documentElement,"mouseup",b),s(window,"resize",function(){h(f)});var w,$,k=0;return{}}}),define("app/plugins/link",["jquery"],function(t){function e(e){var i=t(e.currentTarget),n=i.data("href")||i.attr("href");n&&(document.location=n)}return t(document).on("click",".js-link",e),e}),function(t){t.fn.prepareTransition=function(){function e(t,e){for(var i=0,n=0,s=e.length;s>n;n++){var o=parseFloat(t.css(e[n]));if(o&&o>i){i=1e3*o;break}}return i}var i={deepSearch:!1,callback:void 0},n=["transition-duration","-webkit-transition-duration","-o-transition-duration"],s=["transition-delay","-webkit-transition-delay","-o-transition-delay"];return"boolean"==typeof arguments[0]?(i.deepSearch=arguments[0],i.callback=arguments[1]):"function"==typeof arguments[0]?(i.callback=arguments[0],i.deepSearch=arguments[1]):t.extend(i,arguments[0]),this.each(function(){var o=t(this),a=0,r=0;if(a=e(o,n),r=Math.max(r,e(o,s)),a+=r,i.deepSearch)for(var l=o.find("*"),h=0,u=l.length;u>h;h++){var d=l.eq(h);a=Math.max(a,e(d,n))}if(0!==a){o.addClass("is-transitioning"),o[0].offsetWidth;var c=o.data("transition-timeout");c&&clearTimeout(c);var p=setTimeout(function(){o.removeClass("is-transitioning"),i.callback&&i.callback.call(),o.removeData("transition-timeout")},a);o.data("transition-timeout",p)}else i.callback&&i.callback.call()})}}(jQuery),define("app/plugins/jquery.prepareTransition",function(){}),define("app/plugins",["app/plugins/ScrollSighting","app/util/dev/dev","app/plugins/mediaDispatcher","app/plugins/stateChanger","app/modules/helpers/JSONP","app/plugins/formshim","app/plugins/bottomFooter","app/plugins/lightboxLink","app/plugins/externalLink","app/plugins/inlineLink","app/plugins/flyingFocus","app/plugins/link","app/plugins/jquery.prepareTransition"],function(t){return t.get().watch(".journal_article_teaser",{delay:150}),t.get().watch(".js-progressive_media",{delay:0,action:function(t){var e=(new Date).getTime(),i=$(t),n=i.find(".js-progressive_media--image"),s=new Image;s.onload=function(){var t=(new Date).getTime();setTimeout(function(){i.addClass("is-ready"),n.attr("src",s.src)},Math.max(t-e,500))},s.src=n.data("src")}}),!0}),define("lib/util/ModuleManager",["lib/util/contextTrigger"],function(t){function e(t,e){a||(i(),a=!0,setTimeout(function(){a=!1},0));var r,l;n(),r=new t,l=r.init(e);var h;l&&(h=$(e),h.data("moduleInstance",l),l.___el=e,o.push(l),$(e).attr("data-has-module","yes")),s(l?l.ns:r?r.ns:"unknown module",e)}function i(){for(var t,e,i=o.length,n=i-1;n>=0;n--)if(e=o[n],t=e.___el,!jQuery.contains(document.documentElement,t)){try{e.___el=null,e.destroy()}catch(s){}o.splice(n,1)}}function n(){}function s(){}var o=[],a=!1;return window.MutationObserver?!function(){function t(){clearTimeout(a),a=setTimeout(e,50)}function e(){clearTimeout(a),i()}var n=window.document.body,s=new MutationObserver(function(e){var i,n=e.length;for(i=0;n>i;i++)if(e[i].removedNodes.length){t();break}}),o={subtree:!0,childList:!0};s.observe(n,o);var a}():setInterval(i,2500),{connect:function(t,i){e(t,i)},add:function(i,n){"string"==typeof Module?t.add(n,function(){var t=this;require([i],function(i){e(i,t)})}):t.add(n,function(){var t=this;e(i,t)})},checkGarbage:i}}),define("app/modules/BaseModule",["jquery"],function(t){var e,i=".module-module",n=0,s={};return e=function(){this.$el=null,this.ns=i+n++},e.ns=function(t){return s[t]||(s[t]=0),"."+t+ ++s[t]},e.prototype.init=function(e){return this.$el=t(e),this},e.prototype.off=function(){this.$el.off(this.ns),t(document).off(this.ns),t(window).off(this.ns)},e.prototype.destroy=e.prototype._destroy=function(){this.$el&&(this.off(),this.$el=null,this.destroyed=!0)},e.prototype.on=function(){for(var e,i,n,s,o=[],a=0;a<arguments.length;a++)o[a]=arguments[a];switch(arguments.length){case 2:s=this.$el,e=o.shift(),n=o.shift();break;case 3:e=o.shift(),"string"==typeof e?(s=this.$el,i=o.shift(),n=o.shift()):(s=t(e),e=o.shift(),n=o.shift());break;case 4:s=t(o.shift()),e=o.shift(),i=o.shift(),n=o.shift()}i?s.on(e+this.ns,i,n):s.on(e+this.ns,n)},e.prototype.bind=function(t){var e=this;return function(){return t.apply(e,arguments)}},e}),define("app/modules/nav/mobileNav",["jquery","app/modules/BaseModule"],function(t,e){var i,n=0,s=".MobileNav";return i=function(){this.$el=null,this.ns=s+n++,this.nstemp=this.ns+"temp"},i.prototype=new e,i.prototype.init=function(e){return this.$el=t(e),this.$el.attr("aria-hidden","true"),this.$toggle=t(".js-mobile-nav-trigger"),this.$innerNav=this.$el.find(".js-mobile_nav--link"),this.$sections=this.$el.find(".js-mobile_nav--content"),this.bindListeners(),this.$toggle.css({opacity:1,animation:"none"}),this},i.prototype.bindListeners=function(){this.on(document,"click",".js-mobile-nav-trigger",this.bind(this.onTriggerClick)),t(".js-site-header--overlay").on("click",this.bind(this.onTriggerClick)),this.on(document,"click",".js-mobile_nav--link",this.bind(this.switchSection))},i.prototype.onTriggerClick=function(t){t.preventDefault(),this.$toggle.hasClass("is-active")?this.close():this.open()},i.prototype.open=function(){this.$el.prepareTransition().addClass("is-visible"),this.$el.attr("aria-hidden","false"),this.$toggle.addClass("is-active"),t("html").addClass("is-navigation-visible"),t(".js-site-header--overlay").prepareTransition().addClass("is-visible"),this.$el.find("a:first").trigger("focus")},i.prototype.close=function(){this.$el.prepareTransition().removeClass("is-visible"),this.$el.attr("aria-hidden","true"),this.$toggle.removeClass("is-active"),this.$sections.removeClass("is-active"),this.$sections.filter(".as-nav").addClass("is-active"),t("html").removeClass("is-navigation-visible"),t(".js-site-header--overlay").prepareTransition().removeClass("is-visible")
},i.prototype.switchSection=function(e){var i=this.$sections.filter(t(e.currentTarget).attr("href"));e.preventDefault(),this.$sections.prepareTransition().removeClass("is-active"),i.prepareTransition().addClass("is-active"),setTimeout(this.bind(function(){"undefined"!=typeof this.$focusElement?this.$focusElement.trigger("focus"):i.find("a:first").trigger("focus"),this.$focusElement=i.hasClass("as-nav")?void 0:t(e.currentTarget)}),300)},i}),define("app/util/FocusCloser",["jquery","app/modules/BaseModule","lib/browser/KeyCode"],function(t,e,i){function n(t){this.targetEl=t,this.ns=e.ns("FocusCloser"),this.tabKeyTime=0,this.listenTime=0}function s(t,e){if(!t)return!1;for("object"==typeof t&&t.hasOwnProperty("length")||(t=[t]);e;){if(Array.prototype.indexOf.call(t,e)>=0)return!0;e=e.parentNode}return!1}var o=navigator.userAgent.match(/ Chrome\/(\d+)/),a=o&&Number(o[1])>60,r=0,l=0;return a&&(new MutationObserver(function(t){for(var e=t.length-1;e>=0;e--){var i=t[e].addedNodes;if(i.length)for(var n=i.length-1;n>=0;n--){var s=i[n];if(1===s.nodeType&&(s=s.matches("INPUT,BUTTON,TEXTFIELD")||s.querySelector("INPUT,BUTTON,TEXTFIELD")))return console.log("A form element has been added to DOM",s),r=new Date,void 0}}}).observe(document.body,{subtree:!0,childList:!0,attributes:!1}),t(document).on("keydown"+this.ns,function(t){t.keyCode===i.TAB&&(l=new Date)})),n.prototype.listen=function(e){this.closeCallback=e,t(document).on("focusin"+this.ns,this.handleFocus.bind(this))},n.prototype.unlisten=function(){t(document).off(this.ns)},n.prototype.destroy=function(){this.unlisten(),this.targetEl=null},n.prototype.handleFocus=function(t){s(this.targetEl,t.target)||this.closeCallback(t)},n.listen=function(t){var e=new n(t.target);return t.ns&&(e.ns=t.ns),e.listen(t.onclose),e},n}),define("app/util/AccessibleMenu",["jquery","app/Config","lib/browser/KeyCode","lib/browser/Accessibility","app/util/FocusCloser"],function(t,e,i,n,s){function o(e,i,n){this.ns=".AccessibleMenu"+a++,this.options=t.extend({},r,n),this.$trigger=t(e),this.$menu=t(i),this.focusCloser=new s,e&&i&&this.setup()}var a=0,r={focusElements:"a:visible, button:visible, *[tabindex]:visible",groupElements:"",inputElements:"input:visible, select:visible, textarea:visible"};return o.prototype.setup=function(){var t=this.$trigger.attr("id")||"aamenu-trigger-"+a;this.menuId=this.$menu.attr("id")||"aamenu-menu-"+a,this.$trigger.attr({id:t,"aria-haspopup":"true","aria-expanded":"false"}),this.$menu.attr({id:this.menuId,role:"group","aria-expanded":"false","aria-labelledby":t,"aria-hidden":"true"})},o.prototype.handleClosed=function(t){var e=this;this.$trigger.attr({"aria-controls":null,"aria-expanded":"false"}),this.$menu.attr({"aria-expanded":"false","aria-hidden":"true"}),this.unlisten(),this.$trigger.on("keydown"+this.ns,function(i){e.handleClosedKey(i,t)})},o.prototype.handleClosedKey=function(t,e){(t.keyCode===i.SPACE||t.keyCode==i.DOWN)&&(t.preventDefault(),this.openedWithDownKey=t.keyCode==i.DOWN,e(t)!==!1&&this.$trigger.off(this.ns))},o.prototype.handleOpen=function(i){var s=this;this.$trigger.attr({"aria-controls":this.menuId,"aria-expanded":"true"}),this.$menu.attr({"aria-expanded":"true","aria-hidden":"false"}),this.hasInputElements=this.$menu.find(this.options.inputElements).length>0,this.openedWithDownKey&&(this.getFocusElements().length||this.hasInputElements)?this.hasInputElements?this.$menu.find(this.options.inputElements).first().focus():n.focus(this.getFocusElements().first()):n.focusFirstText(this.$menu,"*:not(.js-accessiblemenu-close)"),this.unlisten(),t(document).on("keydown"+this.ns,function(t){s.handleOpenKey(t,i)}),this.focusCloser.listen(function(t){s.handleOpenFocus(t,i)}),0===this.$menu.find(".js-accessiblemenu-close").length&&(this.$menu.find(".js-flyout").prepend('<p class="is-visuallyhidden js-accessiblemenu-close">'+e.get("locale","flyout-instruction")+"</p>"),this.$menu.find(".js-flyout").append('<p class="is-visuallyhidden js-accessiblemenu-close">'+e.get("locale","flyout-instruction")+"</p>"))},o.prototype.handleOpenKey=function(e,s){var o=t(e.target);e.keyCode===i.TAB?this.handleTab(o,e.shiftKey?-1:1)&&e.preventDefault():this.hasInputElements||e.keyCode!=i.UP&&e.keyCode!=i.DOWN?this.hasInputElements||e.keyCode!=i.LEFT&&e.keyCode!=i.RIGHT?(e.keyCode==i.ESC||o.is(this.$trigger)&&e.keyCode==i.SPACE)&&(e.preventDefault(),s(e),this.$trigger&&n.focus(this.$trigger)):this.switchGroup(o,e.keyCode==i.LEFT?-1:1)&&e.preventDefault():(e.preventDefault(),this.switchItem(o,e.keyCode==i.UP?-1:1))},o.prototype.handleOpenFocus=function(e,i){var s=t(e.target),o=s.parents().is(this.$menu)||s.is(this.$trigger);o||(i(),n.focus(this.$trigger))},o.prototype.switchItem=function(t,e){var i=this.getFocusElements(),s=i.index(t);-1===s&&(s=e>0?-1:0);var o=(s+i.length+e)%i.length;n.focus(i.get(o))},o.prototype.switchGroup=function(t,e){var i=this.$menu.find(this.options.groupElements);if(i.length){var s=i.index(t.parents(this.options.groupElements));-1===s&&(s=e>0?-1:0);var o=(s+i.length+e)%i.length;return n.focus(i.eq(o).find(this.options.focusElements).get(0)),!0}return!1},o.prototype.handleTab=function(){return!1},o.prototype.getFocusElements=function(){var t=this.$menu.find(this.options.focusElements+","+this.options.inputElements);return t},o.prototype.unlisten=function(){this.openedWithDownKey=!1,this.releaseFocus&&(this.releaseFocus(),this.releaseFocus=null),this.$trigger.off(this.ns),t(document).off(this.ns),this.focusCloser.unlisten()},o.prototype.bind=function(t){var e=this;return function(){t.apply(e,arguments)}},o.prototype.destroy=function(){this.unlisten(),this.focusCloser.destroy(),this.$trigger=null,this.$menu=null},o}),define("app/modules/nav/desktopNav",["jquery","app/util/AccessibleMenu","lib/browser/KeyCode"],function(t,e,i){var n,s,o=0;return s=t(document),n=function(){this.$element=null,this.dropdownSelector=".js-navigationdropdown",this.dropdownTriggerSelector=".js-nav-trigger .site-navigation-category a",this.dropdownContainerSelector=".js-mega-dropdown-container",this.navigationContainerSelector=".js-navigation-container",this.overlaySelector=".js-site-header--overlay",this.$container=null,this.$triggers=null,this.$dropdowns=null,this.$navContainer=null,this.$dropdowns=null,this.ns=".desktopNav"+ ++o},n.OPEN_EVENT="subnav_open",n.CLOSE_EVENT="subnav_close",n.prototype.init=function(e){return this.$element=t(e),this.$dropdowns=this.$element.find(this.dropdownSelector),this.$triggers=this.$element.find(this.dropdownTriggerSelector),this.$container=s.find(this.dropdownContainerSelector),this.$navContainer=this.$element.find(this.navigationContainerSelector),this.$overlay=t(this.overlaySelector),this.$overlay.removeClass("is-visible"),this.$container.removeClass("is-open"),this.extractSubnavigation(),this.setInteraction(),this},n.prototype.destroy=function(){this.$element.off("mouseenter.dropdown"),this.$triggers.off(this.ns),s.off("mouseleave.dropdown mouseover.dropdown mousedown.dropdown touchstart.dropdown"),this.reattatchSubnavigation(),this.$element=null,this.$container=null,this.$triggers=null,this.$dropdowns=null,this.$navContainer=null,this.$dropdowns=null},n.prototype.extractSubnavigation=function(){var i=this;this.$triggers.each(function(n){var s,o;s=t(this),o=s.parents(".js-nav-trigger").find(i.dropdownSelector),s.data("$dropdown",o),s.attr({"aria-posinset":n+1,"aria-setsize":i.$triggers.length});var a=new e(s,o,{groupElements:".dropdown-navigation-list"});s.data("aaMenu",a),o.data("aaMenu",a),o.appendTo(i.$container)})},n.prototype.reattatchSubnavigation=function(){this.$triggers.each(function(){var e,i;e=t(this),i=e.data("$dropdown"),i.show().appendTo(e)})},n.prototype.setInteraction=function(){function e(){c.$dropdowns.removeClass("is-open"),c.$container.prepareTransition().removeClass("is-open"),c.$overlay.prepareTransition().removeClass("is-visible"),t("html").removeClass("is-header-sticky"),d&&d.handleClosed(a)}function o(t,i){clearTimeout(l),clearTimeout(h),p&&(l=setTimeout(function(){e(),u&&(u.trigger(n.CLOSE_EVENT),u=null),p=!1},i?0:250))}function a(t){r(t,!0)}function r(i,s){var a,r=t(i.currentTarget);return a=r.data("$dropdown"),clearTimeout(l),p===a?!1:("click"===i.type&&(s=!0),clearTimeout(h),h=setTimeout(function(){e(),c.$container.prepareTransition().addClass("is-open"),a.addClass("is-open"),c.$overlay.prepareTransition().addClass("is-visible"),t("html").addClass("is-header-sticky"),u=a,a.trigger(n.OPEN_EVENT);var i=t(".css-arrow-up",a),s=a.offset(),l=r.offset(),h=r.outerWidth();i.css({left:l.left-s.left+h/2}),p=a,d=r.data("aaMenu"),d.handleOpen(function(t){o(t,!0)})},s||p?0:300),!0)}var l,h,u,d,c=this,p=!1;this.$triggers.each(function(){t(this).data("aaMenu").handleClosed(a)}),this.$triggers.on("keydown"+this.ns,function(t){if(t.keyCode==i.LEFT||t.keyCode==i.RIGHT){if(p)return;t.preventDefault();var e=t.keyCode==i.LEFT?-1:1,n=c.$triggers.index(t.currentTarget);n=(n+e+c.$triggers.length)%c.$triggers.length,c.$triggers.eq(n).focus()}}),this.$element.on("mouseenter.dropdown",c.dropdownTriggerSelector,r),this.$element.on("click.dropdown",c.dropdownTriggerSelector,function(t){r(t)&&t.preventDefault()}),s.on("mousedown.dropdown touchstart.dropdown",function(e){p&&(t(e.target).is(".js-mega-dropdown-container")||t(e.target).parents().is(".js-mega-dropdown-container")||o())}),s.on("mouseleave.dropdown",c.dropdownTriggerSelector+","+c.dropdownContainerSelector,o),s.on("mouseover.dropdown",c.dropdownTriggerSelector+","+c.dropdownContainerSelector,function(){clearTimeout(l)}),this.$container.find(".js-mega-dropdown-close-btn").on("click",function(t){o(t,!0)})},n}),define("app/modules/nav/nav",["jquery","app/plugins/mediaDispatcher"],function(t,e){var i;return i=function(){this.activeModule=null,this.ns=".NavController"},i.prototype.init=function(i){var n=this;return this.element=i,this.mobileNav=t(".js-mobile_nav")[0],e.isOrBelow("mobile").then(function(){require(["app/modules/nav/mobileNav"],function(t){n.registerModule(t,n.mobileNav)})}).otherwise(function(){require(["app/modules/nav/desktopNav"],function(t){n.registerModule(t,n.element)})}),this},i.prototype.registerModule=function(t,e){this.activeModule&&this.activeModule.destroy(),this.activeModule=new t,this.activeModule.init(e)},i.prototype.destroy=function(){this.element=null,this.activeModule&&this.activeModule.destroy()},i}),define("lib/animation/AnimationFrame",[],function(){for(var t=0,e=["ms","moz","webkit","o"],i=0;i<e.length&&!window.requestAnimationFrame;++i)window.requestAnimationFrame=window[e[i]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[e[i]+"CancelAnimationFrame"]||window[e[i]+"CancelRequestAnimationFrame"];return window.requestAnimationFrame||(window.requestAnimationFrame=function(e){var i=(new Date).getTime(),n=Math.max(0,16-(i-t)),s=window.setTimeout(function(){e(i+n)},n);return t=i+n,s}),window.cancelAnimationFrame||(window.cancelAnimationFrame=function(t){clearTimeout(t)}),{request:function(){return requestAnimationFrame.apply(null,arguments)},cancel:function(){return cancelAnimationFrame.apply(null,arguments)}}}),define("lib/browser/VisibilityChecker",["jquery","lib/animation/AnimationFrame"],function(t,e){function i(t){m.push(t),c||(c=e.request(s))}function n(t){f=f.not(t),m=m.not(t)}function s(){var e=m;m=t([]),c=null,f=f.add(e),r(e)}function o(){r(f)}function a(){p||(p=e.request(function(){p=null,o()}))}function r(t){var e=performance.now(),i=[];return t.each(function(){l(this,{expand:1.1})&&i.push(this)}),window.visibilityCheckerTime+=performance.now()-e,i.length&&(f=f.not(i),h(i)),i}function l(t,e){return t.offsetParent?"hidden"===window.getComputedStyle(t).visibility?!1:u(t,e):!1}function h(e){t(e).trigger("visible")}function u(t,e){"undefined"==typeof e.expand&&(e.expand=1);var i=t,n=g.width(),s=g.height(),o=e.expand*n,a=e.expand*s,r=(n-o)/2,l=(n+o)/2,h=(s-a)/2,u=(s+a)/2,d="entire"!==e.cover,c=i.getBoundingClientRect(),p=c.top>=h&&c.top<u,f=c.bottom>h&&c.bottom<=u,m=c.left>=r&&c.left<l,v=c.right>r&&c.right<=l,y=d?p||f:p&&f,b=d?m||v:m&&v;return"vertical"===e.direction?y:"horizontal"===e.direction?b:y&&b}function d(t){var e=t.getBoundingClientRect();return 1-(e.top+e.height)/(g.height()+e.height)}var c,p,f=t([]),m=t([]);window.visibilityCheckerTime=0,document.addEventListener("scroll",o,!0),t(document).on("visibilitychange",o),t(window).on("resize",o),window.MutationObserver?new MutationObserver(a).observe(document.body,{subtree:!0,childList:!0,attributes:!0}):setInterval(o,1e3);var g=t(window);return{add:i,remove:n,visible:l,progress:d,invalidate:a}}),define("app/util/delayModule",["jquery","lib/browser/VisibilityChecker"],function(t,e){return function(i){var n=i.prototype.init;i.prototype.init=function(i){var s=this,o=arguments;e.add(i),t(i).one("visible"+(this.ns||""),function(){n.apply(s,o)})}}}),define("app/modules/helpers/delayed",["jquery","app/modules/BaseModule","app/util/delayModule"],function(t,e,i){function n(){this.ns=e.ns("Delayed")}return n.prototype=new e,n.prototype.init=function(e){this.$el=t(e);var i=t(this.$el.data("delayed"));return i?(i.is("script")&&(i=t(i.text())),this.$el.replaceWith(i),!1):(console.log("Could not find delayed source",e),!1)},i(n),n}),define("lib/animation/Easing",["jquery"],function(t){function e(t,e){var i=t/100,n=.005/Math.pow(10,t),s=Math.floor(Math.log(n)/-i),o=e*Math.PI/s;return function(t,e,n,a,r){var l=e/r;if(l>=1)return 1;if(0>=l)return 0;var h=l*s,u=Math.pow(Math.E,-i*h),d=Math.cos(o*h);return 1-u*d}}t.extend(t.easing,{bounceOut:e(1,2)}),jQuery.extend(jQuery.easing,{def:"easeOutQuad",swing:function(t,e,i,n,s){return jQuery.easing[jQuery.easing.def](t,e,i,n,s)},easeInQuad:function(t,e,i,n,s){return n*(e/=s)*e+i},easeOutQuad:function(t,e,i,n,s){return-n*(e/=s)*(e-2)+i},easeInOutQuad:function(t,e,i,n,s){return(e/=s/2)<1?n/2*e*e+i:-n/2*(--e*(e-2)-1)+i},easeInCubic:function(t,e,i,n,s){return n*(e/=s)*e*e+i},easeOutCubic:function(t,e,i,n,s){return n*((e=e/s-1)*e*e+1)+i},easeInOutCubic:function(t,e,i,n,s){return(e/=s/2)<1?n/2*e*e*e+i:n/2*((e-=2)*e*e+2)+i},easeInQuart:function(t,e,i,n,s){return n*(e/=s)*e*e*e+i},easeOutQuart:function(t,e,i,n,s){return-n*((e=e/s-1)*e*e*e-1)+i},easeInOutQuart:function(t,e,i,n,s){return(e/=s/2)<1?n/2*e*e*e*e+i:-n/2*((e-=2)*e*e*e-2)+i},easeInQuint:function(t,e,i,n,s){return n*(e/=s)*e*e*e*e+i},easeOutQuint:function(t,e,i,n,s){return n*((e=e/s-1)*e*e*e*e+1)+i},easeInOutQuint:function(t,e,i,n,s){return(e/=s/2)<1?n/2*e*e*e*e*e+i:n/2*((e-=2)*e*e*e*e+2)+i},easeInSine:function(t,e,i,n,s){return-n*Math.cos(e/s*(Math.PI/2))+n+i},easeOutSine:function(t,e,i,n,s){return n*Math.sin(e/s*(Math.PI/2))+i},easeInOutSine:function(t,e,i,n,s){return-n/2*(Math.cos(Math.PI*e/s)-1)+i},easeInExpo:function(t,e,i,n,s){return 0==e?i:n*Math.pow(2,10*(e/s-1))+i},easeOutExpo:function(t,e,i,n,s){return e==s?i+n:n*(-Math.pow(2,-10*e/s)+1)+i},easeInOutExpo:function(t,e,i,n,s){return 0==e?i:e==s?i+n:(e/=s/2)<1?n/2*Math.pow(2,10*(e-1))+i:n/2*(-Math.pow(2,-10*--e)+2)+i},easeInCirc:function(t,e,i,n,s){return-n*(Math.sqrt(1-(e/=s)*e)-1)+i},easeOutCirc:function(t,e,i,n,s){return n*Math.sqrt(1-(e=e/s-1)*e)+i},easeInOutCirc:function(t,e,i,n,s){return(e/=s/2)<1?-n/2*(Math.sqrt(1-e*e)-1)+i:n/2*(Math.sqrt(1-(e-=2)*e)+1)+i},easeInElastic:function(t,e,i,n,s){var o=1.70158,a=0,r=n;if(0==e)return i;if(1==(e/=s))return i+n;if(a||(a=.3*s),r<Math.abs(n)){r=n;var o=a/4}else var o=a/(2*Math.PI)*Math.asin(n/r);return-(r*Math.pow(2,10*(e-=1))*Math.sin((e*s-o)*2*Math.PI/a))+i},easeOutElastic:function(t,e,i,n,s){var o=1.70158,a=0,r=n;if(0==e)return i;if(1==(e/=s))return i+n;if(a||(a=.3*s),r<Math.abs(n)){r=n;var o=a/4}else var o=a/(2*Math.PI)*Math.asin(n/r);return r*Math.pow(2,-10*e)*Math.sin((e*s-o)*2*Math.PI/a)+n+i},easeInOutElastic:function(t,e,i,n,s){var o=1.70158,a=0,r=n;if(0==e)return i;if(2==(e/=s/2))return i+n;if(a||(a=s*.3*1.5),r<Math.abs(n)){r=n;var o=a/4}else var o=a/(2*Math.PI)*Math.asin(n/r);return 1>e?-.5*r*Math.pow(2,10*(e-=1))*Math.sin((e*s-o)*2*Math.PI/a)+i:.5*r*Math.pow(2,-10*(e-=1))*Math.sin((e*s-o)*2*Math.PI/a)+n+i},easeInBack:function(t,e,i,n,s,o){return void 0==o&&(o=1.70158),n*(e/=s)*e*((o+1)*e-o)+i},easeOutBack:function(t,e,i,n,s,o){return void 0==o&&(o=1.70158),n*((e=e/s-1)*e*((o+1)*e+o)+1)+i},easeInOutBack:function(t,e,i,n,s,o){return void 0==o&&(o=1.70158),(e/=s/2)<1?n/2*e*e*(((o*=1.525)+1)*e-o)+i:n/2*((e-=2)*e*(((o*=1.525)+1)*e+o)+2)+i},easeInBounce:function(t,e,i,n,s){return n-jQuery.easing.easeOutBounce(t,s-e,0,n,s)+i},easeOutBounce:function(t,e,i,n,s){return(e/=s)<1/2.75?n*7.5625*e*e+i:2/2.75>e?n*(7.5625*(e-=1.5/2.75)*e+.75)+i:2.5/2.75>e?n*(7.5625*(e-=2.25/2.75)*e+.9375)+i:n*(7.5625*(e-=2.625/2.75)*e+.984375)+i},easeInOutBounce:function(t,e,i,n,s){return s/2>e?.5*jQuery.easing.easeInBounce(t,2*e,0,n,s)+i:.5*jQuery.easing.easeOutBounce(t,2*e-s,0,n,s)+.5*n+i}})}),define("app/modules/helpers/lazyContent",["jquery","app/modules/BaseModule","app/plugins/mediaDispatcher","lib/net/HTMLLoader","lib/animation/AnimationFrame","lib/animation/Easing"],function(t,e,i,n,s){function o(){this.ns=e.ns("LazyContent")}function a(t,e,i){e!=i&&(t.css({height:e,opacity:0}),t.stop().animate({height:i},{duration:400,easing:"easeInOutCubic",complete:function(){t.css({height:"",overflow:""})}}).animate({opacity:1},{duration:300,easing:"linear",complete:function(){t.css({opacity:""})}}))}o.lookup={},o.load=function(t){var e=o.lookup[t.source];e||(e=new o.Loader(t.source),o.lookup[t.source]=e),t.priority<e.priority&&(e.priority=t.priority),e.addTarget(t.target,t.id),o.invalidate()},o.invalidate=function(){s.cancel(o.tick),o.tick=s.request(o.validate.bind(o))},o.validate=function(){var e,i=[];for(var n in o.lookup)e=o.lookup[n],e.loaded?e.validate():i.push(e);if(i.length){i.sort(function(t,e){return t.priority-e.priority});for(var s=i[0].priority,a=[],n=0;n<i.length&&i[n].priority==s;n++)a.push(i[n].load());t.when.apply(null,a).then(function(){this.invalidate()}.bind(this))}},o.prototype=new e,o.prototype.init=function(e){this.$el=t(e),this.id=this.$el.data("lazycontent");var i=this.$el.data("lazycontent-mode");return"visibility"==i?(this.on(document,"scroll",this.handleScroll.bind(this)),this.handleScroll()):"mobilehidden"==i?this.handleMobile():this.register(),this},o.prototype.register=function(){var t=this.$el.data("lazycontent").split("#"),e=t[0],i=t[1],n=this.$el.data("lazycontent-priority");n=n?Number(n):100,o.load({target:this.$el.get(0),source:e,id:i,priority:n})},o.prototype.handleScroll=function(){var e=t(window).height(),i=this.$el.get(0).getBoundingClientRect();i.bottom>0*-e&&i.top<1*e&&(this.off(),this.register())},o.prototype.handleMobile=function(){var t=this;i.isOrBelow("mobile").then(function(){t.$el.hide()},this).otherwise(function(){t.register()},this)};var r=o.prototype.destroy;o.prototype.destroy=function(){i.unlisten(this),r.call(this)};var l=o.Loader=function(t){this.source=t,this.priority=100,this.targets={}};return l.prototype.addTarget=function(t,e){this.targets[e]=t},l.prototype.load=function(){var e=t.Deferred();if(this.loaded)e.resolveWith(this);else{var i=new n({allowInlineScript:!0});i.load(this.source,function(i){this.loaded=!0,this.$result=t(i),this.validate(),e.resolveWith(this)}.bind(this))}return e.promise()},l.prototype.validate=function(){var e={};for(var i in this.targets)e[i]=t(this.targets[i]).height();for(var i in this.targets){var n=this.$result.find("#"+i).clone();n.css("overflow","hidden"),this.targets[i]=t(this.targets[i]).replaceWith(n),this.targets[i]=n}for(var i in this.targets){var s=this.targets[i],o=e[i],r=s.height();a(s,o,r)}this.targets={}},o}),define("app/modules/helpers/lazyImage",["jquery","app/modules/BaseModule"],function(t,e){function i(){this.ns=e.ns("LazyImage")}return i.prototype=new e,i.prototype.init=function(e){return this.$el=t(e),this.el=e,this.src=this.$el.data("lazyimage"),this.on(document,"scroll",this.handleScroll.bind(this)),this.handleScroll(),this},i.prototype.handleScroll=function(){var e=t(window).height(),i=this.el.getBoundingClientRect();i.bottom>-e/4&&i.top<1.25*e&&(this.off(),this.load())},i.prototype.load=function(){var e=this.el,i="IMG"==e.nodeName?e:new Image;t(i).on("load",function(){this.$el.addClass("is-loaded"),i!=e&&(e.style.backgroundImage="url("+i.src+")")}.bind(this)),i.src=this.src},i}),define("app/modules/helpers/fitFlowText",["jquery","app/modules/BaseModule","app/util/delayModule"],function(t,e,i){function n(){this.ns=e.ns("FitFlowText")}return n.prototype=new e,n.prototype.init=function(e){this.$el=t(e);var i={minSize:this.$el.data("min-size"),maxSize:this.$el.data("max-size"),maxLines:this.$el.data("max-lines"),fitMode:this.$el.data("fit-mode")};this.options=t.extend({},{minSize:0,maxSize:1e5,maxLines:1,fitMode:"multi"});for(var n in i)"undefined"!=typeof i[n]&&(this.options[n]=i[n]);return this.validate(),this.$el.addClass("is-fittext"),this.on(window,"resize",this.bind(this.validate)),this},i(n),n.prototype.validate=function(){function e(){var t=a.maxWordWidth<=a.width,e=a.numLines<=r.maxLines;return t&&e}function i(){var t={maxWordWidth:0,totalWordWidth:0,numLines:0,width:l.width()};t.maxAvailableWidth=Math.min(h.length,r.maxLines)*t.width;var e,i=-1;return h.each(function(){e=this.__clientRect=this.getBoundingClientRect(),e.top>i&&(t.numLines++,i=e.top),e.width>t.maxWordWidth&&(t.maxWordWidth=e.width),t.totalWordWidth+=e.width+e.height*u}),t.totalWordWidth-=e.height*u,t.totalWordWidth+=Math.max(0,(t.numLines-r.maxLines)*e.height),t}function n(){var t=1;t=a.maxWordWidth>a.width||a.numLines>r.maxLines?Math.min(a.width/a.maxWordWidth,a.maxAvailableWidth/a.totalWordWidth):a.maxWordWidth>a.width?a.width/a.maxWordWidth:Math.min(a.width/a.maxWordWidth,a.maxAvailableWidth/a.totalWordWidth),1>t&&1/t>d?t=Math.min(1,1/(.99*d)):t>1&&t>d&&(t=Math.max(1,.9*d)),d=1>t?1/t:t,a.numLines>r.maxLines&&t>=.9&&(t=.98),c*=t}function s(t){var e=String(r.minSize);e.indexOf("%")>0&&(e=parseInt(e,10)/100*a.width);var i=String(r.maxSize);return i.indexOf("%")>0&&(i=parseInt(i,10)/100*a.width),Math.max(Number(e),Math.min(Number(i),t))}var o,a,r=this.options,l=this.$el,h=this.$words,u=this.spaceFactor;if(this.scaleFactor&&(l.css("font-size",this.scaleFactor*l.width()),a=i(),e()))return l.css("font-size",s(this.scaleFactor*l.width())),console.log("%c No round – just scaling","background: lime"),void 0;var d=1e3,c=parseInt(l.css("font-size"),10),p="single"==r.fitMode?l.html():l.text().trim();"single"==r.fitMode?(this.spaceFactor=1,this.$words||(this.$words=t("<span></span>"),this.$words.appendTo(l.html("")).append(p))):(l.html("<span>AA</span><span>A A</span>"),h=l.children(),this.spaceFactor=(h.eq(1).width()-h.eq(0).width())/c,o=p.split(/\s+/).map(function(t){return"<span>"+t+"</span>"}),l.html(o.join(" ")),this.$words=l.children()),h=this.$words,u=this.spaceFactor;for(var f=0;20>f;f++){var m=c;if(a=i(),n(),1.01>d&&e()){l.css("font-size",s(m)),this.scaleFactor=m/a.width,console.log("%c Took me "+(f+1)+"rounds","background: yellow");break}l.css("font-size",c)}return this},n}),define("app/util/AjaxLoader",["jquery","lib/net/HTMLLoader","lib/util/Templates","lib/util/EventDispatcher"],function(t,e,i,n){function s(t){this.loader=new e,t&&this.setTarget(t)}return s.prototype=new n,s.prototype.setTarget=function(e){this.$target=t(e)},s.prototype.load=function(n,s){function o(){d.children().remove(),d.append(a),u.resolve(a)}s?"function"==typeof s&&(s={success:s}):s={};var a,r,l,h=this,u=t.Deferred(),d=this.$target,c=!1;return s.success&&u.done(s.success),u.done(function(t){h.trigger("load",t)}),"string"==typeof n&&0===n.indexOf("#")&&(l=i.get(n.substr(1)))?(r=l(s.data),a=t(t.parseHTML(t.trim(r))),c=!0,o()):"string"!=typeof n||0===n.indexOf("#")||0===n.indexOf("<")?(a=t(n),o()):n.indexOf("#")>0&&(n=n.split("#"),this.loader=new e,this.loader.load(n[0],function(e){var i=t("<div></div>").html(e);a=i.find("#"+n[1]),c=!0,o(),loader=null})),u.promise()},s.prototype.cancel=function(){this.loader.cancel()},s}),define("app/modules/helpers/ajaxContent",["jquery","app/modules/BaseModule","app/util/AjaxLoader","lib/browser/Accessibility"],function(t,e,i,n){function s(e){"complete"==document.readyState?e():t(window).load(e)}var o,a=".AjaxContent",r=0;return o=function(){this.$el=null,this.ns=a+r++},o.prototype=new e,o.prototype.init=function(e){var o=this;this.$el=t(e);var a=this.$el.data("ajax-content");return a&&s(function(){o.loader=new i(o.$el),o.loader.load(a).then(function(){a.indexOf("origin-chooser")>=0&&n.focusFirstText(o.$el)})}),this},o.prototype.destroy=function(){this.$el&&(this.$el=null),this.loader&&(this.loader.cancel(),this.loader=null)},o}),define("app/util/AjaxUpdater",["jquery","lib/net/HTMLLoader","lib/util/EventDispatcher","lib/browser/Accessibility"],function(t,e,i,n){function s(){this.loader=new e,this.cacheEnabled=!1}return t("html").is(".lt-ie9"),s.prototype=new i,s.prototype.enableCache=function(){this.cacheEnabled=!0},s.prototype.load=function(e,i){function s(e){var i=t("<div></div>").html(e),s=t();t.each(u,function(e,o){var a=i.find("#"+o).not('[data-ajax-load-replace="ignore"]'),r=t("#"+o);if(0===a.length||0===r.length);else{var l=t.contains(r.get(0),c);if(r.replaceWith(a),document.activeElement!=c&&l){var h;c.id&&(h=t("#"+c.id).get(0))?h.focus():c.name&&(h=t('[name="'+c.name+'"]').get(0))?h.focus():p>=0&&(h=t("a,button,input,select,[tabindex]").get(p))?h.focus():n.focusFirstText(a)}s=s.add(a)}}),o(),a.resolve(s)}function o(){f.removeClass("is-ajax-loading"),f.each(function(){var e=t(this),i=e.data("position");i&&(e.css("position",i),e.data("position",""))}),f.children(".ajax-load-overlay").remove()}var a=t.Deferred();i?"function"==typeof i&&(a.done(i),i={}):i={};var r=this;this.cancel(),a.done(function(t){r.trigger("load",t)});var l=e.split("#"),h=l[0],u=l[1].split(","),d=t();t.each(u,function(t,e){d=d.add(document.getElementById(e))});var c=document.activeElement,p=t("a,button,input,select,[tabindex]").index(c);console.log("Active Element before AJAX replace:",p,document.activeElement);var f=d.not('[data-ajax-load-status="ignore"]');f.addClass("is-ajax-loading"),f.each(function(){var e=t(this),i=e.css("position");"absolute"!=i&&"fixed"!=i&&"relative"!=i&&(e.css("position","relative"),e.data("position",i))}),f.children(".ajax-load-overlay").remove(),f.append('<div class="ajax-load-overlay"></div>');var m=e+i.data,g=this.cache(m);if(g)s(g);else{var v=this.loader.load(h,function(t){r.cache(m,t),s(t)},i);v.fail(function(){o(),a.reject()})}return a.promise()},s.prototype.isCached=function(t,e){var i=t+e.data,n=this.cache(i);return!!n},s.prototype.cache=function(t,e){return this.cacheEnabled?(this.cache||(this.cache={}),e?(this.cache[t]=e,void 0):this.cache[t]):!1},s.prototype.cancel=function(){this.loader.cancel()},s}),define("app/util/Capabilities",[],function(){function t(t,e){if(!e)return t;for(var i=t.split(" "),n=i.length-1;n>=0;n--)i[n]=i[n]+e;return i.join(" ")}var e=!!window.navigator.msPointerEnabled&&window.navigator.msMaxTouchPoints>=1,i="ontouchstart"in window||e;(" "+document.getElementsByTagName("html")[0].className+" ").indexOf(" touch ")>-1,Capabilities={system:{ios:!!navigator.userAgent.match(/(iPhone|iPod|iPad)/i),windowsphone:navigator.userAgent.indexOf("Windows Phone")>=0,android:navigator.userAgent.indexOf("Android")>0},touch:i,pointertouch:e},Capabilities.TOUCHSTART=e?"MSPointerDown":"touchstart",Capabilities.TOUCHMOVE=e?"MSPointerMove":"touchmove",Capabilities.TOUCHEND=e?"MSPointerUp":"touchend",Capabilities.DRAGSTART=i?Capabilities.TOUCHSTART:"mousedown",Capabilities.DRAGMOVE=i?Capabilities.TOUCHMOVE:"mousemove",Capabilities.DRAGEND=i?Capabilities.TOUCHEND:"mouseup";var n={mousedown:["mousemove","mouseup"],touchstart:["touchmove","touchend"],pointerdown:["pointermove","pointerup"],MSPointerDown:["MSPointerMove","MSPointerUp"]};return Capabilities.dragstart=function(e){return t("touchstart mousedown pointerdown MSPointerDown",e)},Capabilities.dragmove=function(e,i){return i?t(n[i.type][0],e):t("touchmove mousemove pointermove MSPointerMove",e)},Capabilities.dragend=function(e,i){return i?t(n[i.type][1],e):t("touchend mouseup pointerup MSPointerUp",e)},Capabilities.getEventPosition=function(t,e){return e||(e="page"),t.originalEvent.touches?{x:t.originalEvent.touches[0][e+"X"],y:t.originalEvent.touches[0][e+"Y"]}:{x:t[e+"X"],y:t[e+"Y"]}},Capabilities.isTouchEvent=function(t){return t?"touchstart"==t.type||"touch"==t.pointerType:!1},Capabilities}),define("app/modules/helpers/ajaxUpdate",["jquery","app/modules/BaseModule","app/util/AjaxUpdater","app/util/Capabilities"],function($,BaseModule,AjaxUpdater,Capabilities){var AjaxUpdate,ns=".AjaxUpdate",instanceCounter=0;return AjaxUpdate=function(){this.updater=new AjaxUpdater,this.$el=null,this.ns=ns+instanceCounter++,this.DEFAULT_TARGET="body"},AjaxUpdate.prototype=new BaseModule,AjaxUpdate.prototype.init=function(t){return this.$el=$(t),this.$el.is("form")?(this.on("click",".js-ajax-update-click",this.bind(this.handleFormClick)),this.on("change",".js-ajax-update-change",this.bind(this.handleFormChange))):this.$el.is("a")&&this.on("click",this.bind(this.handleLinkClick)),"now"===this.$el.data("ajax-exec")&&this.handleFormChange({target:t}),this},AjaxUpdate.prototype.load=function(t,e,i){e||(e=null),i||(i="get");var n=this.updater.load(t,{data:e,method:i});return n},AjaxUpdate.prototype.handleFormChange=function(t){clearTimeout(this.submitTimeout),this.submitTimeout=setTimeout(this.bind(function(){this.handleFormSubmit(t)}),100)},AjaxUpdate.prototype.handleFormClick=function(t){t.preventDefault(),this.handleFormChange(t)},AjaxUpdate.prototype.handleFormSubmit=function(t){var e=$(t.target),i=this._getUrl("action",e),n=this.$el.serialize(),s=this.$el.attr("method");if(e.is("button[name]")){var o=e.attr("name"),a=e.attr("value");n+="&"+o+"="+a}var r=this.load(i,n,s);this.addCallback(this.$el,r.done,"success"),this.addCallback(this.$el,r.fail,"error"),this.addCallback(this.$el,r.always,"complete"),this.addCallback(e,r.done,"success"),this.addCallback(e,r.fail,"error"),this.addCallback(e,r.always,"complete")},AjaxUpdate.prototype.handleLinkClick=function(t){var e=this._getUrl("href");this.load(e),t.preventDefault()},AjaxUpdate.prototype._getUrl=function(t,e){e||(e=$());var i=e.data("ajax-"+t)||this.$el.data("ajax-"+t)||this.$el.attr(t),n=e.data("ajax-target")||this.$el.data("ajax-target");return n&&(i=i.split("#")[0]+"#"+n),this.DEFAULT_TARGET&&i.indexOf("#")<0&&(i+="#"+this.DEFAULT_TARGET),i},AjaxUpdate.prototype.addCallback=function($target,addCallback,eventName){var callbackJavascript=$target.data("ajax-callback-"+eventName);callbackJavascript&&addCallback(function(){eval(callbackJavascript)})},AjaxUpdate.prototype.destroy=function(){this.$el&&(this.$el=null),this.loader&&(this.updater.cancel(),this.updater=null)},AjaxUpdate}),define("app/modules/helpers/autocompleteUpdate",["app/modules/helpers/ajaxUpdate"],function(t){function e(){t.call(this)}e.prototype=new t;var i=e.prototype.handleFormChange;return e.prototype.handleFormChange=function(t,e){"autocomplete"===e&&i.call(this,t)},e}),define("app/modules/forms/multirow",["jquery","app/modules/BaseModule"],function(t,e){var i,n=".multirow",s=0;return i=function(){this.$el=null,this.ns=n+s++},i.prototype=new e,i.prototype.init=function(e){return this.$el=t(e),this.on("click",".js-multirow-delete",this.bind(function(e){this.removeSoon(t(e.target).parents(".js-multirow-row").first())})),!1},i.prototype.removeSoon=function(t){clearTimeout(this.removeTimeout),this.removeTimeout=setTimeout(function(){t.remove()},100)},i}),define("app/modules/content/listfilter",["jquery","app/modules/BaseModule","lib/browser/KeyCode"],function(t,e,i){function n(){this.ns=e.ns("ListFilter"),this.ns_temp=this.ns+"_temp"}return n.prototype=new e,n.prototype.init=function(e){this.$el=t(e);var i=this,n=this.$el.find(".js-listfilter--search");return n.on("keyup"+this.ns+" change"+this.ns,this.bind(function(t){this.filterBy(t.currentTarget.value)})),n.on("focus"+this.ns+" click"+this.ns,this.bind(function(){this.openList()})),this.$el.find(".evo-listfilter--toggle > .js-expandable--trigger").on("change",function(){var e=t(this).is(":checked");
e?i.$el.addClass("is-active"):(i.$el.removeClass("is-active"),n.val("").trigger("change"))}),this},n.prototype.filterBy=function(e){var i=e.toLowerCase(),n=0,s=this.$el.find(".js-listfilter--group");if(i){t(".js-listfilter--item[data-value]").each(function(){for(var e=t(this).data("value").toLowerCase(),s=e.split(", "),o=0;o<s.length;o++)if(0==s[o].indexOf(i))return t(this).removeClass("no-match"),n++,void 0;t(this).addClass("no-match")}),s.addClass("no-match");var s=s.filter(function(){return t(this).find("[data-value]:not(.no-match)").length});s.children("ul").attr("aria-expanded","true"),s.removeClass("no-match"),t(".js-listfilter--count").text(n+" items filtered")}else t(".no-match").removeClass("no-match"),s.children("ul").attr("aria-expanded","false"),s.removeClass("no-match")},n.prototype.closeList=function(){this.unregisterCloseFn(),this.$el.find(".js-listfilter--list").attr("aria-expanded","false"),this.$el.removeClass("is-active")},n.prototype.openList=function(){this.$el.hasClass("is-active")||(this.$el.find(".js-listfilter--list").attr("aria-expanded","true"),this.$el.addClass("is-active"),this.registerCloseFn())},n.prototype.registerCloseFn=function(){var e=this;this.unregisterCloseFn(),t(document).on("keydown"+e.ns+e.ns_temp,function(t){t.keyCode===i.ESC&&e.closeList()}),t(document).on("click"+e.ns+e.ns_temp,function(i){console.log(i.target),e.$el[0]===i.target||t.contains(e.$el[0],i.target)||e.closeList()})},n.prototype.unregisterCloseFn=function(){t(document).off(this.ns_temp)},n}),define("app/modules/booking/bookLoadingOverlay",["jquery","app/modules/BaseModule","lib/browser/Accessibility"],function(t,e,i){function n(){this.ns=e.ns("BookLoadingOverlay")}return n.prototype=new e,n.prototype.init=function(e){return this.$el=t(e),n.createAnimation(e),this},n.createAnimation=function(e){var n=t(e);if(!n.data("bookloadingoverlay-animation")&&(n.data("bookloadingoverlay-animation",!0),n.css({opacity:1}),Modernizr.csstransforms3d)){var s=n.find(".book-loading-overlay-symbol");if(1===s.length){i.focusFirstText(e),i.keepFocus(e);for(var o=0;10>o;o++)!function(){var t=s.clone(),e=5*Math.random()+3+"s";t.addClass("is-clone is-hidden"),s.after(t),t.css({transform:"rotateZ("+360*Math.random()+"deg)"}),t.children().css({"-webkit-animation-duration":e,"animation-duration":e}),setTimeout(function(){t.removeClass("is-hidden")},200*o+1e3*Math.random())}()}}},n}),define("app/modules/forms/formSubmitAction",["jquery","app/modules/BaseModule","lib/browser/Accessibility","app/modules/booking/bookLoadingOverlay"],function(t,e,i,n){function s(t){n.createAnimation(t)}var o,a=".form-submit-action",r=0;return o=function(){this.$el=null,this.ns=a+r++},o.prototype=new e,o.prototype.init=function(e){return this.$el=t(e),this.on("submit",this.bind(this.handleSubmit)),window.addEventListener("pagehide",function(){t("#book-loading-overlay").hide()}),this},o.prototype.handleSubmit=function(t){return this.getData("cancelsubmit")?(this.checkSubmit(t),t.preventDefault(),this.$el.data("form-submit-action-cancelsubmit",!1),setTimeout(function(){this.$el.submit()}.bind(this),5e3),void 0):(setTimeout(this.bind(function(){this.checkSubmit(t)}),100),void 0)},o.prototype.checkSubmit=function(e){if(!e.isDefaultPrevented()){var i=this.getData("show");i&&(t(i).fadeIn(),s(i)),i=this.getData("hide"),i&&t(i).fadeOut()}},o.prototype.getData=function(t){return this.$el.data("form-submit-action-"+t)},o}),define("app/modules/forms/formChangeAction",["jquery","app/modules/BaseModule","lib/browser/Accessibility"],function(t,e){var i,n=".form-change-action",s=0;return i=function(){this.$el=null,this.ns=n+s++},i.prototype=new e,i.prototype.init=function(e){return this.form=e,this.$el=t(e),this.on("change",this.bind(this.handleChange)),this.validate(),this},i.prototype.handleChange=function(){this.validate()},i.prototype.validate=function(){var e,i,n=this.$el.data("formactions");for(this.formdata=t(this.form).serializeArray(),e=0;e<n.length;e++)i=n[e],this.isValid(i["if"])?this.exec(i.then):this.exec(i["else"])},i.prototype.isValid=function(t){for(var e=0;e<t.length;e++)if(!this.ifIsValid(t[e]))return!1;return!0},i.prototype.ifIsValid=function(t){var e=this.form[t.field];for(var i in t)if("field"!==i)if("value"===i){if(!this.isFieldValue(t.field,t[i]))return!1}else if(e[i]!=t[i])return!1;return!0},i.prototype.isFieldValue=function(t,e){for(var i=0;i<this.formdata.length;i++)if(this.formdata[i].name===t&&this.formdata[i].value===e)return!0;return!1},i.prototype.exec=function(t){if(t)for(var e=0;e<t.length;e++)for(var i in t[e])this.execSingle(i,t[e][i])},i.prototype.execSingle=function(e,i){switch(e){case"show":t(i).slideDown(200).find("input,select,textarea").prop("disabled",!1);break;case"hide":t(i).slideUp(200).find("input,select,textarea").prop("disabled",!0)}},i}),define("app/modules/forms/rangePicker",["jquery","app/modules/BaseModule"],function(t,e){var i,n=".ch.hv.rangepicker",s=0;return i=function(){this.$el=null,this.ns=n+s++,this.TOUCH="undefined"!=typeof Modernizr&&Modernizr.touch?!0:!1},i.prototype=new e,i.prototype.init=function(e){return this.$el=t(e),this.$handle1=this.$el.find(".js-range-handle:first"),this.$handle1Tooltip=this.$handle1.find(".handle__tooltip"),this.$handle1TooltipText=this.$handle1Tooltip.find(".handle__tooltip__text .value"),this.$handle2=this.$el.find(".js-range-handle:last"),this.$handle2Tooltip=this.$handle2.find(".handle__tooltip"),this.$handle2TooltipText=this.$handle2Tooltip.find(".handle__tooltip__text .value"),this.halfHandleWidth=this.$handle1.outerWidth()/2,this.elOuterWidth=this.$el.outerWidth(),this.$rangeSelection=this.$el.find(".js-range-selection"),this.min=this.$el.data("range-min"),this.max=this.$el.data("range-max"),this.$val1Input=this.$handle1.find("input"),this.val1=isNaN(this.$val1Input.val())?this.min:this.$val1Input.val(),this.$val2Input=this.$handle2.find("input"),this.val2=isNaN(this.$val2Input.val())?this.min:this.$val2Input.val(),this.step=this.$el.data("range-step")||1,this.jumpToStep=this.$el.data("range-jump"),this.changeHandle1Pos(this.calculatePositionFromValue(this.val1)),this.changeHandle2Pos(this.calculatePositionFromValue(this.val2)),this.$dividers=this.$el.find(".js-range__divider"),this.positionDividers(),this.TOUCH?(this.on("touchstart",".js-range-handle",this.bind(this.mousedown)),this.on("touchstart",".js-range-bar",this.bind(this.mousedown)),this.on("touchstart",".js-range-selection",this.bind(this.mousedown))):(this.on("mousedown",".js-range-handle",this.bind(this.mousedown)),this.on("mousedown",".js-range-bar",this.bind(this.mousedown)),this.on("mousedown",".js-range-selection",this.bind(this.mousedown))),t(window).on("resize"+this.ns,this.bind(this.resize)),this},i.prototype.resize=function(){var t=this.elOuterWidth;this.elOuterWidth=this.$el.outerWidth(),this.elOffsetLeft=this.$el.offset().left,this.elOffsetRight=this.elOffsetLeft+this.elOuterWidth,this.changeHandle1Pos(this.handle1PosX/t*this.elOuterWidth),this.changeHandle2Pos(this.handle2PosX/t*this.elOuterWidth),this.positionDividers()},i.prototype.click=function(t){function e(t,e){return Math.abs(t-e)}this.elOffsetLeft=this.$el.offset().left;var i=t.pageX-this.elOffsetLeft,n=this.$handle1.offset().left+this.halfHandleWidth-this.elOffsetLeft,s=this.$handle2.offset().left+this.halfHandleWidth-this.elOffsetLeft;return 0>i?i=0:i>this.elOuterWidth&&(i=this.elOuterWidth),e(n,i)<e(s,i)?(this.changeHandle1Pos(i),this.$handle1):(this.changeHandle2Pos(i),this.$handle2)},i.prototype.mousedown=function(e){e.preventDefault(),this.TOUCH&&"touchstart"===e.type&&(e=e.originalEvent.touches[0]),this.elOffsetLeft=this.$el.offset().left,this.elOffsetRight=this.elOffsetLeft+this.elOuterWidth;var i=this.$el.find(e.target);return $draggingElement=i.is(this.$handle1)||i.is(this.$handle2)?i:this.click(e),this.TOUCH?(t(document).on("touchmove"+this.ns,this.bind(this.mousemove)),t(document).on("touchend"+this.ns,this.bind(this.mouseup))):(t(document).on("mousemove"+this.ns,this.bind(this.mousemove)),t(document).on("mouseup"+this.ns,this.bind(this.mouseup))),!1},i.prototype.mousemove=function(t){t.preventDefault(),this.TOUCH&&"touchmove"===t.type&&(t=t.originalEvent.touches[0]);var e=t.pageX,i=e-this.elOffsetLeft;return 0>i?i=0:i>this.elOuterWidth&&(i=this.elOuterWidth),$draggingElement.is(this.$handle1)?i<=this.handle2PosX&&this.changeHandle1Pos(i):i>=this.handle1PosX&&this.changeHandle2Pos(i),!1},i.prototype.mouseup=function(){return $draggingElement=null,this.TOUCH?(t(document).off("touchmove"+this.ns),t(document).off("touchend"+this.ns)):(t(document).off("mousemove"+this.ns),t(document).off("mouseup"+this.ns)),!1},i.prototype.render=function(){return this.translate2d(this.$handle1,this.handle1PosX-this.halfHandleWidth),this.translate2d(this.$handle2,this.handle2PosX-this.halfHandleWidth),this.handle1PosX<this.handle2PosX?Modernizr.csstransforms?this.$rangeSelection.css({transform:"translate("+this.handle1PosX+"px,0)",width:this.handle2PosX-this.handle1PosX}):this.$rangeSelection.css({left:this.handle1PosX,width:this.handle2PosX-this.handle1PosX}):Modernizr.csstransforms?this.$rangeSelection.css({transform:"translate("+this.handle2PosX+"px,0)",width:this.handle1PosX-this.handle2PosX}):this.$rangeSelection.css({left:this.handle2PosX,width:this.handle1PosX-this.handle2PosX}),!1},i.prototype.calculateValue=function(t){return Math.round((t*((this.max-this.min)/this.elOuterWidth)+this.min)/this.step)*this.step},i.prototype.calculatePositionFromValue=function(t){var e=this.elOuterWidth/(this.max-this.min);return e*t-this.min*e},i.prototype.translate2d=function(t,e){Modernizr.csstransforms?t.css({transform:"translate("+Math.round(e)+"px, 0)"}):t.css({left:Math.round(e)})},i.prototype.positionDividers=function(){var e=this,i=0;this.$dividers.length>0&&(i=this.$dividers.first().width()),this.$dividers.each(function(){var n=t(this).data("val"),s=e.calculatePositionFromValue(n);0===s?s=1:s==e.elOuterWidth?s=e.elOuterWidth-(i+1):s-=i/2,t(this).css("left",s)})},i.prototype.changeHandle1Pos=function(t){var e=this.calculateValue(t),i=this.$val1Input.val();return this.positionTooltip(this.$handle1Tooltip),this.handle1PosX=this.jumpToStep?this.calculatePositionFromValue(e):t,this.render(),this.$handle1TooltipText.text(e),e==i?!1:(this.val1=e,this.$val1Input.val(e),this.$val1Input.change(),this.triggerDataChange(),!1)},i.prototype.changeHandle2Pos=function(t){var e=this.calculateValue(t),i=this.$val2Input.val();return this.positionTooltip(this.$handle2Tooltip),this.handle2PosX=this.jumpToStep?this.calculatePositionFromValue(e):t,this.render(),this.$handle2TooltipText.text(e),e==i?!1:(this.val2=e,this.$val2Input.val(e),this.$val2Input.change(),this.triggerDataChange(),!1)},i.prototype.positionTooltip=function(t){t.css({left:-(t.outerWidth()/2)+this.$handle1.width()/2});var e=this.$handle1Tooltip.offset().left,i=e+this.$handle1Tooltip.outerWidth(),n=this.$handle2Tooltip.offset().left,s=n+this.$handle2Tooltip.outerWidth(),o=Math.abs(i-n);this.handle1PosX!==this.handle2PosX||0!==this.handle1PosX&&this.handle2PosX!==this.elOuterWidth?i>=n&&this.handle1PosX<=this.handle2PosX?(this.$handle1Tooltip.find(".handle__tooltip__inner").css({left:Math.floor(-(o/2))}),this.$handle2Tooltip.find(".handle__tooltip__inner").css({left:Math.floor(+(o/2))})):s>e&&this.handle1PosX>this.handle2PosX?(o=Math.abs(e-s),this.$handle1Tooltip.find(".handle__tooltip__inner").css({left:Math.floor(+(o/2))}),this.$handle2Tooltip.find(".handle__tooltip__inner").css({left:Math.floor(-(o/2))})):(this.$handle1Tooltip.find(".handle__tooltip__inner").css({left:0}),this.$handle2Tooltip.find(".handle__tooltip__inner").css({left:0})):(this.$handle1Tooltip.find(".handle__tooltip__inner").css({left:0}),this.$handle2Tooltip.find(".handle__tooltip__inner").css({left:0}))},i.prototype.triggerDataChange=function(){this.$el.trigger({type:"rangepicker-data-change",values:[this.val1,this.val2]})},i}),function(t,e){"object"==typeof exports?module.exports=e():"function"==typeof define&&define.amd?define("vendor/pikaday",e):t.Pikaday=e()}(this,function(){var t=function(){function t(){}var e=t.prototype;return e.on=function(t,e){if(t&&e){var i=this._events=this._events||{},n=i[t]=i[t]||[];return-1==n.indexOf(e)&&n.push(e),this}},e.once=function(t,e){if(t&&e){this.on(t,e);var i=this._onceEvents=this._onceEvents||{},n=i[t]=i[t]||{};return n[e]=!0,this}},e.off=function(t,e){if("undefined"==typeof t)return delete this._events,delete this._onceEvents,void 0;var i=this._events&&this._events[t];if(i&&i.length){var n=i.indexOf(e);return-1!=n&&i.splice(n,1),this}},e.emitEvent=function(t,e){var i=this._events&&this._events[t];if(i&&i.length){var n=0,s=i[n];e=e||[];for(var o=this._onceEvents&&this._onceEvents[t];s;){var a=o&&o[s];a&&(this.off(t,s),delete o[s]),s.apply(this,e),n+=a?0:1,s=i[n]}return this}},t}(),e=function(){},i=!!window.addEventListener,n=window.document,s=window.setTimeout,o=function(t){return window.requestAnimationFrame?window.requestAnimationFrame(t):setTimeout(t,1)},a=function(t){return window.requestAnimationFrame?window.cancelAnimationFrame(t):clearTimeout(t)},r=function(t,e,n,s){i?t.addEventListener(e,n,!!s):t.attachEvent("on"+e,n)},l=function(t,e,n,s){i?t.removeEventListener(e,n,!!s):t.detachEvent("on"+e,n)},h=function(t,e,i){var s;n.createEvent?(s=n.createEvent("HTMLEvents"),s.initEvent(e,!0,!1),s=k(s,i),t.dispatchEvent(s)):n.createEventObject&&(s=n.createEventObject(),s=k(s,i),t.fireEvent("on"+e,s))},u=function(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")},d=function(t,e){return-1!==(" "+t.className+" ").indexOf(" "+e+" ")},c=function(t,e){d(t,e)||(t.className=""===t.className?e:t.className+" "+e)},p=function(t,e){t.className=u((" "+t.className+" ").replace(" "+e+" "," "))},f=function(t){return/Array/.test(Object.prototype.toString.call(t))},m=function(t){return/Date/.test(Object.prototype.toString.call(t))&&!isNaN(t.getTime())},g=function(t){var e=t.getDay();return 0===e||6===e},v=function(t){return 0===t%4&&0!==t%100||0===t%400},y=function(t,e){return[31,v(t)?29:28,31,30,31,30,31,31,30,31,30,31][e]},b=function(t){m(t)&&t.setHours(0,0,0,0)},w=function(t,e){return t==e?!0:t&&e?t.getTime()===e.getTime():!1},$=function(t){var e=t.getFullYear(),i=String(t.getMonth()+1),n=String(t.getDate());return e+"-"+(1==i.length?"0":"")+i+"-"+(1==n.length?"0":"")+n},k=function(t,e,i){var n,s;for(n in e)s=void 0!==t[n],s&&"object"==typeof e[n]&&null!==e[n]&&void 0===e[n].nodeName?m(e[n])?i&&(t[n]=new Date(e[n].getTime())):f(e[n])?i&&(t[n]=e[n].slice(0)):t[n]=k({},e[n],i):(i||!s)&&(t[n]=e[n]);return t},_=function(t){return t.month<0&&(t.year-=Math.ceil(Math.abs(t.month)/12),t.month+=12),t.month>11&&(t.year+=Math.floor(Math.abs(t.month)/12),t.month-=12),t},C=function(t,e){for(;e;){if(t===e)return!0;e=e.parentNode}return!1},x={autoInit:!0,field:null,trigger:null,bound:void 0,positionTarget:null,position:"bottom left",reposition:!0,formatFn:function(t){return $(t)},parseFn:function(t){return new Date(Date.parse(t))},defaultDate:null,setDefaultDate:!1,firstDay:0,disableDayFn:null,labelFn:function(t){if(!this.dateFormatter)try{this.dateFormatter=window.Intl.DateTimeFormat(this._options.i18n.language,{year:"numeric",month:"long",day:"numeric"})}catch(e){this.dateFormatter={format:function(t){return t.toDateString()}}}var i=this.dateFormatter.format(t.date),n=this._options.i18n.weekdays[t.date.getDay()],s=n+", "+i;return t.isToday&&(s+=" ("+this._options.i18n.today+")"),t.isDisabled&&(s="("+this._options.i18n.disabled+") "+s),s},dayFn:function(t){return t},renderFn:function(){return{}},minDate:null,maxDate:null,yearRange:10,showWeekNumber:!1,minYear:0,maxYear:9999,minMonth:void 0,maxMonth:void 0,startRange:null,endRange:null,isRTL:!1,yearSuffix:"",showMonthAfterYear:!1,showDaysInNextAndPreviousMonths:!1,numberOfMonths:1,mainCalendar:"left",container:void 0,i18n:{language:n.querySelector("html").getAttribute("lang")||void 0,today:"Today",disabled:"Disabled",help:"Use arrow keys to choose a date.",previousMonth:"Previous Month",nextMonth:"Next Month",months:["January","February","March","April","May","June","July","August","September","October","November","December"],weekdays:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],weekdaysShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"]},theme:null,onSelect:null,onOpen:null,onClose:null,onDraw:null},T=function(t,e,i){for(e+=t.firstDay;e>=7;)e-=7;return i?t.i18n.weekdaysShort[e]:t.i18n.weekdays[e]},D=function(t){var e=[],i="false",n=t.label||"",s=t.tabindex;if(t.isEmpty){if(!t.showDaysInNextAndPreviousMonths)return'<td class="is-empty"></td>';e.push("is-outside-current-month")}t.isDisabled&&e.push("is-disabled"),t.isToday&&e.push("is-today"),t.isSelected&&(e.push("is-selected"),i="true"),t.isInRange&&e.push("is-inrange"),t.isStartRange&&e.push("is-startrange"),t.isEndRange&&e.push("is-endrange"),t.classes&&e.push(t.classes);var o,a,r="";o={"class":e.join(" "),"data-day":t.day};for(a in t.td)o[a]=t.td[a];r+="<td";for(a in o)r+=" "+a+'="'+o[a]+'"';r+=">",o={"class":"pika-button pika-day",type:"button","data-pika-year":t.year,"data-pika-month":t.month,"data-pika-day":t.day,"aria-selected":i,"aria-label":n,tabindex:s};for(a in t.button)o[a]=t.button[a];r+="<button";for(a in o)r+=" "+a+'="'+o[a]+'"';return r+=">"+t.text+"</button>",r+="</td>"},S=function(t,e,i){var n=new Date(i,0,1),s=Math.ceil(((new Date(i,e,t)-n)/864e5+n.getDay()+1)/7);return'<td class="pika-week">'+s+"</td>"},j=function(t,e){return"<tr>"+(e?t.reverse():t).join("")+"</tr>"},M=function(t){return"<tbody>"+t.join("")+"</tbody>"},P=function(t){var e,i=[];for(t.showWeekNumber&&i.push("<th></th>"),e=0;7>e;e++)i.push('<th scope="col"><abbr title="'+T(t,e)+'">'+T(t,e,!0)+"</abbr></th>");return'<thead aria-hidden="true"><tr>'+(t.isRTL?i.reverse():i).join("")+"</tr></thead>"},L=function(t,e,i,n,s,o){var a,r,l,h,u,d=t._options,c=i===d.minYear,p=i===d.maxYear,m='<div class="pika-title" aria-hidden="true">',g=!0,v=!0;for(l=[],a=0;12>a;a++)l.push('<option value="'+(i===s?a-e:12+a-e)+'"'+(a===n?' selected="selected"':"")+(c&&a<d.minMonth||p&&a>d.maxMonth?'disabled="disabled"':"")+">"+d.i18n.months[a]+"</option>");for(h='<div class="pika-label">'+d.i18n.months[n]+'<select class="pika-select pika-select-month" tabindex="-1">'+l.join("")+"</select></div>",f(d.yearRange)?(a=d.yearRange[0],r=d.yearRange[1]+1):(a=i-d.yearRange,r=1+i+d.yearRange),l=[];r>a&&a<=d.maxYear;a++)a>=d.minYear&&l.push('<option value="'+a+'"'+(a===i?' selected="selected"':"")+">"+a+"</option>");return u='<div class="pika-label">'+i+d.yearSuffix+'<select class="pika-select pika-select-year" tabindex="-1">'+l.join("")+"</select></div>",m+=d.showMonthAfterYear?u+h:h+u,c&&(0===n||d.minMonth>=n)&&(g=!1),p&&(11===n||d.maxMonth<=n)&&(v=!1),0===e&&(m+='<button class="pika-prev'+(g?"":" is-disabled")+'" '+(g?"":"disabled ")+'type="button" aria-labelledby="'+o+'" tabindex="-1">'+d.i18n.previousMonth+"</button>"),e===t._options.numberOfMonths-1&&(m+='<button class="pika-next'+(v?"":" is-disabled")+'" '+(v?"":"disabled ")+'type="button" aria-labelledby="'+o+'" tabindex="-1">'+d.i18n.nextMonth+"</button>"),m+="</div>"},E=function(t,e){return'<table cellpadding="0" cellspacing="0" class="pika-table" role="presentation">'+P(t)+M(e)+"</table>"},O=function(t){var s=this,a=s.config(t);s.defaults=x,Object.defineProperty(this,"_d",{get:function(){return s._date},set:function(t){s._date=t}}),Object.defineProperty(this,"_o",{get:function(){return s._options},set:function(t){s._options=t}}),s._onClick=function(t){if(s._visible){t=t||window.event;var i=t.target||t.srcElement;if(i)if(t.stopPropagation(),d(i,"is-disabled")||(!d(i,"pika-button")||d(i,"is-empty")||d(i.parentNode,"is-disabled")?d(i,"pika-prev")?s.prevMonth():d(i,"pika-next")&&s.nextMonth():(a.bound&&(this._visible&&e("Hiding soon because date has been selected and picker is bound."),s.hideAfter(200)),s.setDate(new Date(i.getAttribute("data-pika-year"),i.getAttribute("data-pika-month"),i.getAttribute("data-pika-day"))))),d(i,"pika-select"))s._clickedPikaSelect=!0;else{if(!t.preventDefault)return t.returnValue=!1,!1;t.preventDefault()}}},s._onChange=function(t){t=t||window.event;var e=t.target||t.srcElement;e&&(d(e,"pika-select-month")?s.gotoMonth(e.value):d(e,"pika-select-year")&&s.gotoYear(e.value))},s._onKeyChange=function(t){function i(){s.hasKey=!0,s.focusInside=!0,n()}function n(){t.preventDefault(),t.stopPropagation()}if(t=t||window.event,s.isVisible())switch(t.keyCode){case 9:s.hasKey&&s._options.trigger&&s._options.bound&&(s._options.trigger.focus(),s.hasKey=!1);break;case 32:case 13:if(s.hasKey&&a.bound){if(n(),s._options.trigger){s._options.trigger.focus();try{s._options.trigger.select()}catch(t){}}s.emitEvent("select",[s.getDate()]),e("Hiding because enter or space pressed"),s.hide()}else s.emitEvent("select",[s.getDate()]);break;case 27:a.bound&&(n(),e("Cancel because escape pressed"),s.cancel());break;case 37:i(),s.adjustDate(-1);break;case 38:i(),s.adjustDate(-7);break;case 39:i(),s.adjustDate(1);break;case 40:i(),s.adjustDate(7);break;case 33:i(),s.adjustMonth(-1);break;case 34:i(),s.adjustMonth(1);break;case 35:i(),s.adjustYear(1);break;case 36:i(),s.adjustYear(-1)}},s._onInputChange=function(t){var e;t.firedBy!==s&&(e=a.parseFn.call(s,a.field.value),m(e)?s.setDate(e,!0):s.setDate(null,!0))},s._onTouch=function(t){s.isVisible()&&t.target===a.field||(s.touched=!0)},s._onInputFocus=function(t){s.touched&&a.field&&"INPUT"===a.field.nodeName&&(s.touched=!1,s.focusInside=!0,a.field.blur()),e("Showing because input was focused",t.target),s.show()},s._onInputClick=function(t){s.touched&&s._options.trigger.focus(),s.touched=!1,e("Showing because input was clicked",t.target),s.show()},s._onInputBlur=function(t){s.hasKey||s.focusInside||o(function(){var i=n.activeElement;do if(d(i,"pika-single")||i==s.el)return;while(i=i.parentNode);s._clickedPikaSelect||(s._visible&&e("Hiding soon because input was blured",t.target,s._b),s.hide(!0)),s._clickedPikaSelect=!1})},s._onDocumentClick=function(t){t=t||window.event;var n=t.target||t.srcElement,o=n;if(n){var l=new Date-s.timeShowed;if(!(200>l||C(s.el,n))){!i&&d(n,"pika-select")&&(n.onchange||(n.setAttribute("onchange","return;"),r(n,"change",s._onChange)));do if(d(o,"pika-single")||o===a.trigger)return;while(o=o.parentNode);s._visible&&n!==a.trigger&&o!==a.trigger&&(e("Hiding because of document click"),s.hide(!0))}}},s.init=function(){this._visible=!1,s.el=n.createElement("div"),s.el.className="pika-single"+(a.isRTL?" is-rtl":"")+(a.theme?" "+a.theme:""),s.el.setAttribute("role","application"),s.el.setAttribute("aria-label",s.getLabel()),s.speakEl=n.createElement("div"),s.speakEl.setAttribute("role","status"),s.speakEl.setAttribute("aria-live","assertive"),s.speakEl.setAttribute("aria-atomic","true"),s.speakEl.setAttribute("style","position: absolute; left: -9999px; opacity: 0;"),r(s.el,"mousedown",s._onClick,!0),r(s.el,"touchend",s._onClick,!0),r(s.el,"change",s._onChange),r(s.el,"keydown",s._onKeyChange),a.field&&(r(a.field,"change",s._onInputChange),a.defaultDate||(a.defaultDate=a.parseFn.call(s,a.field.value),a.setDefaultDate=!0));var t=a.defaultDate;m(t)?a.setDefaultDate?s.setDate(t,!0):s.gotoDate(t):(t=new Date,a.minDate&&a.minDate>t?t=a.minDate:a.maxDate&&a.maxDate<t&&(t=a.maxDate),s.gotoDate(t)),a.bound?(e("Hiding initially"),this.hide(),s.el.className+=" is-bound",r(a.trigger,"click",s._onInputClick),r(n,"touchstart",s._onTouch),r(a.trigger,"focus",s._onInputFocus),r(a.trigger,"blur",s._onInputBlur),r(a.trigger,"keydown",s._onKeyChange)):(e("Showing initially"),this.show()),this.emitEvent("init")},a.autoInit&&this.init()};O.util={addClass:c,addEvent:r,adjustCalendar:_,areDatesEqual:w,containsElement:C,defaults:x,extend:k,fireEvent:h,getDaysInMonth:y,hasClass:d,isArray:f,isDate:m,isLeapYear:v,isWeekend:g,log:e,removeClass:p,removeEvent:l,setToStartOfDay:b,toISODateString:$,trim:u},O.EvEmitter=t;var I=new Date;b(I),O.prototype={config:function(t){this._options||(this._options=k({},x,!0));var e=k(this._options,t,!0);e.isRTL=!!e.isRTL,e.field=e.field&&e.field.nodeName?e.field:null,e.theme="string"==typeof e.theme&&e.theme?e.theme:null,e.bound=!!(void 0!==e.bound?e.field&&e.bound:e.field),e.trigger=e.trigger&&e.trigger.nodeName?e.trigger:e.field,e.disableWeekends=!!e.disableWeekends,e.disableDayFn="function"==typeof e.disableDayFn?e.disableDayFn:null,e.labelFn="function"==typeof e.labelFn?e.labelFn:null;var i=parseInt(e.numberOfMonths,10)||1;if(e.numberOfMonths=i>4?4:i,e.minDate=e.parseFn.call(self,e.minDate),e.maxDate=e.parseFn.call(self,e.maxDate),m(e.minDate)||(e.minDate=!1),m(e.maxDate)||(e.maxDate=!1),e.minDate&&e.maxDate&&e.maxDate<e.minDate&&(e.maxDate=e.minDate=!1),e.minDate&&this.setMinDate(e.minDate),e.maxDate&&this.setMaxDate(e.maxDate),f(e.yearRange)){var n=(new Date).getFullYear()-10;e.yearRange[0]=parseInt(e.yearRange[0],10)||n,e.yearRange[1]=parseInt(e.yearRange[1],10)||n}else e.yearRange=Math.abs(parseInt(e.yearRange,10))||x.yearRange,e.yearRange>100&&(e.yearRange=100);var s=/^on([A-Z]\w+)$/;return Object.keys(e).forEach(function(t){var i=t.match(s);if(i){var n=i[1].toLowerCase();this.on(n,e[t]),delete e[t]}}.bind(this)),e},toString:function(){return m(this._date)?"function"==typeof this._options.formatFn?this._options.formatFn.call(this,this._date):this._date.toDateString():""},getDate:function(){return m(this._date)?new Date(this._date.getTime()):new Date},getSelectedDate:function(){return m(this._date)?new Date(this._date.getTime()):null},getVisibleDate:function(){return new Date(this.calendars[0].year,this.calendars[0].month,1)},setDate:function(t,e){if(!t)return this._date=null,this._options.field&&(this._options.field.value="",h(this._options.field,"change",{firedBy:this})),this.emitEvent("change",[this._date]),this.draw();if("string"==typeof t&&(t=new Date(Date.parse(t))),m(t)){b(t);var i=this._options.minDate,n=this._options.maxDate;m(i)&&i>t?t=i:m(n)&&t>n&&(t=n),w(this._date,t)||(this._date=new Date(t.getTime()),b(this._date),this.gotoDate(this._date),this._options.field&&(this._options.field.value=this.toString(),h(this._options.field,"change",{firedBy:this})),e||this.emitEvent("select",[this.getDate()]),this.emitEvent("change",[this._date]))}},selectDate:function(t,e){this.setDate(t,e),this._date&&this.speak(this.getDayConfig(this._date).label)},getLabel:function(){var t="",e=this._options;return e.field&&e.field.id&&(t=n.querySelector('label[for="'+e.field.id+'"]'),t=t?t.textContent||t.innerText:""),!t&&e.trigger&&(t=e.trigger.textContent||e.trigger.innerText),t+=" ("+e.i18n.help+")"},speak:function(t){this.speak.innerHTML="",this.speakEl.innerHTML=t},gotoDate:function(t){var e=!0;if(m(t)){if(this.calendars){var i=new Date(this.calendars[0].year,this.calendars[0].month,1),n=new Date(this.calendars[this.calendars.length-1].year,this.calendars[this.calendars.length-1].month,1),s=t.getTime();n.setMonth(n.getMonth()+1),n.setDate(n.getDate()-1),e=s<i.getTime()||n.getTime()<s}e&&(this.calendars=[{month:t.getMonth(),year:t.getFullYear()}],"right"===this._options.mainCalendar&&(this.calendars[0].month+=1-this._options.numberOfMonths)),this.adjustCalendars()}},adjustDate:function(t){var e=this.getDate(),i=parseInt(t),n=new Date(e.valueOf());n.setDate(n.getDate()+i),this.selectDate(n,!0)},adjustCalendars:function(){this.calendars[0]=_(this.calendars[0]);for(var t=1;t<this._options.numberOfMonths;t++)this.calendars[t]=_({month:this.calendars[0].month+t,year:this.calendars[0].year});this.draw()},gotoToday:function(){this.gotoDate(new Date)},gotoMonth:function(t){isNaN(t)||(this.calendars[0].month=parseInt(t,10),this.adjustCalendars())},nextMonth:function(){this.calendars[0].month++,this.adjustCalendars()},prevMonth:function(){this.calendars[0].month--,this.adjustCalendars()},gotoYear:function(t){isNaN(t)||(this.calendars[0].year=parseInt(t,10),this.adjustCalendars())},setMinDate:function(t){var e=this._options.parseFn.call(self,t);m(e)?(b(e),this._options.minDate=e,this._options.minYear=e.getFullYear(),this._options.minMonth=e.getMonth()):(this._options.minDate=x.minDate,this._options.minYear=x.minYear,this._options.minMonth=x.minMonth),this.draw()},setMaxDate:function(t){var e=this._options.parseFn.call(self,t);m(e)?(b(e),this._options.maxDate=e,this._options.maxYear=e.getFullYear(),this._options.maxMonth=e.getMonth()):(this._options.maxDate=x.maxDate,this._options.maxYear=x.maxYear,this._options.maxMonth=x.maxMonth),this.draw()},setStartRange:function(t){w(this._options.startRange,t)||(this._options.startRange=t,this.draw(),this.emitEvent("startrange",[this._options.startRange]))},setEndRange:function(t){w(this._options.endRange,t)||(this._options.endRange=t,this.draw(),this.emitEvent("endrange",[this._options.endRange]))},getStartRange:function(){return this._options.startRange},getEndRange:function(){return this._options.endRange},_request:function(t){var e=this;this.requested||(this.requested={request:o(function(){e.requested.draw&&e._draw(),e.requested.adjustPosition&&e._adjustPosition(),e.focusPicker(),e.requested=null})}),this.requested[t]=!0},draw:function(t){this._visible&&(t?this._draw(t):this._request("draw"))},_draw:function(t){if(this._visible||t){var e,i=this._options,n=i.minYear,s=i.maxYear,o=i.minMonth,a=i.maxMonth,r="";this._y<=n&&(this._y=n,!isNaN(o)&&this._m<o&&(this._m=o)),this._y>=s&&(this._y=s,!isNaN(a)&&this._m>a&&(this._m=a)),e="pika-title-"+Math.random().toString(36).replace(/[^a-z]+/g,"").substr(0,2);var l=this.getLabel();this._options.field&&this._options.trigger==this._options.field&&i.bound&&this._options.field.setAttribute("aria-label",l);for(var h=0;h<i.numberOfMonths;h++)r+='<div class="pika-lendar">'+L(this,h,this.calendars[h].year,this.calendars[h].month,this.calendars[0].year,e)+this.render(this.calendars[h].year,this.calendars[h].month,e)+"</div>";this.el.innerHTML=r;var u=this.el.querySelector("td.is-selected > .pika-button");u||(u=this.el.querySelector("td.is-startrange > .pika-button")),u||(u=this.el.querySelector("td.is-today > .pika-button")),u||(u=this.el.querySelector("td:not(.is-disabled) > .pika-button")),u||(u=this.el.querySelector(".pika-button")),u.setAttribute("tabindex","0"),this.emitEvent("draw")}},focusPicker:function(t){var e=this,i=this._options;if(this.focusInside||t){try{e.el.querySelector('.pika-button[tabindex="0"]').focus()}catch(n){}i.bound&&"hidden"!==i.field.type&&s(function(){e.el.querySelector('.pika-button[tabindex="0"]').focus()},1),this.focusInside=!1}},adjustPosition:function(){this._request("adjustPosition")},_adjustPosition:function(){var t,e,i,s,o,a,r,l,h,u;if(!this._options.container){if(this.el.style.position="absolute",t=this._options.positionTarget||this._options.trigger,e=t,i=this.el.offsetWidth,s=this.el.offsetHeight,o=window.innerWidth||n.documentElement.clientWidth,a=window.innerHeight||n.documentElement.clientHeight,r=window.pageYOffset||n.body.scrollTop||n.documentElement.scrollTop,"function"==typeof t.getBoundingClientRect)u=t.getBoundingClientRect(),l=u.left+window.pageXOffset,h=u.bottom+window.pageYOffset;else for(l=e.offsetLeft,h=e.offsetTop+e.offsetHeight;e=e.offsetParent;)l+=e.offsetLeft,h+=e.offsetTop;var d=0;if(this._options.position.indexOf("right")>-1?d=1:this._options.position.indexOf("center")>-1&&(d=.5),l-=(i-t.offsetWidth)*d,this._options.reposition){var c={right:Math.max(0,l+i-(o-20)),left:Math.max(0,20-l),top:Math.max(0,-h)};l+=c.left-c.right,h+=c.top}this.el.style.left=l+"px",this.el.style.top=h+"px"}},getDayConfig:function(t){var e=this._options,i=m(this._date)?w(t,this._date):!1,n=w(t,I),s=t.getDate(),o=t.getMonth(),a=t.getFullYear(),r=e.startRange&&w(e.startRange,t),l=e.endRange&&w(e.endRange,t),h=e.startRange&&e.endRange&&e.startRange<t&&t<e.endRange,u=e.minDate&&t<e.minDate||e.maxDate&&t>e.maxDate||e.disableWeekends&&g(t)||e.disableDayFn&&e.disableDayFn.call(this,t),d={date:t,day:s,month:o,year:a,isSelected:i,isToday:n,isDisabled:u,isStartRange:r,isEndRange:l,isInRange:h,showDaysInNextAndPreviousMonths:e.showDaysInNextAndPreviousMonths,td:{},button:{}};
return d.text=s,d.label=e.labelFn.call(this,d),e.dayFn&&(d=e.dayFn.call(this,d)||d),d},render:function(t,e,i){var n=this._options,s=y(t,e),o=new Date(t,e,1).getDay(),a=[],r=[];I=new Date,b(I),n.firstDay>0&&(o-=n.firstDay,0>o&&(o+=7));var l=0===e?11:e-1,h=0===e?t-1:t;y(h,l);for(var u=s+o,d=u,c=-1;d>7;)d-=7;u+=7-d,c=this._date&&new Date(t,e,1)<=this._date&&new Date(t,e+1,1)>this._date?this._date:new Date(t,e,1)<=I&&new Date(t,e+1,1)>I?I:new Date(t,e,1);for(var p=0,f=0;u>p;p++){var m=new Date(t,e,1+(p-o)),g=this.getDayConfig(m);g.isEmpty=o>p||p>=s+o,g.tabindex="-1",r.push(D(g)),7===++f&&(n.showWeekNumber&&r.unshift(S(p-o,e,t)),a.push(j(r,n.isRTL)),r=[],f=0)}return E(n,a,i)},isValid:function(){return m(this._date)?m(this._options.minDate)&&this._date<this._options.minDate?!1:m(this._options.maxDate)&&this._date>this._options.maxDate?!1:!0:0},isVisible:function(){return this._visible},show:function(){var t=this._options;clearTimeout(this.hideTimeout),this._date&&this.gotoDate(this._date),n.body.appendChild(this.speakEl),t.container?t.container.appendChild(this.el):t.bound?n.body.appendChild(this.el):t.field&&t.field.parentNode.insertBefore(this.el,t.field.nextSibling),this.isVisible()||(p(this.el,"is-hidden"),this._visible=!0,this.draw(),this._options.bound&&(this.timeShowed=new Date,r(n,"click",this._onDocumentClick),this.adjustPosition()),this._options.field&&(c(this._options.field,"is-visible-pikaday"),this.recentValue=this._options.field.value),this.emitEvent("open"),this._options.field&&this._options.field!=this._options.trigger&&this.speak(this.getLabel()))},cancel:function(){var t=this._options.field;t&&(t.value=this.recentValue);try{t.select()}catch(i){}e("Hiding because cancelled"),this.hide(!0)},hideAfter:function(t,i){var n=this;clearTimeout(this.hideTimeout),this._visible!==!1&&(e("Will hide after "+t+"ms."),this.hideTimeout=s(function(){n.hide(i)},t))},hide:function(){var t=this._visible;t!==!1&&(clearTimeout(this.hideTimeout),this.requested&&(a(this.requested.request),this.requested=null),this.hasKey=!1,this._options.bound&&l(n,"click",this._onDocumentClick),this._options.field&&p(this._options.field,"is-visible-pikaday"),this._options.bound&&this.el.parentNode&&this.el.parentNode.removeChild(this.el),this._visible=!1,this.emitEvent("close"),this.speakEl.parentNode&&n.body.removeChild(this.speakEl))},destroy:function(){this.hide(),l(this.el,"mousedown",this._onClick,!0),l(this.el,"touchend",this._onClick,!0),l(this.el,"change",this._onChange),l(this.el,"keydown",this._onKeyChange),this._options.field&&(l(this._options.field,"change",this._onInputChange),this._options.bound&&(l(this._options.trigger,"click",this._onInputClick),l(n,"touchstart",this._onTouch),l(this._options.trigger,"focus",this._onInputFocus),l(this._options.trigger,"blur",this._onInputBlur),l(this._options.trigger,"keydown",this._onKeyChange))),this.emitEvent("destroy"),this.off()}};for(var A in t.prototype)O.prototype[A]=t.prototype[A];return O}),function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define("vendor/moment",e):t.moment=e()}(this,function(){function t(){return ms.apply(null,arguments)}function e(t){ms=t}function i(t){return t instanceof Array||"[object Array]"===Object.prototype.toString.call(t)}function n(t){return null!=t&&"[object Object]"===Object.prototype.toString.call(t)}function s(t){var e;for(e in t)return!1;return!0}function o(t){return"number"==typeof t||"[object Number]"===Object.prototype.toString.call(t)}function a(t){return t instanceof Date||"[object Date]"===Object.prototype.toString.call(t)}function r(t,e){var i,n=[];for(i=0;i<t.length;++i)n.push(e(t[i],i));return n}function l(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function h(t,e){for(var i in e)l(e,i)&&(t[i]=e[i]);return l(e,"toString")&&(t.toString=e.toString),l(e,"valueOf")&&(t.valueOf=e.valueOf),t}function u(t,e,i,n){return vi(t,e,i,n,!0).utc()}function d(){return{empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1,parsedDateParts:[],meridiem:null}}function c(t){return null==t._pf&&(t._pf=d()),t._pf}function p(t){if(null==t._isValid){var e=c(t),i=vs.call(e.parsedDateParts,function(t){return null!=t}),n=!isNaN(t._d.getTime())&&e.overflow<0&&!e.empty&&!e.invalidMonth&&!e.invalidWeekday&&!e.nullInput&&!e.invalidFormat&&!e.userInvalidated&&(!e.meridiem||e.meridiem&&i);if(t._strict&&(n=n&&0===e.charsLeftOver&&0===e.unusedTokens.length&&void 0===e.bigHour),null!=Object.isFrozen&&Object.isFrozen(t))return n;t._isValid=n}return t._isValid}function f(t){var e=u(0/0);return null!=t?h(c(e),t):c(e).userInvalidated=!0,e}function m(t){return void 0===t}function g(t,e){var i,n,s;if(m(e._isAMomentObject)||(t._isAMomentObject=e._isAMomentObject),m(e._i)||(t._i=e._i),m(e._f)||(t._f=e._f),m(e._l)||(t._l=e._l),m(e._strict)||(t._strict=e._strict),m(e._tzm)||(t._tzm=e._tzm),m(e._isUTC)||(t._isUTC=e._isUTC),m(e._offset)||(t._offset=e._offset),m(e._pf)||(t._pf=c(e)),m(e._locale)||(t._locale=e._locale),ys.length>0)for(i in ys)n=ys[i],s=e[n],m(s)||(t[n]=s);return t}function v(e){g(this,e),this._d=new Date(null!=e._d?e._d.getTime():0/0),this.isValid()||(this._d=new Date(0/0)),bs===!1&&(bs=!0,t.updateOffset(this),bs=!1)}function y(t){return t instanceof v||null!=t&&null!=t._isAMomentObject}function b(t){return 0>t?Math.ceil(t)||0:Math.floor(t)}function w(t){var e=+t,i=0;return 0!==e&&isFinite(e)&&(i=b(e)),i}function $(t,e,i){var n,s=Math.min(t.length,e.length),o=Math.abs(t.length-e.length),a=0;for(n=0;s>n;n++)(i&&t[n]!==e[n]||!i&&w(t[n])!==w(e[n]))&&a++;return a+o}function k(e){t.suppressDeprecationWarnings===!1&&"undefined"!=typeof console&&console.warn&&console.warn("Deprecation warning: "+e)}function _(e,i){var n=!0;return h(function(){if(null!=t.deprecationHandler&&t.deprecationHandler(null,e),n){for(var s,o=[],a=0;a<arguments.length;a++){if(s="","object"==typeof arguments[a]){s+="\n["+a+"] ";for(var r in arguments[0])s+=r+": "+arguments[0][r]+", ";s=s.slice(0,-2)}else s=arguments[a];o.push(s)}k(e+"\nArguments: "+Array.prototype.slice.call(o).join("")+"\n"+(new Error).stack),n=!1}return i.apply(this,arguments)},i)}function C(e,i){null!=t.deprecationHandler&&t.deprecationHandler(e,i),ws[e]||(k(i),ws[e]=!0)}function x(t){return t instanceof Function||"[object Function]"===Object.prototype.toString.call(t)}function T(t){var e,i;for(i in t)e=t[i],x(e)?this[i]=e:this["_"+i]=e;this._config=t,this._ordinalParseLenient=new RegExp(this._ordinalParse.source+"|"+/\d{1,2}/.source)}function D(t,e){var i,s=h({},t);for(i in e)l(e,i)&&(n(t[i])&&n(e[i])?(s[i]={},h(s[i],t[i]),h(s[i],e[i])):null!=e[i]?s[i]=e[i]:delete s[i]);for(i in t)l(t,i)&&!l(e,i)&&n(t[i])&&(s[i]=h({},s[i]));return s}function S(t){null!=t&&this.set(t)}function j(t,e,i){var n=this._calendar[t]||this._calendar.sameElse;return x(n)?n.call(e,i):n}function M(t){var e=this._longDateFormat[t],i=this._longDateFormat[t.toUpperCase()];return e||!i?e:(this._longDateFormat[t]=i.replace(/MMMM|MM|DD|dddd/g,function(t){return t.slice(1)}),this._longDateFormat[t])}function P(){return this._invalidDate}function L(t){return this._ordinal.replace("%d",t)}function E(t,e,i,n){var s=this._relativeTime[i];return x(s)?s(t,e,i,n):s.replace(/%d/i,t)}function O(t,e){var i=this._relativeTime[t>0?"future":"past"];return x(i)?i(e):i.replace(/%s/i,e)}function I(t,e){var i=t.toLowerCase();Ms[i]=Ms[i+"s"]=Ms[e]=t}function A(t){return"string"==typeof t?Ms[t]||Ms[t.toLowerCase()]:void 0}function F(t){var e,i,n={};for(i in t)l(t,i)&&(e=A(i),e&&(n[e]=t[i]));return n}function R(t,e){Ps[t]=e}function q(t){var e=[];for(var i in t)e.push({unit:i,priority:Ps[i]});return e.sort(function(t,e){return t.priority-e.priority}),e}function H(e,i){return function(n){return null!=n?(B(this,e,n),t.updateOffset(this,i),this):N(this,e)}}function N(t,e){return t.isValid()?t._d["get"+(t._isUTC?"UTC":"")+e]():0/0}function B(t,e,i){t.isValid()&&t._d["set"+(t._isUTC?"UTC":"")+e](i)}function Y(t){return t=A(t),x(this[t])?this[t]():this}function W(t,e){if("object"==typeof t){t=F(t);for(var i=q(t),n=0;n<i.length;n++)this[i[n].unit](t[i[n].unit])}else if(t=A(t),x(this[t]))return this[t](e);return this}function V(t,e,i){var n=""+Math.abs(t),s=e-n.length,o=t>=0;return(o?i?"+":"":"-")+Math.pow(10,Math.max(0,s)).toString().substr(1)+n}function U(t,e,i,n){var s=n;"string"==typeof n&&(s=function(){return this[n]()}),t&&(Is[t]=s),e&&(Is[e[0]]=function(){return V(s.apply(this,arguments),e[1],e[2])}),i&&(Is[i]=function(){return this.localeData().ordinal(s.apply(this,arguments),t)})}function z(t){return t.match(/\[[\s\S]/)?t.replace(/^\[|\]$/g,""):t.replace(/\\/g,"")}function G(t){var e,i,n=t.match(Ls);for(e=0,i=n.length;i>e;e++)n[e]=Is[n[e]]?Is[n[e]]:z(n[e]);return function(e){var s,o="";for(s=0;i>s;s++)o+=n[s]instanceof Function?n[s].call(e,t):n[s];return o}}function K(t,e){return t.isValid()?(e=X(e,t.localeData()),Os[e]=Os[e]||G(e),Os[e](t)):t.localeData().invalidDate()}function X(t,e){function i(t){return e.longDateFormat(t)||t}var n=5;for(Es.lastIndex=0;n>=0&&Es.test(t);)t=t.replace(Es,i),Es.lastIndex=0,n-=1;return t}function J(t,e,i){Qs[t]=x(e)?e:function(t){return t&&i?i:e}}function Z(t,e){return l(Qs,t)?Qs[t](e._strict,e._locale):new RegExp(Q(t))}function Q(t){return te(t.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(t,e,i,n,s){return e||i||n||s}))}function te(t){return t.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}function ee(t,e){var i,n=e;for("string"==typeof t&&(t=[t]),o(e)&&(n=function(t,i){i[e]=w(t)}),i=0;i<t.length;i++)to[t[i]]=n}function ie(t,e){ee(t,function(t,i,n,s){n._w=n._w||{},e(t,n._w,n,s)})}function ne(t,e,i){null!=e&&l(to,t)&&to[t](e,i._a,i,t)}function se(t,e){return new Date(Date.UTC(t,e+1,0)).getUTCDate()}function oe(t,e){return t?i(this._months)?this._months[t.month()]:this._months[(this._months.isFormat||co).test(e)?"format":"standalone"][t.month()]:this._months}function ae(t,e){return t?i(this._monthsShort)?this._monthsShort[t.month()]:this._monthsShort[co.test(e)?"format":"standalone"][t.month()]:this._monthsShort}function re(t,e,i){var n,s,o,a=t.toLocaleLowerCase();if(!this._monthsParse)for(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[],n=0;12>n;++n)o=u([2e3,n]),this._shortMonthsParse[n]=this.monthsShort(o,"").toLocaleLowerCase(),this._longMonthsParse[n]=this.months(o,"").toLocaleLowerCase();return i?"MMM"===e?(s=uo.call(this._shortMonthsParse,a),-1!==s?s:null):(s=uo.call(this._longMonthsParse,a),-1!==s?s:null):"MMM"===e?(s=uo.call(this._shortMonthsParse,a),-1!==s?s:(s=uo.call(this._longMonthsParse,a),-1!==s?s:null)):(s=uo.call(this._longMonthsParse,a),-1!==s?s:(s=uo.call(this._shortMonthsParse,a),-1!==s?s:null))}function le(t,e,i){var n,s,o;if(this._monthsParseExact)return re.call(this,t,e,i);for(this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]),n=0;12>n;n++){if(s=u([2e3,n]),i&&!this._longMonthsParse[n]&&(this._longMonthsParse[n]=new RegExp("^"+this.months(s,"").replace(".","")+"$","i"),this._shortMonthsParse[n]=new RegExp("^"+this.monthsShort(s,"").replace(".","")+"$","i")),i||this._monthsParse[n]||(o="^"+this.months(s,"")+"|^"+this.monthsShort(s,""),this._monthsParse[n]=new RegExp(o.replace(".",""),"i")),i&&"MMMM"===e&&this._longMonthsParse[n].test(t))return n;if(i&&"MMM"===e&&this._shortMonthsParse[n].test(t))return n;if(!i&&this._monthsParse[n].test(t))return n}}function he(t,e){var i;if(!t.isValid())return t;if("string"==typeof e)if(/^\d+$/.test(e))e=w(e);else if(e=t.localeData().monthsParse(e),!o(e))return t;return i=Math.min(t.date(),se(t.year(),e)),t._d["set"+(t._isUTC?"UTC":"")+"Month"](e,i),t}function ue(e){return null!=e?(he(this,e),t.updateOffset(this,!0),this):N(this,"Month")}function de(){return se(this.year(),this.month())}function ce(t){return this._monthsParseExact?(l(this,"_monthsRegex")||fe.call(this),t?this._monthsShortStrictRegex:this._monthsShortRegex):(l(this,"_monthsShortRegex")||(this._monthsShortRegex=mo),this._monthsShortStrictRegex&&t?this._monthsShortStrictRegex:this._monthsShortRegex)}function pe(t){return this._monthsParseExact?(l(this,"_monthsRegex")||fe.call(this),t?this._monthsStrictRegex:this._monthsRegex):(l(this,"_monthsRegex")||(this._monthsRegex=go),this._monthsStrictRegex&&t?this._monthsStrictRegex:this._monthsRegex)}function fe(){function t(t,e){return e.length-t.length}var e,i,n=[],s=[],o=[];for(e=0;12>e;e++)i=u([2e3,e]),n.push(this.monthsShort(i,"")),s.push(this.months(i,"")),o.push(this.months(i,"")),o.push(this.monthsShort(i,""));for(n.sort(t),s.sort(t),o.sort(t),e=0;12>e;e++)n[e]=te(n[e]),s[e]=te(s[e]);for(e=0;24>e;e++)o[e]=te(o[e]);this._monthsRegex=new RegExp("^("+o.join("|")+")","i"),this._monthsShortRegex=this._monthsRegex,this._monthsStrictRegex=new RegExp("^("+s.join("|")+")","i"),this._monthsShortStrictRegex=new RegExp("^("+n.join("|")+")","i")}function me(t){return ge(t)?366:365}function ge(t){return 0===t%4&&0!==t%100||0===t%400}function ve(){return ge(this.year())}function ye(t,e,i,n,s,o,a){var r=new Date(t,e,i,n,s,o,a);return 100>t&&t>=0&&isFinite(r.getFullYear())&&r.setFullYear(t),r}function be(t){var e=new Date(Date.UTC.apply(null,arguments));return 100>t&&t>=0&&isFinite(e.getUTCFullYear())&&e.setUTCFullYear(t),e}function we(t,e,i){var n=7+e-i,s=(7+be(t,0,n).getUTCDay()-e)%7;return-s+n-1}function $e(t,e,i,n,s){var o,a,r=(7+i-n)%7,l=we(t,n,s),h=1+7*(e-1)+r+l;return 0>=h?(o=t-1,a=me(o)+h):h>me(t)?(o=t+1,a=h-me(t)):(o=t,a=h),{year:o,dayOfYear:a}}function ke(t,e,i){var n,s,o=we(t.year(),e,i),a=Math.floor((t.dayOfYear()-o-1)/7)+1;return 1>a?(s=t.year()-1,n=a+_e(s,e,i)):a>_e(t.year(),e,i)?(n=a-_e(t.year(),e,i),s=t.year()+1):(s=t.year(),n=a),{week:n,year:s}}function _e(t,e,i){var n=we(t,e,i),s=we(t+1,e,i);return(me(t)-n+s)/7}function Ce(t){return ke(t,this._week.dow,this._week.doy).week}function xe(){return this._week.dow}function Te(){return this._week.doy}function De(t){var e=this.localeData().week(this);return null==t?e:this.add(7*(t-e),"d")}function Se(t){var e=ke(this,1,4).week;return null==t?e:this.add(7*(t-e),"d")}function je(t,e){return"string"!=typeof t?t:isNaN(t)?(t=e.weekdaysParse(t),"number"==typeof t?t:null):parseInt(t,10)}function Me(t,e){return"string"==typeof t?e.weekdaysParse(t)%7||7:isNaN(t)?null:t}function Pe(t,e){return t?i(this._weekdays)?this._weekdays[t.day()]:this._weekdays[this._weekdays.isFormat.test(e)?"format":"standalone"][t.day()]:this._weekdays}function Le(t){return t?this._weekdaysShort[t.day()]:this._weekdaysShort}function Ee(t){return t?this._weekdaysMin[t.day()]:this._weekdaysMin}function Oe(t,e,i){var n,s,o,a=t.toLocaleLowerCase();if(!this._weekdaysParse)for(this._weekdaysParse=[],this._shortWeekdaysParse=[],this._minWeekdaysParse=[],n=0;7>n;++n)o=u([2e3,1]).day(n),this._minWeekdaysParse[n]=this.weekdaysMin(o,"").toLocaleLowerCase(),this._shortWeekdaysParse[n]=this.weekdaysShort(o,"").toLocaleLowerCase(),this._weekdaysParse[n]=this.weekdays(o,"").toLocaleLowerCase();return i?"dddd"===e?(s=uo.call(this._weekdaysParse,a),-1!==s?s:null):"ddd"===e?(s=uo.call(this._shortWeekdaysParse,a),-1!==s?s:null):(s=uo.call(this._minWeekdaysParse,a),-1!==s?s:null):"dddd"===e?(s=uo.call(this._weekdaysParse,a),-1!==s?s:(s=uo.call(this._shortWeekdaysParse,a),-1!==s?s:(s=uo.call(this._minWeekdaysParse,a),-1!==s?s:null))):"ddd"===e?(s=uo.call(this._shortWeekdaysParse,a),-1!==s?s:(s=uo.call(this._weekdaysParse,a),-1!==s?s:(s=uo.call(this._minWeekdaysParse,a),-1!==s?s:null))):(s=uo.call(this._minWeekdaysParse,a),-1!==s?s:(s=uo.call(this._weekdaysParse,a),-1!==s?s:(s=uo.call(this._shortWeekdaysParse,a),-1!==s?s:null)))}function Ie(t,e,i){var n,s,o;if(this._weekdaysParseExact)return Oe.call(this,t,e,i);for(this._weekdaysParse||(this._weekdaysParse=[],this._minWeekdaysParse=[],this._shortWeekdaysParse=[],this._fullWeekdaysParse=[]),n=0;7>n;n++){if(s=u([2e3,1]).day(n),i&&!this._fullWeekdaysParse[n]&&(this._fullWeekdaysParse[n]=new RegExp("^"+this.weekdays(s,"").replace(".",".?")+"$","i"),this._shortWeekdaysParse[n]=new RegExp("^"+this.weekdaysShort(s,"").replace(".",".?")+"$","i"),this._minWeekdaysParse[n]=new RegExp("^"+this.weekdaysMin(s,"").replace(".",".?")+"$","i")),this._weekdaysParse[n]||(o="^"+this.weekdays(s,"")+"|^"+this.weekdaysShort(s,"")+"|^"+this.weekdaysMin(s,""),this._weekdaysParse[n]=new RegExp(o.replace(".",""),"i")),i&&"dddd"===e&&this._fullWeekdaysParse[n].test(t))return n;if(i&&"ddd"===e&&this._shortWeekdaysParse[n].test(t))return n;if(i&&"dd"===e&&this._minWeekdaysParse[n].test(t))return n;if(!i&&this._weekdaysParse[n].test(t))return n}}function Ae(t){if(!this.isValid())return null!=t?this:0/0;var e=this._isUTC?this._d.getUTCDay():this._d.getDay();return null!=t?(t=je(t,this.localeData()),this.add(t-e,"d")):e}function Fe(t){if(!this.isValid())return null!=t?this:0/0;var e=(this.day()+7-this.localeData()._week.dow)%7;return null==t?e:this.add(t-e,"d")}function Re(t){if(!this.isValid())return null!=t?this:0/0;if(null!=t){var e=Me(t,this.localeData());return this.day(this.day()%7?e:e-7)}return this.day()||7}function qe(t){return this._weekdaysParseExact?(l(this,"_weekdaysRegex")||Be.call(this),t?this._weekdaysStrictRegex:this._weekdaysRegex):(l(this,"_weekdaysRegex")||(this._weekdaysRegex=ko),this._weekdaysStrictRegex&&t?this._weekdaysStrictRegex:this._weekdaysRegex)}function He(t){return this._weekdaysParseExact?(l(this,"_weekdaysRegex")||Be.call(this),t?this._weekdaysShortStrictRegex:this._weekdaysShortRegex):(l(this,"_weekdaysShortRegex")||(this._weekdaysShortRegex=_o),this._weekdaysShortStrictRegex&&t?this._weekdaysShortStrictRegex:this._weekdaysShortRegex)}function Ne(t){return this._weekdaysParseExact?(l(this,"_weekdaysRegex")||Be.call(this),t?this._weekdaysMinStrictRegex:this._weekdaysMinRegex):(l(this,"_weekdaysMinRegex")||(this._weekdaysMinRegex=Co),this._weekdaysMinStrictRegex&&t?this._weekdaysMinStrictRegex:this._weekdaysMinRegex)}function Be(){function t(t,e){return e.length-t.length}var e,i,n,s,o,a=[],r=[],l=[],h=[];for(e=0;7>e;e++)i=u([2e3,1]).day(e),n=this.weekdaysMin(i,""),s=this.weekdaysShort(i,""),o=this.weekdays(i,""),a.push(n),r.push(s),l.push(o),h.push(n),h.push(s),h.push(o);for(a.sort(t),r.sort(t),l.sort(t),h.sort(t),e=0;7>e;e++)r[e]=te(r[e]),l[e]=te(l[e]),h[e]=te(h[e]);this._weekdaysRegex=new RegExp("^("+h.join("|")+")","i"),this._weekdaysShortRegex=this._weekdaysRegex,this._weekdaysMinRegex=this._weekdaysRegex,this._weekdaysStrictRegex=new RegExp("^("+l.join("|")+")","i"),this._weekdaysShortStrictRegex=new RegExp("^("+r.join("|")+")","i"),this._weekdaysMinStrictRegex=new RegExp("^("+a.join("|")+")","i")}function Ye(){return this.hours()%12||12}function We(){return this.hours()||24}function Ve(t,e){U(t,0,0,function(){return this.localeData().meridiem(this.hours(),this.minutes(),e)})}function Ue(t,e){return e._meridiemParse}function ze(t){return"p"===(t+"").toLowerCase().charAt(0)}function Ge(t,e,i){return t>11?i?"pm":"PM":i?"am":"AM"}function Ke(t){return t?t.toLowerCase().replace("_","-"):t}function Xe(t){for(var e,i,n,s,o=0;o<t.length;){for(s=Ke(t[o]).split("-"),e=s.length,i=Ke(t[o+1]),i=i?i.split("-"):null;e>0;){if(n=Je(s.slice(0,e).join("-")))return n;if(i&&i.length>=e&&$(s,i,!0)>=e-1)break;e--}o++}return null}function Je(t){var e=null;if(!jo[t]&&"undefined"!=typeof module&&module&&module.exports)try{e=xo._abbr,require("./locale/"+t),Ze(e)}catch(i){}return jo[t]}function Ze(t,e){var i;return t&&(i=m(e)?ei(t):Qe(t,e),i&&(xo=i)),xo._abbr}function Qe(t,e){if(null!==e){var i=So;if(e.abbr=t,null!=jo[t])C("defineLocaleOverride","use moment.updateLocale(localeName, config) to change an existing locale. moment.defineLocale(localeName, config) should only be used for creating a new locale See http://momentjs.com/guides/#/warnings/define-locale/ for more info."),i=jo[t]._config;else if(null!=e.parentLocale){if(null==jo[e.parentLocale])return Mo[e.parentLocale]||(Mo[e.parentLocale]=[]),Mo[e.parentLocale].push({name:t,config:e}),null;i=jo[e.parentLocale]._config}return jo[t]=new S(D(i,e)),Mo[t]&&Mo[t].forEach(function(t){Qe(t.name,t.config)}),Ze(t),jo[t]}return delete jo[t],null}function ti(t,e){if(null!=e){var i,n=So;null!=jo[t]&&(n=jo[t]._config),e=D(n,e),i=new S(e),i.parentLocale=jo[t],jo[t]=i,Ze(t)}else null!=jo[t]&&(null!=jo[t].parentLocale?jo[t]=jo[t].parentLocale:null!=jo[t]&&delete jo[t]);return jo[t]}function ei(t){var e;if(t&&t._locale&&t._locale._abbr&&(t=t._locale._abbr),!t)return xo;if(!i(t)){if(e=Je(t))return e;t=[t]}return Xe(t)}function ii(){return _s(jo)}function ni(t){var e,i=t._a;return i&&-2===c(t).overflow&&(e=i[io]<0||i[io]>11?io:i[no]<1||i[no]>se(i[eo],i[io])?no:i[so]<0||i[so]>24||24===i[so]&&(0!==i[oo]||0!==i[ao]||0!==i[ro])?so:i[oo]<0||i[oo]>59?oo:i[ao]<0||i[ao]>59?ao:i[ro]<0||i[ro]>999?ro:-1,c(t)._overflowDayOfYear&&(eo>e||e>no)&&(e=no),c(t)._overflowWeeks&&-1===e&&(e=lo),c(t)._overflowWeekday&&-1===e&&(e=ho),c(t).overflow=e),t}function si(t){var e,i,n,s,o,a,r=t._i,l=Po.exec(r)||Lo.exec(r);if(l){for(c(t).iso=!0,e=0,i=Oo.length;i>e;e++)if(Oo[e][1].exec(l[1])){s=Oo[e][0],n=Oo[e][2]!==!1;break}if(null==s)return t._isValid=!1,void 0;if(l[3]){for(e=0,i=Io.length;i>e;e++)if(Io[e][1].exec(l[3])){o=(l[2]||" ")+Io[e][0];break}if(null==o)return t._isValid=!1,void 0}if(!n&&null!=o)return t._isValid=!1,void 0;if(l[4]){if(!Eo.exec(l[4]))return t._isValid=!1,void 0;a="Z"}t._f=s+(o||"")+(a||""),ui(t)}else t._isValid=!1}function oi(e){var i=Ao.exec(e._i);return null!==i?(e._d=new Date(+i[1]),void 0):(si(e),e._isValid===!1&&(delete e._isValid,t.createFromInputFallback(e)),void 0)}function ai(t,e,i){return null!=t?t:null!=e?e:i}function ri(e){var i=new Date(t.now());return e._useUTC?[i.getUTCFullYear(),i.getUTCMonth(),i.getUTCDate()]:[i.getFullYear(),i.getMonth(),i.getDate()]}function li(t){var e,i,n,s,o=[];if(!t._d){for(n=ri(t),t._w&&null==t._a[no]&&null==t._a[io]&&hi(t),t._dayOfYear&&(s=ai(t._a[eo],n[eo]),t._dayOfYear>me(s)&&(c(t)._overflowDayOfYear=!0),i=be(s,0,t._dayOfYear),t._a[io]=i.getUTCMonth(),t._a[no]=i.getUTCDate()),e=0;3>e&&null==t._a[e];++e)t._a[e]=o[e]=n[e];for(;7>e;e++)t._a[e]=o[e]=null==t._a[e]?2===e?1:0:t._a[e];24===t._a[so]&&0===t._a[oo]&&0===t._a[ao]&&0===t._a[ro]&&(t._nextDay=!0,t._a[so]=0),t._d=(t._useUTC?be:ye).apply(null,o),null!=t._tzm&&t._d.setUTCMinutes(t._d.getUTCMinutes()-t._tzm),t._nextDay&&(t._a[so]=24)}}function hi(t){var e,i,n,s,o,a,r,l;if(e=t._w,null!=e.GG||null!=e.W||null!=e.E)o=1,a=4,i=ai(e.GG,t._a[eo],ke(yi(),1,4).year),n=ai(e.W,1),s=ai(e.E,1),(1>s||s>7)&&(l=!0);else{o=t._locale._week.dow,a=t._locale._week.doy;var h=ke(yi(),o,a);i=ai(e.gg,t._a[eo],h.year),n=ai(e.w,h.week),null!=e.d?(s=e.d,(0>s||s>6)&&(l=!0)):null!=e.e?(s=e.e+o,(e.e<0||e.e>6)&&(l=!0)):s=o}1>n||n>_e(i,o,a)?c(t)._overflowWeeks=!0:null!=l?c(t)._overflowWeekday=!0:(r=$e(i,n,s,o,a),t._a[eo]=r.year,t._dayOfYear=r.dayOfYear)}function ui(e){if(e._f===t.ISO_8601)return si(e),void 0;e._a=[],c(e).empty=!0;var i,n,s,o,a,r=""+e._i,l=r.length,h=0;for(s=X(e._f,e._locale).match(Ls)||[],i=0;i<s.length;i++)o=s[i],n=(r.match(Z(o,e))||[])[0],n&&(a=r.substr(0,r.indexOf(n)),a.length>0&&c(e).unusedInput.push(a),r=r.slice(r.indexOf(n)+n.length),h+=n.length),Is[o]?(n?c(e).empty=!1:c(e).unusedTokens.push(o),ne(o,n,e)):e._strict&&!n&&c(e).unusedTokens.push(o);c(e).charsLeftOver=l-h,r.length>0&&c(e).unusedInput.push(r),e._a[so]<=12&&c(e).bigHour===!0&&e._a[so]>0&&(c(e).bigHour=void 0),c(e).parsedDateParts=e._a.slice(0),c(e).meridiem=e._meridiem,e._a[so]=di(e._locale,e._a[so],e._meridiem),li(e),ni(e)}function di(t,e,i){var n;return null==i?e:null!=t.meridiemHour?t.meridiemHour(e,i):null!=t.isPM?(n=t.isPM(i),n&&12>e&&(e+=12),n||12!==e||(e=0),e):e}function ci(t){var e,i,n,s,o;if(0===t._f.length)return c(t).invalidFormat=!0,t._d=new Date(0/0),void 0;for(s=0;s<t._f.length;s++)o=0,e=g({},t),null!=t._useUTC&&(e._useUTC=t._useUTC),e._f=t._f[s],ui(e),p(e)&&(o+=c(e).charsLeftOver,o+=10*c(e).unusedTokens.length,c(e).score=o,(null==n||n>o)&&(n=o,i=e));h(t,i||e)}function pi(t){if(!t._d){var e=F(t._i);t._a=r([e.year,e.month,e.day||e.date,e.hour,e.minute,e.second,e.millisecond],function(t){return t&&parseInt(t,10)}),li(t)}}function fi(t){var e=new v(ni(mi(t)));return e._nextDay&&(e.add(1,"d"),e._nextDay=void 0),e}function mi(t){var e=t._i,n=t._f;return t._locale=t._locale||ei(t._l),null===e||void 0===n&&""===e?f({nullInput:!0}):("string"==typeof e&&(t._i=e=t._locale.preparse(e)),y(e)?new v(ni(e)):(a(e)?t._d=e:i(n)?ci(t):n?ui(t):gi(t),p(t)||(t._d=null),t))}function gi(e){var n=e._i;void 0===n?e._d=new Date(t.now()):a(n)?e._d=new Date(n.valueOf()):"string"==typeof n?oi(e):i(n)?(e._a=r(n.slice(0),function(t){return parseInt(t,10)}),li(e)):"object"==typeof n?pi(e):o(n)?e._d=new Date(n):t.createFromInputFallback(e)}function vi(t,e,o,a,r){var l={};return(o===!0||o===!1)&&(a=o,o=void 0),(n(t)&&s(t)||i(t)&&0===t.length)&&(t=void 0),l._isAMomentObject=!0,l._useUTC=l._isUTC=r,l._l=o,l._i=t,l._f=e,l._strict=a,fi(l)}function yi(t,e,i,n){return vi(t,e,i,n,!1)}function bi(t,e){var n,s;if(1===e.length&&i(e[0])&&(e=e[0]),!e.length)return yi();for(n=e[0],s=1;s<e.length;++s)(!e[s].isValid()||e[s][t](n))&&(n=e[s]);return n}function wi(){var t=[].slice.call(arguments,0);return bi("isBefore",t)}function $i(){var t=[].slice.call(arguments,0);return bi("isAfter",t)}function ki(t){var e=F(t),i=e.year||0,n=e.quarter||0,s=e.month||0,o=e.week||0,a=e.day||0,r=e.hour||0,l=e.minute||0,h=e.second||0,u=e.millisecond||0;this._milliseconds=+u+1e3*h+6e4*l+60*60*1e3*r,this._days=+a+7*o,this._months=+s+3*n+12*i,this._data={},this._locale=ei(),this._bubble()}function _i(t){return t instanceof ki}function Ci(t){return 0>t?-1*Math.round(-1*t):Math.round(t)}function xi(t,e){U(t,0,0,function(){var t=this.utcOffset(),i="+";return 0>t&&(t=-t,i="-"),i+V(~~(t/60),2)+e+V(~~t%60,2)})}function Ti(t,e){var i=(e||"").match(t);if(null===i)return null;var n=i[i.length-1]||[],s=(n+"").match(Ho)||["-",0,0],o=+(60*s[1])+w(s[2]);return 0===o?0:"+"===s[0]?o:-o}function Di(e,i){var n,s;return i._isUTC?(n=i.clone(),s=(y(e)||a(e)?e.valueOf():yi(e).valueOf())-n.valueOf(),n._d.setTime(n._d.valueOf()+s),t.updateOffset(n,!1),n):yi(e).local()}function Si(t){return 15*-Math.round(t._d.getTimezoneOffset()/15)}function ji(e,i){var n,s=this._offset||0;if(!this.isValid())return null!=e?this:0/0;if(null!=e){if("string"==typeof e){if(e=Ti(Xs,e),null===e)return this}else Math.abs(e)<16&&(e=60*e);return!this._isUTC&&i&&(n=Si(this)),this._offset=e,this._isUTC=!0,null!=n&&this.add(n,"m"),s!==e&&(!i||this._changeInProgress?Vi(this,Hi(e-s,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,t.updateOffset(this,!0),this._changeInProgress=null)),this}return this._isUTC?s:Si(this)}function Mi(t,e){return null!=t?("string"!=typeof t&&(t=-t),this.utcOffset(t,e),this):-this.utcOffset()}function Pi(t){return this.utcOffset(0,t)}function Li(t){return this._isUTC&&(this.utcOffset(0,t),this._isUTC=!1,t&&this.subtract(Si(this),"m")),this}function Ei(){if(null!=this._tzm)this.utcOffset(this._tzm);else if("string"==typeof this._i){var t=Ti(Ks,this._i);null!=t?this.utcOffset(t):this.utcOffset(0,!0)}return this}function Oi(t){return this.isValid()?(t=t?yi(t).utcOffset():0,0===(this.utcOffset()-t)%60):!1}function Ii(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()}function Ai(){if(!m(this._isDSTShifted))return this._isDSTShifted;var t={};if(g(t,this),t=mi(t),t._a){var e=t._isUTC?u(t._a):yi(t._a);this._isDSTShifted=this.isValid()&&$(t._a,e.toArray())>0}else this._isDSTShifted=!1;return this._isDSTShifted}function Fi(){return this.isValid()?!this._isUTC:!1}function Ri(){return this.isValid()?this._isUTC:!1}function qi(){return this.isValid()?this._isUTC&&0===this._offset:!1}function Hi(t,e){var i,n,s,a=t,r=null;return _i(t)?a={ms:t._milliseconds,d:t._days,M:t._months}:o(t)?(a={},e?a[e]=t:a.milliseconds=t):(r=No.exec(t))?(i="-"===r[1]?-1:1,a={y:0,d:w(r[no])*i,h:w(r[so])*i,m:w(r[oo])*i,s:w(r[ao])*i,ms:w(Ci(1e3*r[ro]))*i}):(r=Bo.exec(t))?(i="-"===r[1]?-1:1,a={y:Ni(r[2],i),M:Ni(r[3],i),w:Ni(r[4],i),d:Ni(r[5],i),h:Ni(r[6],i),m:Ni(r[7],i),s:Ni(r[8],i)}):null==a?a={}:"object"==typeof a&&("from"in a||"to"in a)&&(s=Yi(yi(a.from),yi(a.to)),a={},a.ms=s.milliseconds,a.M=s.months),n=new ki(a),_i(t)&&l(t,"_locale")&&(n._locale=t._locale),n}function Ni(t,e){var i=t&&parseFloat(t.replace(",","."));return(isNaN(i)?0:i)*e}function Bi(t,e){var i={milliseconds:0,months:0};return i.months=e.month()-t.month()+12*(e.year()-t.year()),t.clone().add(i.months,"M").isAfter(e)&&--i.months,i.milliseconds=+e-+t.clone().add(i.months,"M"),i}function Yi(t,e){var i;return t.isValid()&&e.isValid()?(e=Di(e,t),t.isBefore(e)?i=Bi(t,e):(i=Bi(e,t),i.milliseconds=-i.milliseconds,i.months=-i.months),i):{milliseconds:0,months:0}}function Wi(t,e){return function(i,n){var s,o;return null===n||isNaN(+n)||(C(e,"moment()."+e+"(period, number) is deprecated. Please use moment()."+e+"(number, period). "+"See http://momentjs.com/guides/#/warnings/add-inverted-param/ for more info."),o=i,i=n,n=o),i="string"==typeof i?+i:i,s=Hi(i,n),Vi(this,s,t),this}}function Vi(e,i,n,s){var o=i._milliseconds,a=Ci(i._days),r=Ci(i._months);e.isValid()&&(s=null==s?!0:s,o&&e._d.setTime(e._d.valueOf()+o*n),a&&B(e,"Date",N(e,"Date")+a*n),r&&he(e,N(e,"Month")+r*n),s&&t.updateOffset(e,a||r))}function Ui(t,e){var i=t.diff(e,"days",!0);return-6>i?"sameElse":-1>i?"lastWeek":0>i?"lastDay":1>i?"sameDay":2>i?"nextDay":7>i?"nextWeek":"sameElse"}function zi(e,i){var n=e||yi(),s=Di(n,this).startOf("day"),o=t.calendarFormat(this,s)||"sameElse",a=i&&(x(i[o])?i[o].call(this,n):i[o]);return this.format(a||this.localeData().calendar(o,this,yi(n)))}function Gi(){return new v(this)}function Ki(t,e){var i=y(t)?t:yi(t);return this.isValid()&&i.isValid()?(e=A(m(e)?"millisecond":e),"millisecond"===e?this.valueOf()>i.valueOf():i.valueOf()<this.clone().startOf(e).valueOf()):!1}function Xi(t,e){var i=y(t)?t:yi(t);return this.isValid()&&i.isValid()?(e=A(m(e)?"millisecond":e),"millisecond"===e?this.valueOf()<i.valueOf():this.clone().endOf(e).valueOf()<i.valueOf()):!1}function Ji(t,e,i,n){return n=n||"()",("("===n[0]?this.isAfter(t,i):!this.isBefore(t,i))&&(")"===n[1]?this.isBefore(e,i):!this.isAfter(e,i))}function Zi(t,e){var i,n=y(t)?t:yi(t);return this.isValid()&&n.isValid()?(e=A(e||"millisecond"),"millisecond"===e?this.valueOf()===n.valueOf():(i=n.valueOf(),this.clone().startOf(e).valueOf()<=i&&i<=this.clone().endOf(e).valueOf())):!1}function Qi(t,e){return this.isSame(t,e)||this.isAfter(t,e)}function tn(t,e){return this.isSame(t,e)||this.isBefore(t,e)}function en(t,e,i){var n,s,o,a;return this.isValid()?(n=Di(t,this),n.isValid()?(s=6e4*(n.utcOffset()-this.utcOffset()),e=A(e),"year"===e||"month"===e||"quarter"===e?(a=nn(this,n),"quarter"===e?a/=3:"year"===e&&(a/=12)):(o=this-n,a="second"===e?o/1e3:"minute"===e?o/6e4:"hour"===e?o/36e5:"day"===e?(o-s)/864e5:"week"===e?(o-s)/6048e5:o),i?a:b(a)):0/0):0/0}function nn(t,e){var i,n,s=12*(e.year()-t.year())+(e.month()-t.month()),o=t.clone().add(s,"months");return 0>e-o?(i=t.clone().add(s-1,"months"),n=(e-o)/(o-i)):(i=t.clone().add(s+1,"months"),n=(e-o)/(i-o)),-(s+n)||0}function sn(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")}function on(){var t=this.clone().utc();return 0<t.year()&&t.year()<=9999?x(Date.prototype.toISOString)?this.toDate().toISOString():K(t,"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]"):K(t,"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]")}function an(){if(!this.isValid())return"moment.invalid(/* "+this._i+" */)";var t="moment",e="";this.isLocal()||(t=0===this.utcOffset()?"moment.utc":"moment.parseZone",e="Z");var i="["+t+'("]',n=0<this.year()&&this.year()<=9999?"YYYY":"YYYYYY",s="-MM-DD[T]HH:mm:ss.SSS",o=e+'[")]';return this.format(i+n+s+o)}function rn(e){e||(e=this.isUtc()?t.defaultFormatUtc:t.defaultFormat);var i=K(this,e);return this.localeData().postformat(i)}function ln(t,e){return this.isValid()&&(y(t)&&t.isValid()||yi(t).isValid())?Hi({to:this,from:t}).locale(this.locale()).humanize(!e):this.localeData().invalidDate()
}function hn(t){return this.from(yi(),t)}function un(t,e){return this.isValid()&&(y(t)&&t.isValid()||yi(t).isValid())?Hi({from:this,to:t}).locale(this.locale()).humanize(!e):this.localeData().invalidDate()}function dn(t){return this.to(yi(),t)}function cn(t){var e;return void 0===t?this._locale._abbr:(e=ei(t),null!=e&&(this._locale=e),this)}function pn(){return this._locale}function fn(t){switch(t=A(t)){case"year":this.month(0);case"quarter":case"month":this.date(1);case"week":case"isoWeek":case"day":case"date":this.hours(0);case"hour":this.minutes(0);case"minute":this.seconds(0);case"second":this.milliseconds(0)}return"week"===t&&this.weekday(0),"isoWeek"===t&&this.isoWeekday(1),"quarter"===t&&this.month(3*Math.floor(this.month()/3)),this}function mn(t){return t=A(t),void 0===t||"millisecond"===t?this:("date"===t&&(t="day"),this.startOf(t).add(1,"isoWeek"===t?"week":t).subtract(1,"ms"))}function gn(){return this._d.valueOf()-6e4*(this._offset||0)}function vn(){return Math.floor(this.valueOf()/1e3)}function yn(){return new Date(this.valueOf())}function bn(){var t=this;return[t.year(),t.month(),t.date(),t.hour(),t.minute(),t.second(),t.millisecond()]}function wn(){var t=this;return{years:t.year(),months:t.month(),date:t.date(),hours:t.hours(),minutes:t.minutes(),seconds:t.seconds(),milliseconds:t.milliseconds()}}function $n(){return this.isValid()?this.toISOString():null}function kn(){return p(this)}function _n(){return h({},c(this))}function Cn(){return c(this).overflow}function xn(){return{input:this._i,format:this._f,locale:this._locale,isUTC:this._isUTC,strict:this._strict}}function Tn(t,e){U(0,[t,t.length],0,e)}function Dn(t){return Pn.call(this,t,this.week(),this.weekday(),this.localeData()._week.dow,this.localeData()._week.doy)}function Sn(t){return Pn.call(this,t,this.isoWeek(),this.isoWeekday(),1,4)}function jn(){return _e(this.year(),1,4)}function Mn(){var t=this.localeData()._week;return _e(this.year(),t.dow,t.doy)}function Pn(t,e,i,n,s){var o;return null==t?ke(this,n,s).year:(o=_e(t,n,s),e>o&&(e=o),Ln.call(this,t,e,i,n,s))}function Ln(t,e,i,n,s){var o=$e(t,e,i,n,s),a=be(o.year,0,o.dayOfYear);return this.year(a.getUTCFullYear()),this.month(a.getUTCMonth()),this.date(a.getUTCDate()),this}function En(t){return null==t?Math.ceil((this.month()+1)/3):this.month(3*(t-1)+this.month()%3)}function On(t){var e=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/864e5)+1;return null==t?e:this.add(t-e,"d")}function In(t,e){e[ro]=w(1e3*("0."+t))}function An(){return this._isUTC?"UTC":""}function Fn(){return this._isUTC?"Coordinated Universal Time":""}function Rn(t){return yi(1e3*t)}function qn(){return yi.apply(null,arguments).parseZone()}function Hn(t){return t}function Nn(t,e,i,n){var s=ei(),o=u().set(n,e);return s[i](o,t)}function Bn(t,e,i){if(o(t)&&(e=t,t=void 0),t=t||"",null!=e)return Nn(t,e,i,"month");var n,s=[];for(n=0;12>n;n++)s[n]=Nn(t,n,i,"month");return s}function Yn(t,e,i,n){"boolean"==typeof t?(o(e)&&(i=e,e=void 0),e=e||""):(e=t,i=e,t=!1,o(e)&&(i=e,e=void 0),e=e||"");var s=ei(),a=t?s._week.dow:0;if(null!=i)return Nn(e,(i+a)%7,n,"day");var r,l=[];for(r=0;7>r;r++)l[r]=Nn(e,(r+a)%7,n,"day");return l}function Wn(t,e){return Bn(t,e,"months")}function Vn(t,e){return Bn(t,e,"monthsShort")}function Un(t,e,i){return Yn(t,e,i,"weekdays")}function zn(t,e,i){return Yn(t,e,i,"weekdaysShort")}function Gn(t,e,i){return Yn(t,e,i,"weekdaysMin")}function Kn(){var t=this._data;return this._milliseconds=Qo(this._milliseconds),this._days=Qo(this._days),this._months=Qo(this._months),t.milliseconds=Qo(t.milliseconds),t.seconds=Qo(t.seconds),t.minutes=Qo(t.minutes),t.hours=Qo(t.hours),t.months=Qo(t.months),t.years=Qo(t.years),this}function Xn(t,e,i,n){var s=Hi(e,i);return t._milliseconds+=n*s._milliseconds,t._days+=n*s._days,t._months+=n*s._months,t._bubble()}function Jn(t,e){return Xn(this,t,e,1)}function Zn(t,e){return Xn(this,t,e,-1)}function Qn(t){return 0>t?Math.floor(t):Math.ceil(t)}function ts(){var t,e,i,n,s,o=this._milliseconds,a=this._days,r=this._months,l=this._data;return o>=0&&a>=0&&r>=0||0>=o&&0>=a&&0>=r||(o+=864e5*Qn(is(r)+a),a=0,r=0),l.milliseconds=o%1e3,t=b(o/1e3),l.seconds=t%60,e=b(t/60),l.minutes=e%60,i=b(e/60),l.hours=i%24,a+=b(i/24),s=b(es(a)),r+=s,a-=Qn(is(s)),n=b(r/12),r%=12,l.days=a,l.months=r,l.years=n,this}function es(t){return 4800*t/146097}function is(t){return 146097*t/4800}function ns(t){var e,i,n=this._milliseconds;if(t=A(t),"month"===t||"year"===t)return e=this._days+n/864e5,i=this._months+es(e),"month"===t?i:i/12;switch(e=this._days+Math.round(is(this._months)),t){case"week":return e/7+n/6048e5;case"day":return e+n/864e5;case"hour":return 24*e+n/36e5;case"minute":return 1440*e+n/6e4;case"second":return 86400*e+n/1e3;case"millisecond":return Math.floor(864e5*e)+n;default:throw new Error("Unknown unit "+t)}}function ss(){return this._milliseconds+864e5*this._days+2592e6*(this._months%12)+31536e6*w(this._months/12)}function os(t){return function(){return this.as(t)}}function as(t){return t=A(t),this[t+"s"]()}function rs(t){return function(){return this._data[t]}}function ls(){return b(this.days()/7)}function hs(t,e,i,n,s){return s.relativeTime(e||1,!!i,t,n)}function us(t,e,i){var n=Hi(t).abs(),s=ma(n.as("s")),o=ma(n.as("m")),a=ma(n.as("h")),r=ma(n.as("d")),l=ma(n.as("M")),h=ma(n.as("y")),u=s<ga.s&&["s",s]||1>=o&&["m"]||o<ga.m&&["mm",o]||1>=a&&["h"]||a<ga.h&&["hh",a]||1>=r&&["d"]||r<ga.d&&["dd",r]||1>=l&&["M"]||l<ga.M&&["MM",l]||1>=h&&["y"]||["yy",h];return u[2]=e,u[3]=+t>0,u[4]=i,hs.apply(null,u)}function ds(t){return void 0===t?ma:"function"==typeof t?(ma=t,!0):!1}function cs(t,e){return void 0===ga[t]?!1:void 0===e?ga[t]:(ga[t]=e,!0)}function ps(t){var e=this.localeData(),i=us(this,!t,e);return t&&(i=e.pastFuture(+this,i)),e.postformat(i)}function fs(){var t,e,i,n=va(this._milliseconds)/1e3,s=va(this._days),o=va(this._months);t=b(n/60),e=b(t/60),n%=60,t%=60,i=b(o/12),o%=12;var a=i,r=o,l=s,h=e,u=t,d=n,c=this.asSeconds();return c?(0>c?"-":"")+"P"+(a?a+"Y":"")+(r?r+"M":"")+(l?l+"D":"")+(h||u||d?"T":"")+(h?h+"H":"")+(u?u+"M":"")+(d?d+"S":""):"P0D"}var ms,gs;gs=Array.prototype.some?Array.prototype.some:function(t){for(var e=Object(this),i=e.length>>>0,n=0;i>n;n++)if(n in e&&t.call(this,e[n],n,e))return!0;return!1};var vs=gs,ys=t.momentProperties=[],bs=!1,ws={};t.suppressDeprecationWarnings=!1,t.deprecationHandler=null;var $s;$s=Object.keys?Object.keys:function(t){var e,i=[];for(e in t)l(t,e)&&i.push(e);return i};var ks,_s=$s,Cs={sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},xs={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},Ts="Invalid date",Ds="%d",Ss=/\d{1,2}/,js={future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},Ms={},Ps={},Ls=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|YYYYYY|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,Es=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,Os={},Is={},As=/\d/,Fs=/\d\d/,Rs=/\d{3}/,qs=/\d{4}/,Hs=/[+-]?\d{6}/,Ns=/\d\d?/,Bs=/\d\d\d\d?/,Ys=/\d\d\d\d\d\d?/,Ws=/\d{1,3}/,Vs=/\d{1,4}/,Us=/[+-]?\d{1,6}/,zs=/\d+/,Gs=/[+-]?\d+/,Ks=/Z|[+-]\d\d:?\d\d/gi,Xs=/Z|[+-]\d\d(?::?\d\d)?/gi,Js=/[+-]?\d+(\.\d{1,3})?/,Zs=/[0-9]*['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+|[\u0600-\u06FF\/]+(\s*?[\u0600-\u06FF]+){1,2}/i,Qs={},to={},eo=0,io=1,no=2,so=3,oo=4,ao=5,ro=6,lo=7,ho=8;ks=Array.prototype.indexOf?Array.prototype.indexOf:function(t){var e;for(e=0;e<this.length;++e)if(this[e]===t)return e;return-1};var uo=ks;U("M",["MM",2],"Mo",function(){return this.month()+1}),U("MMM",0,0,function(t){return this.localeData().monthsShort(this,t)}),U("MMMM",0,0,function(t){return this.localeData().months(this,t)}),I("month","M"),R("month",8),J("M",Ns),J("MM",Ns,Fs),J("MMM",function(t,e){return e.monthsShortRegex(t)}),J("MMMM",function(t,e){return e.monthsRegex(t)}),ee(["M","MM"],function(t,e){e[io]=w(t)-1}),ee(["MMM","MMMM"],function(t,e,i,n){var s=i._locale.monthsParse(t,n,i._strict);null!=s?e[io]=s:c(i).invalidMonth=t});var co=/D[oD]?(\[[^\[\]]*\]|\s)+MMMM?/,po="January_February_March_April_May_June_July_August_September_October_November_December".split("_"),fo="Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),mo=Zs,go=Zs;U("Y",0,0,function(){var t=this.year();return 9999>=t?""+t:"+"+t}),U(0,["YY",2],0,function(){return this.year()%100}),U(0,["YYYY",4],0,"year"),U(0,["YYYYY",5],0,"year"),U(0,["YYYYYY",6,!0],0,"year"),I("year","y"),R("year",1),J("Y",Gs),J("YY",Ns,Fs),J("YYYY",Vs,qs),J("YYYYY",Us,Hs),J("YYYYYY",Us,Hs),ee(["YYYYY","YYYYYY"],eo),ee("YYYY",function(e,i){i[eo]=2===e.length?t.parseTwoDigitYear(e):w(e)}),ee("YY",function(e,i){i[eo]=t.parseTwoDigitYear(e)}),ee("Y",function(t,e){e[eo]=parseInt(t,10)}),t.parseTwoDigitYear=function(t){return w(t)+(w(t)>68?1900:2e3)};var vo=H("FullYear",!0);U("w",["ww",2],"wo","week"),U("W",["WW",2],"Wo","isoWeek"),I("week","w"),I("isoWeek","W"),R("week",5),R("isoWeek",5),J("w",Ns),J("ww",Ns,Fs),J("W",Ns),J("WW",Ns,Fs),ie(["w","ww","W","WW"],function(t,e,i,n){e[n.substr(0,1)]=w(t)});var yo={dow:0,doy:6};U("d",0,"do","day"),U("dd",0,0,function(t){return this.localeData().weekdaysMin(this,t)}),U("ddd",0,0,function(t){return this.localeData().weekdaysShort(this,t)}),U("dddd",0,0,function(t){return this.localeData().weekdays(this,t)}),U("e",0,0,"weekday"),U("E",0,0,"isoWeekday"),I("day","d"),I("weekday","e"),I("isoWeekday","E"),R("day",11),R("weekday",11),R("isoWeekday",11),J("d",Ns),J("e",Ns),J("E",Ns),J("dd",function(t,e){return e.weekdaysMinRegex(t)}),J("ddd",function(t,e){return e.weekdaysShortRegex(t)}),J("dddd",function(t,e){return e.weekdaysRegex(t)}),ie(["dd","ddd","dddd"],function(t,e,i,n){var s=i._locale.weekdaysParse(t,n,i._strict);null!=s?e.d=s:c(i).invalidWeekday=t}),ie(["d","e","E"],function(t,e,i,n){e[n]=w(t)});var bo="Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),wo="Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),$o="Su_Mo_Tu_We_Th_Fr_Sa".split("_"),ko=Zs,_o=Zs,Co=Zs;U("H",["HH",2],0,"hour"),U("h",["hh",2],0,Ye),U("k",["kk",2],0,We),U("hmm",0,0,function(){return""+Ye.apply(this)+V(this.minutes(),2)}),U("hmmss",0,0,function(){return""+Ye.apply(this)+V(this.minutes(),2)+V(this.seconds(),2)}),U("Hmm",0,0,function(){return""+this.hours()+V(this.minutes(),2)}),U("Hmmss",0,0,function(){return""+this.hours()+V(this.minutes(),2)+V(this.seconds(),2)}),Ve("a",!0),Ve("A",!1),I("hour","h"),R("hour",13),J("a",Ue),J("A",Ue),J("H",Ns),J("h",Ns),J("HH",Ns,Fs),J("hh",Ns,Fs),J("hmm",Bs),J("hmmss",Ys),J("Hmm",Bs),J("Hmmss",Ys),ee(["H","HH"],so),ee(["a","A"],function(t,e,i){i._isPm=i._locale.isPM(t),i._meridiem=t}),ee(["h","hh"],function(t,e,i){e[so]=w(t),c(i).bigHour=!0}),ee("hmm",function(t,e,i){var n=t.length-2;e[so]=w(t.substr(0,n)),e[oo]=w(t.substr(n)),c(i).bigHour=!0}),ee("hmmss",function(t,e,i){var n=t.length-4,s=t.length-2;e[so]=w(t.substr(0,n)),e[oo]=w(t.substr(n,2)),e[ao]=w(t.substr(s)),c(i).bigHour=!0}),ee("Hmm",function(t,e){var i=t.length-2;e[so]=w(t.substr(0,i)),e[oo]=w(t.substr(i))}),ee("Hmmss",function(t,e){var i=t.length-4,n=t.length-2;e[so]=w(t.substr(0,i)),e[oo]=w(t.substr(i,2)),e[ao]=w(t.substr(n))});var xo,To=/[ap]\.?m?\.?/i,Do=H("Hours",!0),So={calendar:Cs,longDateFormat:xs,invalidDate:Ts,ordinal:Ds,ordinalParse:Ss,relativeTime:js,months:po,monthsShort:fo,week:yo,weekdays:bo,weekdaysMin:$o,weekdaysShort:wo,meridiemParse:To},jo={},Mo={},Po=/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/,Lo=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/,Eo=/Z|[+-]\d\d(?::?\d\d)?/,Oo=[["YYYYYY-MM-DD",/[+-]\d{6}-\d\d-\d\d/],["YYYY-MM-DD",/\d{4}-\d\d-\d\d/],["GGGG-[W]WW-E",/\d{4}-W\d\d-\d/],["GGGG-[W]WW",/\d{4}-W\d\d/,!1],["YYYY-DDD",/\d{4}-\d{3}/],["YYYY-MM",/\d{4}-\d\d/,!1],["YYYYYYMMDD",/[+-]\d{10}/],["YYYYMMDD",/\d{8}/],["GGGG[W]WWE",/\d{4}W\d{3}/],["GGGG[W]WW",/\d{4}W\d{2}/,!1],["YYYYDDD",/\d{7}/]],Io=[["HH:mm:ss.SSSS",/\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss,SSSS",/\d\d:\d\d:\d\d,\d+/],["HH:mm:ss",/\d\d:\d\d:\d\d/],["HH:mm",/\d\d:\d\d/],["HHmmss.SSSS",/\d\d\d\d\d\d\.\d+/],["HHmmss,SSSS",/\d\d\d\d\d\d,\d+/],["HHmmss",/\d\d\d\d\d\d/],["HHmm",/\d\d\d\d/],["HH",/\d\d/]],Ao=/^\/?Date\((\-?\d+)/i;t.createFromInputFallback=_("value provided is not in a recognized ISO format. moment construction falls back to js Date(), which is not reliable across all browsers and versions. Non ISO date formats are discouraged and will be removed in an upcoming major release. Please refer to http://momentjs.com/guides/#/warnings/js-date/ for more info.",function(t){t._d=new Date(t._i+(t._useUTC?" UTC":""))}),t.ISO_8601=function(){};var Fo=_("moment().min is deprecated, use moment.max instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var t=yi.apply(null,arguments);return this.isValid()&&t.isValid()?this>t?this:t:f()}),Ro=_("moment().max is deprecated, use moment.min instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var t=yi.apply(null,arguments);return this.isValid()&&t.isValid()?t>this?this:t:f()}),qo=function(){return Date.now?Date.now():+new Date};xi("Z",":"),xi("ZZ",""),J("Z",Xs),J("ZZ",Xs),ee(["Z","ZZ"],function(t,e,i){i._useUTC=!0,i._tzm=Ti(Xs,t)});var Ho=/([\+\-]|\d\d)/gi;t.updateOffset=function(){};var No=/^(\-)?(?:(\d*)[. ])?(\d+)\:(\d+)(?:\:(\d+)(\.\d*)?)?$/,Bo=/^(-)?P(?:(-?[0-9,.]*)Y)?(?:(-?[0-9,.]*)M)?(?:(-?[0-9,.]*)W)?(?:(-?[0-9,.]*)D)?(?:T(?:(-?[0-9,.]*)H)?(?:(-?[0-9,.]*)M)?(?:(-?[0-9,.]*)S)?)?$/;Hi.fn=ki.prototype;var Yo=Wi(1,"add"),Wo=Wi(-1,"subtract");t.defaultFormat="YYYY-MM-DDTHH:mm:ssZ",t.defaultFormatUtc="YYYY-MM-DDTHH:mm:ss[Z]";var Vo=_("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",function(t){return void 0===t?this.localeData():this.locale(t)});U(0,["gg",2],0,function(){return this.weekYear()%100}),U(0,["GG",2],0,function(){return this.isoWeekYear()%100}),Tn("gggg","weekYear"),Tn("ggggg","weekYear"),Tn("GGGG","isoWeekYear"),Tn("GGGGG","isoWeekYear"),I("weekYear","gg"),I("isoWeekYear","GG"),R("weekYear",1),R("isoWeekYear",1),J("G",Gs),J("g",Gs),J("GG",Ns,Fs),J("gg",Ns,Fs),J("GGGG",Vs,qs),J("gggg",Vs,qs),J("GGGGG",Us,Hs),J("ggggg",Us,Hs),ie(["gggg","ggggg","GGGG","GGGGG"],function(t,e,i,n){e[n.substr(0,2)]=w(t)}),ie(["gg","GG"],function(e,i,n,s){i[s]=t.parseTwoDigitYear(e)}),U("Q",0,"Qo","quarter"),I("quarter","Q"),R("quarter",7),J("Q",As),ee("Q",function(t,e){e[io]=3*(w(t)-1)}),U("D",["DD",2],"Do","date"),I("date","D"),R("date",9),J("D",Ns),J("DD",Ns,Fs),J("Do",function(t,e){return t?e._ordinalParse:e._ordinalParseLenient}),ee(["D","DD"],no),ee("Do",function(t,e){e[no]=w(t.match(Ns)[0],10)});var Uo=H("Date",!0);U("DDD",["DDDD",3],"DDDo","dayOfYear"),I("dayOfYear","DDD"),R("dayOfYear",4),J("DDD",Ws),J("DDDD",Rs),ee(["DDD","DDDD"],function(t,e,i){i._dayOfYear=w(t)}),U("m",["mm",2],0,"minute"),I("minute","m"),R("minute",14),J("m",Ns),J("mm",Ns,Fs),ee(["m","mm"],oo);var zo=H("Minutes",!1);U("s",["ss",2],0,"second"),I("second","s"),R("second",15),J("s",Ns),J("ss",Ns,Fs),ee(["s","ss"],ao);var Go=H("Seconds",!1);U("S",0,0,function(){return~~(this.millisecond()/100)}),U(0,["SS",2],0,function(){return~~(this.millisecond()/10)}),U(0,["SSS",3],0,"millisecond"),U(0,["SSSS",4],0,function(){return 10*this.millisecond()}),U(0,["SSSSS",5],0,function(){return 100*this.millisecond()}),U(0,["SSSSSS",6],0,function(){return 1e3*this.millisecond()}),U(0,["SSSSSSS",7],0,function(){return 1e4*this.millisecond()}),U(0,["SSSSSSSS",8],0,function(){return 1e5*this.millisecond()}),U(0,["SSSSSSSSS",9],0,function(){return 1e6*this.millisecond()}),I("millisecond","ms"),R("millisecond",16),J("S",Ws,As),J("SS",Ws,Fs),J("SSS",Ws,Rs);var Ko;for(Ko="SSSS";Ko.length<=9;Ko+="S")J(Ko,zs);for(Ko="S";Ko.length<=9;Ko+="S")ee(Ko,In);var Xo=H("Milliseconds",!1);U("z",0,0,"zoneAbbr"),U("zz",0,0,"zoneName");var Jo=v.prototype;Jo.add=Yo,Jo.calendar=zi,Jo.clone=Gi,Jo.diff=en,Jo.endOf=mn,Jo.format=rn,Jo.from=ln,Jo.fromNow=hn,Jo.to=un,Jo.toNow=dn,Jo.get=Y,Jo.invalidAt=Cn,Jo.isAfter=Ki,Jo.isBefore=Xi,Jo.isBetween=Ji,Jo.isSame=Zi,Jo.isSameOrAfter=Qi,Jo.isSameOrBefore=tn,Jo.isValid=kn,Jo.lang=Vo,Jo.locale=cn,Jo.localeData=pn,Jo.max=Ro,Jo.min=Fo,Jo.parsingFlags=_n,Jo.set=W,Jo.startOf=fn,Jo.subtract=Wo,Jo.toArray=bn,Jo.toObject=wn,Jo.toDate=yn,Jo.toISOString=on,Jo.inspect=an,Jo.toJSON=$n,Jo.toString=sn,Jo.unix=vn,Jo.valueOf=gn,Jo.creationData=xn,Jo.year=vo,Jo.isLeapYear=ve,Jo.weekYear=Dn,Jo.isoWeekYear=Sn,Jo.quarter=Jo.quarters=En,Jo.month=ue,Jo.daysInMonth=de,Jo.week=Jo.weeks=De,Jo.isoWeek=Jo.isoWeeks=Se,Jo.weeksInYear=Mn,Jo.isoWeeksInYear=jn,Jo.date=Uo,Jo.day=Jo.days=Ae,Jo.weekday=Fe,Jo.isoWeekday=Re,Jo.dayOfYear=On,Jo.hour=Jo.hours=Do,Jo.minute=Jo.minutes=zo,Jo.second=Jo.seconds=Go,Jo.millisecond=Jo.milliseconds=Xo,Jo.utcOffset=ji,Jo.utc=Pi,Jo.local=Li,Jo.parseZone=Ei,Jo.hasAlignedHourOffset=Oi,Jo.isDST=Ii,Jo.isLocal=Fi,Jo.isUtcOffset=Ri,Jo.isUtc=qi,Jo.isUTC=qi,Jo.zoneAbbr=An,Jo.zoneName=Fn,Jo.dates=_("dates accessor is deprecated. Use date instead.",Uo),Jo.months=_("months accessor is deprecated. Use month instead",ue),Jo.years=_("years accessor is deprecated. Use year instead",vo),Jo.zone=_("moment().zone is deprecated, use moment().utcOffset instead. http://momentjs.com/guides/#/warnings/zone/",Mi),Jo.isDSTShifted=_("isDSTShifted is deprecated. See http://momentjs.com/guides/#/warnings/dst-shifted/ for more information",Ai);var Zo=S.prototype;Zo.calendar=j,Zo.longDateFormat=M,Zo.invalidDate=P,Zo.ordinal=L,Zo.preparse=Hn,Zo.postformat=Hn,Zo.relativeTime=E,Zo.pastFuture=O,Zo.set=T,Zo.months=oe,Zo.monthsShort=ae,Zo.monthsParse=le,Zo.monthsRegex=pe,Zo.monthsShortRegex=ce,Zo.week=Ce,Zo.firstDayOfYear=Te,Zo.firstDayOfWeek=xe,Zo.weekdays=Pe,Zo.weekdaysMin=Ee,Zo.weekdaysShort=Le,Zo.weekdaysParse=Ie,Zo.weekdaysRegex=qe,Zo.weekdaysShortRegex=He,Zo.weekdaysMinRegex=Ne,Zo.isPM=ze,Zo.meridiem=Ge,Ze("en",{ordinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(t){var e=t%10,i=1===w(t%100/10)?"th":1===e?"st":2===e?"nd":3===e?"rd":"th";return t+i}}),t.lang=_("moment.lang is deprecated. Use moment.locale instead.",Ze),t.langData=_("moment.langData is deprecated. Use moment.localeData instead.",ei);var Qo=Math.abs,ta=os("ms"),ea=os("s"),ia=os("m"),na=os("h"),sa=os("d"),oa=os("w"),aa=os("M"),ra=os("y"),la=rs("milliseconds"),ha=rs("seconds"),ua=rs("minutes"),da=rs("hours"),ca=rs("days"),pa=rs("months"),fa=rs("years"),ma=Math.round,ga={s:45,m:45,h:22,d:26,M:11},va=Math.abs,ya=ki.prototype;return ya.abs=Kn,ya.add=Jn,ya.subtract=Zn,ya.as=ns,ya.asMilliseconds=ta,ya.asSeconds=ea,ya.asMinutes=ia,ya.asHours=na,ya.asDays=sa,ya.asWeeks=oa,ya.asMonths=aa,ya.asYears=ra,ya.valueOf=ss,ya._bubble=ts,ya.get=as,ya.milliseconds=la,ya.seconds=ha,ya.minutes=ua,ya.hours=da,ya.days=ca,ya.weeks=ls,ya.months=pa,ya.years=fa,ya.humanize=ps,ya.toISOString=fs,ya.toString=fs,ya.toJSON=fs,ya.locale=cn,ya.localeData=pn,ya.toIsoString=_("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",fs),ya.lang=Vo,U("X",0,0,"unix"),U("x",0,0,"valueOf"),J("x",Gs),J("X",Js),ee("X",function(t,e,i){i._d=new Date(1e3*parseFloat(t,10))}),ee("x",function(t,e,i){i._d=new Date(w(t))}),t.version="2.17.1",e(yi),t.fn=Jo,t.min=wi,t.max=$i,t.now=qo,t.utc=u,t.unix=Rn,t.months=Wn,t.isDate=a,t.locale=Ze,t.invalid=f,t.duration=Hi,t.isMoment=y,t.weekdays=Un,t.parseZone=qn,t.localeData=ei,t.isDuration=_i,t.monthsShort=Vn,t.weekdaysMin=Gn,t.defineLocale=Qe,t.updateLocale=ti,t.locales=ii,t.weekdaysShort=zn,t.normalizeUnits=A,t.relativeTimeRounding=ds,t.relativeTimeThreshold=cs,t.calendarFormat=Ui,t.prototype=Jo,t}),define("moment",["vendor/moment"],function(t){return t}),function(t,e){var i;"object"==typeof exports?(i=require("pikaday"),module.exports=e(i)):"function"==typeof define&&define.amd?define("pikarange",["require","pikaday"],function(){return i=require("pikaday"),e(i)}):t.Pikarange=e(t.Pikaday)}(this,function(t){var e=t.util,i=window.document,n=e.addEvent,s=e.removeEvent,o=(e.trim,e.hasClass),a=e.addClass,r=e.removeClass,l=(e.addToDate,e.isDate),h=e.containsElement,u=function(t){return 36e5*24*t},d=function(t){t=t||{};for(var e,i=1;i<arguments.length;i++)if(e=arguments[i])for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t},c=function(e){function c(t,i){if(w.setStartRange(t),k.setStartRange(t),t instanceof Date&&t.getTime()&&!i){var n,s=e.minDate;"undefined"!=typeof k._options.minRange&&(n=t.getTime()+u(k._options.minRange),(!l(s)||n>s)&&(s=new Date(n)));var o=e.maxDate;"undefined"!=typeof k._options.maxRange&&(n=t.getTime()+u(k._options.maxRange),(!l(o)||o>n)&&(o=new Date(n))),k.setMinDate(s),k.setMaxDate(o),k._date&&(k._date<s||k._date>o)&&(k.setDate(null),k.gotoDate(t)),f(w,k,k._date||w._date)}}function p(t){w.setEndRange(t),k.setEndRange(t)}function f(t,e,i){e.calendars=[{month:t.calendars[0].month,year:t.calendars[0].year}],e.adjustCalendars(),i&&e.gotoDate(i)}function m(t){var e,i;h(w.el,t.target)?(e=w,i=k):h(k.el,t.target)&&(e=k,i=w),e&&e!==$&&($=e,f(i,e,e._date),a(e.el,"is-focused"),r(i.el,"is-focused"))}function g(t){return function(i){if(!(e.hideRangeWhenSelected&&w._date&&k._date)){if(!o(i.target,"pika-button"))return!t.outDelay&&t.originalRange&&(t.outDelay=setTimeout(function(){c(t.originalRange[0],!0),p(t.originalRange[1],!0),delete t.originalRange,delete t.outDelay},200)),void 0;clearTimeout(t.outDelay),delete t.outDelay,"undefined"==typeof t.originalRange&&(t.originalRange=[t._options.startRange,t._options.endRange]);var n=i.target;console.log(n.getAttribute("data-pika-day"));var s=new Date(n.getAttribute("data-pika-year"),n.getAttribute("data-pika-month"),n.getAttribute("data-pika-day"));t===w?c(s,!0):p(s,!0)}}}var v,y=e.start.nodeName?{field:e.start}:e.start,b=e.end.nodeName?{field:e.end}:e.end;delete e.start,delete e.end,v=d({},e,y,{autoInit:!1});var w=new t(v),$=w;v=d({},e,b,{autoInit:!1});var k=new t(v);w.isStart=!0,w.end=k,k.isEnd=!0,k.start=w,w.on("change",function(){delete this.originalRange,c(this._date),e.preventSync&&k.isValid()||(k.setDate(null),f(w,k,w._date))}),w.on("select",function(){k._options.bound?(k._options.trigger||k._options.field).focus():k.focusPicker(!0)}),k.on("change",function(){delete this.originalRange,p(this._date)}),k.on("select",function(){w._options.bound||w.focusPicker(!0)}),n(i,"focusin",m),w.on("close",function(){delete this.originalRange}),k.on("close",function(){delete this.originalRange}),w.on("destroy",function(){s(w.el,"mouseover",_),s(k.el,"mouseover",C),k.destroy(),s(i,"focusin",m)}),k.on("init",function(){w.init()}),w.on("init",function(){c(w._date),p(k._date),n(w.el,"mouseover",_),n(k.el,"mouseover",C),a(w.el,"is-focused"),a(w.el,"is-start pika-range"),a(k.el,"is-end pika-range")});var _=g(w),C=g(k);return e.autoInit!==!1&&k.init(),this.startPicker};return c}),define("app/util/SwissDate",["moment"],function(t){function e(e){return"string"==typeof e?t(e,["L","DD.MM.YYYY"]):t(e)}return{parse:function(t){if(!t)return!1;var i=e(t);return i.isValid()?i.toDate():!1},format:function(t){var i=e(t);return i.format("L")}}}),define("app/modules/forms/evo-dateInput",["jquery","moment","pikaday","app/modules/BaseModule","app/Config","app/util/SwissDate"],function($,moment,Pikaday,BaseModule,Config,SwissDate){function EvoDateInput(){this.ns=BaseModule.ns("EvoDateInput")}window.moment=moment;var numPickers=$(window).width()>650?2:1,today=new Date;EvoDateInput.prototype=new BaseModule,EvoDateInput.prototype.init=function(t){this.$el=$(t);var e=this._getPickerOptions();return this.picker=new Pikaday(e),this},EvoDateInput.prototype._getPickerOptions=function(){var element=this.$el.get(0),options={numberOfMonths:numPickers,field:this.$el.get(0),formatFn:function(t){return SwissDate.format(t)},parseFn:function(t){return SwissDate.parse(t)},positionTarget:element,position:"bottom center",reposition:!0,firstDay:moment.localeData().firstDayOfWeek()};options.onOpen=function(){console.log("opening evo date input"),$(this._options.field).trigger("opendatepicker")},options.onClose=function(){console.log("closing datepicker"),$(this._options.field).parents(".js-evo-input, .js-date_range").removeClass("is-datepicker-active"),$(this._options.field).parents(".js-date_range").trigger("closedatepicker")};var disableDayFn;if(this.$el.data("disable-if"))try{eval("disableDayFn = function(date){ with(date) { return !!("+this.$el.data("disable-if")+");}}"),disableDayFn(today),options.disableDayFn=disableDayFn}catch(error){console.log("Could not parse disabled date function: function(date){ with(date) {"+this.$el.data("disable-if")+"}}"),disableDayFn=null}var min=this.$el.data("min"),max=this.$el.data("max");return min&&(options.minDate=SwissDate.parse(min)),max&&(options.maxDate=SwissDate.parse(max)),options};var __super_destroy=EvoDateInput.prototype.destroy;return EvoDateInput.prototype.destroy=function(){this.picker.destroy(),__super_destroy.call(this)},EvoDateInput.prototype.setMinDate=function(t){var e=SwissDate.parse(t);this.picker.setMinDate(e)},EvoDateInput.prototype.setMaxDate=function(t){var e=SwissDate.parse(t);this.picker.setMaxDate(e)},EvoDateInput}),define("app/modules/forms/evo-dateRange",["jquery","pikarange","app/modules/forms/evo-dateInput","app/modules/BaseModule","app/util/SwissDate"],function(t,e,i,n){function s(){this.ns=n.ns("EvoDateRange")}return s.prototype=new i,s.prototype.init=function(i){function n(){s.parents(".js-evo-input").removeClass("is-datepicker-active"),o.parents(".js-evo-input").removeClass("is-datepicker-active"),t(this._options.field).parents(".js-evo-input").addClass("is-datepicker-active")}this.$el=t(i);var s=this.$el.find('input[data-date-range="start"]'),o=this.$el.find('input[data-date-range="end"]'),a=this._getPickerOptions();a.onOpen=function(){console.log("opening datepicker"),n.call(this),t(this._options.field).parents(".js-date_range").addClass("is-datepicker-active").trigger("opendatepicker")},a.onFieldChange=n,a.preventSync=!0,a.onClose=function(){console.log("closing datepicker"),t(this._options.field).parents(".js-evo-input, .js-date_range").removeClass("is-datepicker-active"),t(this._options.field).parents(".js-date_range").trigger("closedatepicker")},delete a.field,a.start=s.get(0),a.end=o.get(0),a.minRange=this.$el.data("range-min")||0;var r=this.$el.data("range-max");return r&&(a.maxRange=Number(r)),this.picker=new e(a),this},s}),define("app/modules/forms/inputCheckboxCustom",["jquery","app/modules/BaseModule"],function(t,e){var i,n=".bookingbar",s=0;return i=function(){this.$el=null,this.ns=n+s++},i.prototype=new e,i.prototype.init=function(e){return this.$el=t(e),this.initVariables(),this.bindUIActions(),this.updateState(),this},i.prototype.initVariables=function(){this.$inputField=this.$el.find(".js-input_checkbox_custom--field")},i.prototype.bindUIActions=function(){this.$inputField.on("click"+n,this.bind(this.clickHandler))},i.prototype.clickHandler=function(){this.updateState()},i.prototype.updateState=function(){this.$inputField.is(":checked")?this.$el.addClass("is-checked"):this.$el.removeClass("is-checked")},i}),define("app/modules/forms/autoDisable",["jquery","app/modules/BaseModule"],function(t,e){var i,n=".AutoDisable",s=0;return i=function(){this.$el=null,this.ns=n+s++},i.prototype=new e,i.prototype.init=function(e){var i=this;this.$el=t(e),this.$el.is(":checkbox")&&(this.defaultState=this.$el.is(":checked")),this.check();var n=this.$el.data("enable-when");for(var s in n)t("#"+s).on("change",function(){i.check()});return this},i.prototype.check=function(){var t=this.validate();this.$el.prop("disabled",!t),t||void 0===this.defaultState||this.$el.attr("checked",this.defaultState)},i.prototype.validate=function(){var e,i,n=this.$el.data("enable-when");for(var s in n){e=t("#"+s),i=n[s];for(var o in i)if("checked"==o){if(e.prop("checked")!=i[o])return!1}else if("value"==o&&e.val()!=i[o])return!1}return!0},i}),define("app/modules/helpers/flyout",["jquery","app/util/AjaxLoader","app/util/Capabilities","lib/browser/KeyCode","lib/browser/Accessibility"],function(t,e,i){function n(t){return t.offset()}var s,o=".flyout",a=0,r=t("#site-container");r.length||(r=t("#body")),r.length||(r=t("body"));var l={top:!0,bottom:!0,align:"center",focusElements:"input:visible, select:visible, textarea:visible, a:visible, button:visible",handleTabKey:!0,data:{}};return s=function(){this.$el=null,this.ns=o+a++,this.id="flyout-target-"+a},s.prototype.init=function(e,i){return this.target=e,this.$wrapper=t("<div></div>").attr("data-flyout-for",this.target.split("#")[1]),this.options=t.extend({},l,i),this},s.prototype.destroy=function(){this.$target&&(this.$target=null),this.$wrapper&&this.$wrapper.remove()},s.prototype.getTarget=function(){return this.$wrapper},s.prototype.open=function(e,i){var n=t.Deferred(),s=this;if(this.options,this.$el=t(e),this.isOpen)return n;if(this.createTarget(function(){n.resolve(s.$target)}),this.options.data.appendTo)if("parent"===this.options.data.appendTo)this.$el.parent().append(this.$wrapper);else{var o=t(this.options.data.appendTo);o.length?o.append(this.$wrapper):r.append(this.$wrapper)}else r.append(this.$wrapper);return n.done(i),n.done(function(){s._open()}),n},s.prototype._open=function(){var e=this,i=this.$target;i.find(".js-flyout-inner"),i.show(),i.attr("aria-hidden","false"),this.$el.addClass("is-flyout-active");var n="bottom";if(this.options.top)if(this.options.bottom){var s=this.$el.offset(),o=this.$el.height(),a=t(document).scrollTop(),r=s.top-a+o/2>t(window).height()/2;n=r?"top":"bottom"}else n="top";return this.position=n,"top"==n?(i.removeClass("is-b"),i.addClass("is-t")):(i.removeClass("is-t"),i.addClass("is-b")),this.isOpen=!0,this.repositionTarget(!0),t(window).on("resize"+this.ns,function(){e.repositionTarget()}),this.$target},s.prototype.close=function(){if(this.isOpen){this.releaseFocus&&(this.releaseFocus(),this.releaseFocus=null),t(document).off(this.ns),t(window).off(this.ns),this.$el.removeClass("is-flyout-active");var e=this.$target;e.hide(),e.attr("aria-hidden","true"),this.isOpen=!1}},s.prototype.repositionTarget=function(e){if(this.isOpen){var s=this.$target,o=s.children(".js-flyout-inner"),a=s.find(".js-indicator-t, .js-indicator-b");"top"==this.position&&(a=s.find(".js-indicator-b"));var r,l=o.parent().offset().left,h=l+o.parent().width(),u=n(this.$el),d=this.$el.outerHeight(),c=this.$el.outerWidth(),p=a.outerWidth(),f=o.outerWidth(),m=o.outerHeight(),g=t(document).scrollTop(),v=t(window).height(),y=u.top+("top"==this.position?0:d);switch(this.options.align){case"left":r=u.left;break;case"right":r=u.left+c-f;break;default:r=u.left+c/2-f/2}this.options.data.fixedParent&&(y-=g);var b=s.offsetParent();"fixed"!==b.css("position")&&(y-=b.offset().top);var w=0;l>r&&(w=l-r),r+f>h&&(w=h-(r+f)),s.css({position:"absolute",top:y,zIndex:2e4}),o.css({marginLeft:r+w-l}),r=f/2-p/2,r-=w,0>r&&(r=0),r+p>f&&(r=f-p),a.css({marginLeft:r}),e&&!i.system.windowsphone&&("bottom"==this.position&&y+m>g+v?t("body, html").animate({scrollTop:Math.min(u.top,y+m-v)},200):"top"==this.position&&g>y-m&&t("body, html").animate({scrollTop:Math.max(y-v+d,y-m)},200))}},s.prototype.refresh=function(){this.createTargetDeferred=null},s.prototype.createTarget=function(t){var i=this,n=this.target;if(!this.createTargetDeferred){this.$wrapper.children().remove();var s=new e(this.$wrapper);this.createTargetDeferred=s.load(n,{data:this.options.data}),this.createTargetDeferred.done(function(t){i.$target=t})}this.createTargetDeferred.done(t)},s.prototype.createFromTemplate=function(e){var i=t(t.parseHTML(t.trim(e)));return i.attr("id",this.id).hide(),t("body").append(i),i},s}),define("lib/browser/Pointer",[],function(){function t(){}function e(t,e){if(!e)return t;
for(var i=t.split(" "),n=i.length-1;n>=0;n--)i[n]=i[n]+e;return i.join(" ")}var i={mousedown:["mousemove","mouseup"],touchstart:["touchmove","touchend"],pointerdown:["pointermove","pointerup"],MSPointerDown:["MSPointerMove","MSPointerUp"]};return t.dragstart=function(t){return e("touchstart mousedown pointerdown MSPointerDown",t)},t.dragmove=function(t,n){return n?e(i[n.type][0],t):e("touchmove mousemove pointermove MSPointerMove",t)},t.dragend=function(t,n){return n?e(i[n.type][1],t):e("touchend mouseup pointerup MSPointerUp",t)},t.getEventPosition=function(t,e){return e||(e="page"),t.originalEvent.touches?{x:t.originalEvent.touches[0][e+"X"],y:t.originalEvent.touches[0][e+"Y"]}:void 0!==t.originalEvent.pageX?{x:t.originalEvent[e+"X"],y:t.originalEvent[e+"Y"]}:{x:t[e+"X"],y:t[e+"Y"]}},t.isTouchEvent=function(t){return t?"touchstart"===t.type||"touch"===t.pointerType:!1},t}),define("app/modules/helpers/flyout-trigger",["jquery","app/modules/helpers/flyout","lib/browser/Pointer","app/util/AccessibleMenu","app/util/FocusCloser"],function(t,e,i,n,s){function o(t){t.preventDefault()}var a,r=".flyout-trigger",l=0;t("#site-page");var h;return a=function(){this.$el=null,this.ns=r+l++,this.options={overDelay:100,outDelay:500,accessible:!0,data:{}},this.focusCloser=new s},a.prototype.init=function(i){this.$el=t(i),this.$el.attr({"aria-haspopup":"true"});var s=this.$el.data("flyout-target")||this.$el.attr("href");return this.options.data=this.$el.data("flyout"),this.flyout=new e,this.flyout.init(s,{data:this.options.data}),this.options.accessible&&(this.aaMenu=new n(this.$el,this.flyout.getTarget())),this.isHover=this.hasBehavior("hover"),this.isFocus=this.hasBehavior("focus"),this.isInteractive=this.hasBehavior("interactive"),this.isHover&&this.prepareHover(),this.listenForOpen(),this},a.prototype.destroy=function(){this.$el&&(this.removeListeners(),this.flyout.destroy(),this.flyout=null,this.$el=null),this.aaMenu&&this.aaMenu.destroy()},a.prototype.open=function(){var t=this;if(!this.isOpen){h&&h.close(),this.positions||(this.positions=this.parsePositions(),this.flyout.options.align=this.positions.align,"undefined"!=typeof this.positions.top&&(this.flyout.options.top=this.positions.top),"undefined"!=typeof this.positions.bottom&&(this.flyout.options.bottom=this.positions.bottom));var e=this.flyout.open(this.$el);e.then(function(){t.$el.removeClass("is-loading")}),this.flyout.loading&&this.$el.addClass("is-loading"),h=this;var i=this.flyout.getTarget().add(this.$el);return this.isHovered||!Capabilities.touch?(i.addClass("is-hovered"),i.removeClass("is-not-hovered")):(i.addClass("is-not-hovered"),i.removeClass("is-hovered")),this.$el.addClass("is-flyout-active"),this.isOpen=!0,this.removeListeners(),this.$el.on("click",o),this.isHovered?this.listenForClose():setTimeout(function(){t.listenForClose()},0),this.$el.trigger("flyout_open"),e}},a.prototype.close=function(){this.isOpen&&(h=null,this.flyout.close(),this.$el.removeClass("is-flyout-active"),this.removeListeners(),this.listenForOpen(),this.isOpen=!1,this.$el.trigger("flyout_close"))},a.prototype.refresh=function(){this.flyout.refresh(),this.isOpen&&(this.close(),this.isHovered=this.wasHovered,this.open())},a.prototype.listenForOpen=function(){var e=this,n=function(t){t&&t.preventDefault(),e.open(t)};this.isHover?(this.$el.on("mouseenter"+this.ns,this.hoverOpen),this.$el.on("mouseleave"+this.ns,this.hoverClose),this.$el.on(i.dragstart(this.ns),n),this.isFocus?(this.$el.on("focusin"+this.ns,this.hoverOpen),this.$el.on("focusout"+this.ns,this.hoverClose)):this.$el.on("click"+this.ns,this.hoverOpen)):this.$el.on("click"+this.ns,n),this.aaMenu&&this.aaMenu.handleClosed(n),t(document).on("flyout.close",function(){e.close()})},a.prototype.listenForClose=function(){function e(e){t(e.target);var s=t.contains(i.$el[0],e.target)||e.target==i.$el[0],o=t.contains(n[0],e.target)||n[0]==e.target;s||o||i.close()}var i=this,n=this.flyout.getTarget(),s=function(t){t&&t.preventDefault(),i.close()};this.isHover&&this.isHovered&&(this.$el.on("mouseleave"+this.ns,this.hoverLeave),this.$el.on("mouseenter"+this.ns,this.hoverEnter),this.isInteractive&&(n.on("mouseleave"+this.ns,this.hoverLeave),n.on("mouseenter"+this.ns,this.hoverEnter))),t(document).on("touchstart"+this.ns,e),t(document).on("mousedown"+this.ns,e),this.$el.on("click"+this.ns,s),this.aaMenu?this.aaMenu.handleOpen(s):this.focusCloser.listen(e),this.$el.on("click"+this.ns,function(t){t.preventDefault()}),n.on("click"+this.ns,".js-flyout-close",function(t){t.preventDefault(),i.close()}),this.wasHovered=this.isHovered,this.isHovered=!1},a.prototype.removeListeners=function(){t(window).off(this.ns),t(document).off(this.ns),this.$el.off(this.ns),this.focusCloser.unlisten()},a.prototype.prepareHover=function(){var t,e=this;this.aaMenu&&this.aaMenu.$menu.addClass("is-hover"),this.hoverEnter=function(){clearTimeout(t)},this.hoverLeave=function(){clearTimeout(t),t=setTimeout(function(){e.close()},e.options.outDelay)},this.hoverOpen=function(i){i.preventDefault();var n="mouseenter"==i.type;clearTimeout(t),h?(e.isHovered=n,e.open()):t=setTimeout(function(){e.isHovered=n,e.open()},e.options.overDelay)},this.hoverClose=function(){clearTimeout(t)}},a.prototype.hasBehavior=function(e){return this.behavior||(this.behavior=this.$el.data("flyout-behavior"),this.behavior=this.behavior?this.behavior.split(","):[]),t.inArray(e,this.behavior)>=0},a.prototype.on=function(t,e,i){this.$el.on(t+this.ns,e,i)},a.prototype.parsePositions=function(){var t={align:"center"},e=this.hasBehavior("top"),i=this.hasBehavior("bottom");return e&&(t.top=!0),(i||!e)&&(t.bottom=!0),this.hasBehavior("left")&&(t.align="left"),this.hasBehavior("right")&&(t.align="right"),t},a}),define("app/modules/content/flyout-tooltip",["jquery","lib/util/Templates","app/modules/helpers/flyout-trigger"],function(t,e,i){var n,s=".flyout-tooltip",o=0;return n=function(){this.trigger=null,this.$target=null,this.$el=null,this.ns=s+o++,this.id="flyout-tooltip-target-"+o,this.text="",this.options={overDelay:500,outDelay:500,accessible:!1,data:{}}},n.prototype.init=function(e){var n=this;this.trigger=new i;var s=this.$el=t(e);if(this.text=s.data("tooltip-text")||s.attr("title"),s.attr("data-tooltip-text",this.text),s.removeAttr("title"),(s.hasClass("frm-tooltip-icon")||"#"==s.attr("href"))&&(s.attr("role","note"),s.append('<span class="is-visuallyhidden">'+this.text+"</span>")),s.on("click"+this.ns,function(){s.attr("href")&&s.is("a")&&!s.data("lightbox")&&(document.location.href=s.attr("href"))}),this.text){var o=this.trigger.open;return this.trigger.open=function(){n.createTarget(),o.apply(this,arguments)},s.data("flyout-target","#"+this.id),s.data("flyout-behavior","hover,focus,top,bottom"),this.trigger.options=this.options,this.trigger.init(e),this}},n.prototype.createTarget=function(){if(!this.$target){var i=e.render("flyout-tooltip-template"),n=t(t.parseHTML(t.trim(i)));t("body").append(n),this.$target=n,this.$target.attr("id",this.id).hide()}this.$target.find(".tooltip-text").text(this.text)},n.prototype.destroy=function(){this.trigger.destroy(),this.$el&&(this.$el.off(s),this.$el=null)},n}),define("app/modules/content/notification",["jquery","app/modules/BaseModule","lib/browser/Accessibility"],function(t,e,i){var n,s=".notification",o=0;return n=function(){this.$el=null,this.ns=s+o++},n.prototype=new e,n.prototype.init=function(e){var n=this;return this.$el=t(e),this.on("click",".js-notification-close",function(t){t.preventDefault(),n.$el.slideUp("fast",function(){n.$el.remove(),window.dispatchEvent(new Event("resize")),n.destroy()})}),this.$el.hasClass("notification-error")&&1===t(".notification-error:visible").length&&i.focusFirstText(this.$el),this},n}),define("app/util/DOMUtil",["jquery"],function(t){function e(e,i){e||(e=document.activeElement);var n=t(e),o=n.parents("form").first();o.length||(o=t("body"));var a=o.find('input:visible, select:visible, textarea:visible, button:visible:not([type="button"])');a.filter(function(){return t(this).attr("tabindex")>=0});var r=a.index(e);if(!(0>r||r+1>=a.length))if(r+=i,r>=0&&r<a.length){n.blur();var l=a.eq(r);if(l.hasClass("js-date_input"))return setTimeout(function(){l.trigger("click").focus()},0),void 0;l.focus(),s||setTimeout(function(){l.focus()},10)}else n.blur()}function i(t,e,i){var n;if(window.MutationObserver){var s=new MutationObserver(function(n){n.forEach(function(n){n.attributeName==e&&i.call(t,e)})});s.observe(t,{attributes:!0,subtree:!1}),n=function(){s.disconnect()}}else{var o=function(n){n.target==t&&n.attrName==e&&i.call(t,e)};t.addEventListener("DOMAttrModified",o,!1),n=function(){t.removeEventListener("DOMAttrModified",o,!1)}}return{cancel:n}}function n(t,e){var i=document.createEvent("HTMLEvents");i.initEvent(e,!0,!0),t.dispatchEvent(i)}var s="ontouchstart"in window,o={onAttr:i,dispatchEvent:n,focusNextInput:function(t){e(t,1)},focusPrevInput:function(t){e(t,-1)},focusInput:function(t){t.focus()},triggerResize:function(){var e=this;this.resizeTimeout||(this.resizeTimeout=setTimeout(function(){e.resizeTimeout=!1,t(window).trigger("resize")},10))}};return o}),define("app/modules/helpers/autocomplete",["jquery","lib/util/Templates","app/util/DOMUtil","app/modules/BaseModule","app/modules/helpers/flyout","app/modules/helpers/JSONP","lib/browser/Accessibility","app/Config"],function(t,e,i,n,s,o,a,r){var l,h=".autocomplete",u=0;return l=function(){this.$el=null,this.ns=h+u++,this.query=new o,this.value=""},l.prototype=new n,l.prototype.init=function(e){this.$el=t(e),this.query.init(this.$el.data("autocomplete-src"),this.bind(this.handleResult)),this.template=this.$el.data("autocomplete-tpl")||"autocomplete-location";var i=this.$el.data("autocomplete-target");return this.defaultBodyHtml="",i?(this.flyout=null,this.$body=t("#"+i),this.defaultBodyHtml=this.$body.html()):(this.flyout=new s,this.flyout.init("#flyout-autocomplete-template",{handleTabKey:!1,top:!1}),this.flyout.createTarget(),this.$body=this.flyout.getTarget().find(".js-autocomplete-body")),this.$body.on("mouseenter"+this.ns,".js-autocomplete-item",this.bind(function(t){this.selectItem(t.currentTarget)})),this.$body.on("mouseleave"+this.ns,".js-autocomplete-item",this.bind(function(){this.selectItem(-1)})),this.$body.on("mousedown"+this.ns+" "+"touchstart"+this.ns,".js-autocomplete-item",this.bind(function(t){t.preventDefault(),this.selectItem(t.currentTarget),this.complete()})),this.listenWhenClosed(),this},l.prototype.handleInput=function(t){var e=this.$el.val();if(e!=this.value){this.value=e;var i=!t&&this.$el.data("placeholder-active")&&this.$el.attr("placeholder")==e;this.value&&!i?this.query.search(this.value):(this.$body.html(this.defaultBodyHtml),this.flyout&&this.flyout.close())}},l.prototype.handleResult=function(t){if(clearTimeout(this.closeTimeout),!t)return this.flyout&&this.flyout.close(),void 0;var i=e.render(this.template,t);i&&(this.$body.html(i),this.flyout&&(this.flyout.open(this.$el),this.$body.css("min-width",this.$el.outerWidth()),this.flyout.repositionTarget()),this.selectItem(0))},l.prototype.handleBlur=function(){clearTimeout(this.closeTimeout),this.closeTimeout=setTimeout(this.bind(function(){this.flyout&&this.flyout.close(),this.listenWhenClosed()}),100)},l.prototype.handleFocus=function(){this.value="",this.handleInput(),this.listenWhenOpen()},l.prototype.getItems=function(){return this.$body.find(".js-autocomplete-item")},l.prototype.selectItem=function(t){var e=this.getItems();"number"!=typeof t&&(t=e.index(t)),e.removeClass("active"),t>=0&&t<e.length&&e.eq(t).addClass("active"),a.speak(e.eq(t).text()+(r.get("locale","autocomplete-instruction")||""))},l.prototype.getSelectedIndex=function(){var t=this.getItems();return t.index(t.filter(".active").first())},l.prototype.selectBy=function(t){var e=this.getItems(),i=this.getSelectedIndex()+t;0>i?i=0:i>=e.length&&(i=e.length-1),this.selectItem(i)},l.prototype.complete=function(){var e=this.getItems(),n=e.filter(".active").first();return n.length?(n.attr("href")?(this.flyout?this.flyout.close():t(document).trigger("flyout.close"),n.hasClass("js-ajax-update")||(document.location.href=n.attr("href"))):(this.$el.val(n.data("autocomplete")||n.text()).trigger("change",["autocomplete"]),i.focusNextInput(this.$el)),!0):!1},l.prototype.listenWhenOpen=function(){this.removeListeners(),t(document).on("keydown"+this.ns,this.bind(function(t){var e=9,i=13,n=38,s=40;if(this.$el,!(t.altKey||t.shiftKey||t.metaKey||t.ctrlKey))if(t.keyCode===i||t.keyCode===e)this.complete()&&t.preventDefault();else if(t.keyCode==n||t.keyCode==s){t.preventDefault();var o=t.keyCode==n?-1:1;this.selectBy(o)}})),this.on("keyup",this.bind(this.handleInput)),this.on("blur",this.bind(this.handleBlur))},l.prototype.listenWhenClosed=function(){this.removeListeners(),this.on("focus",this.bind(this.handleFocus))},l.prototype.removeListeners=function(){this.$el.off(this.ns),t(document).off(this.ns),t(window).off(this.ns)},l.prototype.destroy=function(){this.$el&&(this.removeListeners(),this.$body.off(this.ns),this.$el=null)},l}),define("app/modules/helpers/collapsable-trigger",["jquery","app/util/DOMUtil","lib/browser/Accessibility"],function(t,e,i){function n(e,i){for(var n=e.parents(),s=0;s<n.length;s++){var o=n.eq(s),a=o.find(i);if(a.length)return a.eq(0);if(o.is(i))return o}return t("<div>")}var s,o=".collapsable-trigger";return s=function(){this.$element=null,this.$target=null,this.ns=o},s.prototype.init=function(n){var s=this;return this.$element=t(n),this.targetSelector=this.$element.data("toggletarget")||".js-collapsable",this.hiddenClass=this.$element.data("targetclass")||"",this.visibleClass=this.hiddenClass?"":this.$element.data("visibleclass")||"is-visible",this.$element.attr({"aria-pressed":"false",role:"button"}),this.validate(),this.on("click",function(t){t.preventDefault(),s.$element.toggleClass("is-active-collapsable-trigger"),s.getTarget().toggleClass(s.hiddenClass),s.getTarget().toggleClass(s.visibleClass),s.validate(),i.focus(s.getTarget()),e.triggerResize()}),this},s.prototype.open=function(){this.$element.addClass("is-active-collapsable-trigger"),this.getTarget().removeClass(this.hiddenClass),this.getTarget().addClass(this.visibleClass),this.validate(),e.triggerResize()},s.prototype.close=function(){this.$element.removeClass("is-active-collapsable-trigger"),this.getTarget().addClass(this.hiddenClass),this.getTarget().removeClass(this.visibleClass),this.validate(),e.triggerResize()},s.prototype.validate=function(){var t=this.getTarget().hasClass(this.visibleClass)||this.getTarget().hasClass(this.hiddenClass);this.$element.attr("aria-pressed",t?"true":"false")},s.prototype.isOpen=function(){return this.hiddenClass?!this.getTarget().hasClass(this.hiddenClass):this.getTarget().hasClass(this.visibleClass)},s.prototype.destroy=function(){this.$element&&(this.$element.off(o),this.$element=null)},s.prototype.getTarget=function(){return this.$target||(this.$target=this.targetSelector.indexOf("#")>=0?t(this.targetSelector):n(this.$element,this.targetSelector)),this.$target},s.prototype.on=function(t,e,i){this.$element.on(t+o,e,i)},s}),define("app/modules/helpers/expandable-trigger",["jquery","app/modules/BaseModule","app/util/DOMUtil","lib/browser/Accessibility"],function(t,e){function i(e,i,n,s){var o=t(e),a=o.data("target")||o.attr("href"),r=t(a);o.attr("aria-expanded",i?"true":"false"),i?r.addClass(n).removeClass(s):r.removeClass(n).addClass(s)}function n(t,e){i(e,!1,this.options.visibleClass,this.options.hiddenClass)}function s(t,e){i(e,!0,this.options.visibleClass,this.options.hiddenClass)}var o;return o=function(){this.$element=null,this.$target=null,this.ns=e.ns("ExpandableTrigger")},o.prototype=new e,o.prototype.init=function(e){return this.$el=t(e),this.options={},this.options.group=this.$el.data("group"),this.options.visibleClass=this.$el.data("class-visible")||"",this.options.hiddenClass=this.$el.data("class-hidden")||"",this.options.collapse=!this.options.group||"collapse"==this.$el.data("mode"),this.on("click",this.bind(function(t){t.preventDefault(),this.isOpen()?this.options.collapse&&this.close():this.open()})),this},o.prototype.open=function(){this.options.group&&t('.js-expandable-trigger[data-group="'+this.options.group+'"]').each(this.bind(n)),this.$el.each(this.bind(s))},o.prototype.close=function(){this.$el.each(this.bind(n))},o.prototype.isOpen=function(){return"true"==this.$el.attr("aria-expanded")},o}),define("app/modules/helpers/expandable",["jquery","app/modules/BaseModule","app/util/DOMUtil"],function(t,e,i){function n(){this.ns=e.ns("Expandable")}function s(e){var i="#"+e.split(" ").join(",#");return t(i)}n.prototype=new e,n.prototype.init=function(e){return this.$el=t(e),this.id=e.id,this.attrListener=i.onAttr(e,"aria-expanded",this.bind(this.invalidate)),this.invalidate(),this},n.prototype.invalidate=function(){this.validate()},n.prototype.validate=function(){var e=this.id,i="true"==this.$el.attr("aria-expanded"),n=t(".js-expandable--trigger[aria-controls]");n=n.filter(function(){return t(this).attr("aria-controls").split(" ").indexOf(e)>=0}),n.filter(":checkbox, :radio").prop("checked",i),n.filter('button, [role="button"]').prop("aria-expanded",i),i&&n.filter("select").val(e)};var o=n.prototype.destroy;return n.prototype.destroy=function(){this.attrListener&&this.attrListener.cancel(),o.call(this)},t(document).on("change",".js-expandable--trigger:checkbox[aria-controls], .js-expandable--trigger:radio[aria-controls]",function(){var e=s(t(this).attr("aria-controls"));e.attr("aria-expanded",this.checked?"true":"false")}),t(document).on("click","button.js-expandable--trigger[aria-controls]",function(){var e="true"==t(this).attr("aria-expanded"),i=s(t(this).attr("aria-controls"));i.attr("aria-expanded",e?"false":"true")}),t(document).on("change","select.js-expandable--trigger[aria-controls]",function(){var e=t(this).val(),i=s(t(this).attr("aria-controls"));i.each(function(){t(this).attr("aria-expanded",this.id==e?"true":"false")})}),n}),define("app/modules/nav/originChooser",["jquery"],function(t){var e,i=".origin-chooser";return e=function(){this.$element=null,this.$mainPanes=null,this.$activeMainPane=null,this.$activePane=null},e.prototype.init=function(e){var i=this;this.$element=t(e),this.$mainPanes=this.$element.find(".tabs-pane"),this.on("click",".js-origin-chooser-trigger",function(e){e.preventDefault(),i.showDetail(t(this))}),this.on("click",".origin-region a",function(t){t.preventDefault(),i.hideDetail()}),this.on("click",".js-tabs-link",function(t){t.preventDefault(),i.reset(),setTimeout(function(){i.getActiveMainPane().find(".js-origin-chooser-trigger").first().focus()},10)})},e.prototype.showDetail=function(e){var i,n;return i=e,n=t(i.attr("href")),this.$activeMainPane=this.getActiveMainPane(),n.length?(this.$activeMainPane.hide(),this.$activePane=n,n.show(),n.find(".origin-link-airport").first().focus(),void 0):"can not find target: "+i.attr("href")},e.prototype.getActiveMainPane=function(){return this.$mainPanes.filter(".is-active")},e.prototype.reset=function(){this.$activeMainPane&&this.$activeMainPane.attr("style",""),this.$activePane&&this.$activePane.hide(),this.$activeMainPane=null,this.$activePane=null},e.prototype.hideDetail=function(){this.getActiveMainPane().show(),this.$activePane.hide()},e.prototype.destroy=function(){this.$element&&(this.$element.off(i),this.$element=null)},e.prototype.on=function(t,e,n){this.$element.on(t+i,e,n)},e}),define("app/modules/nav/skipNav",["jquery"],function(t){var e,i=".skip-navigation";return e=function(){this.activeModule=null},e.prototype.init=function(e){return this.element=e,this.$element=t(e),this.on("click","a[href^='#']",function(){t("#"+t(this).attr("href").slice(1)).focus()}),this},e.prototype.registerModule=function(t){this.activeModule&&this.activeModule.destroy(),this.activeModule=new t,this.activeModule.init(this.element)},e.prototype.destroy=function(){this.$element&&(this.$element.off(i),this.$element=null)},e.prototype.on=function(t,e,n){this.$element.on(t+i,e,n)},e}),define("app/modules/nav/SiteSearch",["jquery","app/modules/BaseModule","lib/browser/KeyCode"],function(t,e,i){var n,s=".SiteSearch",o=0;n=function(){this.$el=null,this.ns=s+o++,this.nstemp=this.ns+"temp"};var a={minLength:2};return n.prototype=new e,n.prototype.init=function(e){return this.$el=t(e),this.lastSearchTerm="",this.bindListeners(),this},n.prototype.bindListeners=function(){this.on("click",".js-site_search--close",this.bind(this.onCloseButtonClick)),this.$el.on("keyup"+this.ns,".js-site_search--input",this.bind(this.onSearchChange)),this.on(document,"click",".js-site_search--trigger",this.bind(this.onTriggerClick)),this.on(document,"click",".js-mobile-search-trigger",this.bind(this.onMobileTriggerClick))},n.prototype.onMobileTriggerClick=function(){t(".js-mobile-nav-trigger:eq(0)").trigger("click")},n.prototype.onTriggerClick=function(t){t.preventDefault(),this.open()},n.prototype.onCloseButtonClick=function(t){t.preventDefault(),this.close()},n.prototype.onKeyDown=function(t){var e=t.keyCode;e===i.ESC&&this.close()},n.prototype.onBodyClick=function(e){t(e.target).closest(".js-site_search").length||this.close()},n.prototype.open=function(){this.$el.addClass("is-visible"),t(".js-site-header--overlay").prepareTransition().addClass("is-visible"),t(".js-mainnavigation").addClass("is-site_search-visible"),t(".js-meta_nav").addClass("is-site_search-visible"),t("html").addClass("is-header-sticky"),t(document).on("keydown"+this.nstemp,this.bind(this.onKeyDown)),t("body").on("click"+this.nstemp,this.bind(this.onBodyClick)),setTimeout(this.bind(function(){this.$el.find('input[type="text"]').focus()}))},n.prototype.close=function(){this.$el.removeClass("is-visible"),t(".js-site-header--overlay").prepareTransition().removeClass("is-visible"),t(".js-mainnavigation").removeClass("is-site_search-visible"),t(".js-meta_nav").removeClass("is-site_search-visible"),t("html").removeClass("is-header-sticky"),this.resetForm(),t(document).off("keydown"+this.nstemp),t("body").off("click"+this.nstemp)},n.prototype.resetForm=function(){this.$el[0].reset()},n.prototype.handleFocus=function(){},n.prototype.onSearchChange=function(e){var i=t(e.currentTarget),n=i.val();t(".js-site_search--suggestions");var s=this;n.length>=a.minLength?n!==this.lastSearchTerm&&this.loadResults(n,function(){s.setSearchResultVisibility(!0)}):s.setSearchResultVisibility(!1)},n.prototype.loadResults=function(e,i){var n=this,s=n.$form.attr("action");this.$el.addClass("is-loading"),this.lastSearchTerm=e,this.$xhr&&this.$xhr.abort(),this.$xhr=t.ajax({type:n.$form.attr("type"),data:n.$form.serialize(),url:s,dataType:"html",success:function(e){var s=t(e);n.$el.removeClass("is-loading"),t(".js-site_search--suggestions").html(s.find(".js-site_search--suggestions").html()),i&&"function"==typeof i&&i.call()}})},n.prototype.setSearchResultVisibility=function(e){var i=t(".js-site_search--suggestions");e?i.prepareTransition().addClass("is-visible"):i.hasClass("is-visible")&&i.prepareTransition().removeClass("is-visible")},n.prototype.off=function(){t(".js-site_search--trigger").off(this.ns),this._superDestroy()},n}),define("app/modules/stages/stages",["jquery","app/plugins/mediaDispatcher","app/util/Capabilities"],function(t,e,i){var n,s,o;s=t(window),o=t(document);var a=!!navigator.userAgent.match(/webkit/i);return n=function(){this.$el=null,this.$layer=null,this.topPosition=0,this.height=0,this.bottomPosition=0,this.created=!1,this.ratio=.4},n.prototype.init=function(i){return this.$el=t(i),this.$layer=this.$el.find(".stage-layer").eq(0),this.create(),e.isOrBelow("mobile").then(this.endParallax,this).otherwise(this.startParallax,this),this.$el.addClass("is-loaded"),this},n.prototype.destroy=function(){this.$el=null,this.$layer=null,e.is("mobile").unlisten(this),this.endParallax()},n.prototype.createImageLayer=function(e){if(e=this.$el.find(".stage-image"),!e.length){var i=this.$layer.css("background-image").match(/url\((.+)\)/)[1];i=i.split('"').join(""),i&&(e=t("<img />",{"class":"stage-image",src:i}),this.$layer.after(e))}return e[0]},n.prototype.endParallax=function(){o.off(".stagesParallax"),s.off(".stagesParallax"),this.$layer.css({height:"100%",transform:"none",marginTop:0})},n.prototype.create=function(){this.created||(this.created=!0,Modernizr.backgroundsize||(this.createImageLayer(this.$el.find("img:eq(0)"))?this.$layer.hide():this.$el.hide()))},n.prototype.startParallax=function(){var t=this;return this.create(),i.touch?(this.endParallax(),void 0):(s.on("resize.stagesParallax",function(){t.topPosition=t.$el.offset().top,t.height=t.$el.height(),t.bottomPosition=t.topPosition+t.height,t.$layer.height((t.ratio+1)*t.height)}).trigger("resize.stagesParallax"),s.on("scroll.stagesParallax",function(){var e=s.scrollTop();e<=t.bottomPosition&&(Modernizr.csstransforms3d&&a?t.$layer.css("transform","translateY("+(t.topPosition-e)*-1*(this.ratio||.4)+"px) translateZ(0px)"):Modernizr.csstransforms?t.$layer.css("transform","translate(0,"+(t.topPosition-e)*-1*(this.ratio||.4)+"px)"):t.$layer.css("margin-top",(t.topPosition-e)*-1*this.ratio+"px"))}).trigger("scroll.stagesParallax"),void 0)},n.prototype.blurIn=function(){this.$el.addClass("is-subnav-open")},n.prototype.blurOut=function(){this.$el.removeClass("is-subnav-open")},n}),define("app/modules/stages/interactiveStage",["jquery","app/modules/BaseModule","threejs"],function(t,e,i){function n(){this.ns=e.ns("InteractiveStage"),this.nstemp=this.ns+"_temp",this.animateScene=this.animateScene.bind(this),this.onDocumentMouseMove=this.onDocumentMouseMove.bind(this),this.onWindowResize=this.onWindowResize.bind(this),this.onDeviceOrientation=this.onDeviceOrientation.bind(this)}return n.prototype=new e,n.prototype.init=function(e){return this.$el=t(e),this.mouseX=0,this.mouseY=0,this.tiltX=0,this.tiltY=0,this.startTime=Date.now(),this.windowHalfX=this.$el.width()/2,this.windowHalfY=this.$el.height()/2,this.cloudTexture=this.$el.find(".js-interactive_stage--texture").css("background-image").replace(/^url\(["']?/,"").replace(/["']?\)$/,""),this.vs="varying vec2 vUv;void main() {   vUv = uv;   gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );}",this.fs="uniform sampler2D map;uniform vec3 fogColor;uniform float fogNear;uniform float fogFar;varying vec2 vUv;void main() {   float depth = gl_FragCoord.z / gl_FragCoord.w;   float fogFactor = smoothstep( fogNear, fogFar, depth );   gl_FragColor = texture2D( map, vUv );   gl_FragColor.w *= pow( gl_FragCoord.z, 20.0 );   gl_FragColor = mix( gl_FragColor, vec4( fogColor, gl_FragColor.w ), fogFactor );}",this.initScene(),this},n.prototype.initScene=function(){this.container=document.createElement("div"),this.$el.append(this.container),this.canvas=document.createElement("canvas"),this.canvas.width=32,this.canvas.height=this.$el.height();var t=this.canvas.getContext("2d"),e=t.createLinearGradient(0,0,0,this.$el.height());e.addColorStop(0,"#1e4877"),e.addColorStop(.5,"#4584b4"),t.fillStyle=e,t.fillRect(0,0,this.canvas.width,this.canvas.height),this.container.style.background="url("+this.canvas.toDataURL("image/png")+")",this.container.style.backgroundSize="32px 100%",this.camera=new i.PerspectiveCamera(30,window.innerWidth/window.innerHeight,1,3e3),this.camera.position.z=6e3,this.scene=new i.Scene,this.geometry=new i.Geometry;var n=(new i.TextureLoader).load(this.cloudTexture,this.animateScene);n.magFilter=i.LinearMipMapLinearFilter,n.minFilter=i.LinearMipMapLinearFilter;var s=new i.Fog(4555956,-100,3e3);this.material=new i.ShaderMaterial({uniforms:{map:{type:"t",value:n},fogColor:{type:"c",value:s.color},fogNear:{type:"f",value:s.near},fogFar:{type:"f",value:s.far}},vertexShader:this.vs,fragmentShader:this.fs,depthWrite:!1,depthTest:!1,transparent:!0});for(var o=new i.Mesh(new i.PlaneGeometry(64,64)),a=0;8e3>a;a++)o.position.x=1e3*Math.random()-500,o.position.y=200*-Math.random()*Math.random()-15,o.position.z=a,o.rotation.z=Math.random()*Math.PI,o.scale.x=o.scale.y=1.5*Math.random()*Math.random()+.5,o.updateMatrix(),this.geometry.merge(o.geometry,o.matrix);this.mesh=new i.Mesh(this.geometry,this.material),this.scene.add(this.mesh),this.mesh=new i.Mesh(this.geometry,this.material),this.mesh.position.z=-8e3,this.scene.add(this.mesh),this.renderer=new i.WebGLRenderer({antialias:!1,alpha:!0}),this.camera.aspect=this.$el.width()/this.$el.height(),this.camera.updateProjectionMatrix(),this.renderer.setSize(this.$el.width(),this.$el.height(),!1),this.container.appendChild(this.renderer.domElement),this.$el.addClass("is-init"),document.addEventListener("mousemove",this.onDocumentMouseMove,!1),window.addEventListener("resize",this.onWindowResize,!1),window.addEventListener("deviceorientation",this.onDeviceOrientation,!1)},n.prototype.animateScene=function(){window.requestAnimationFrame(this.animateScene);var t=this.mouseX+this.tiltX,e=this.mouseY+this.tiltY,i=.03*(Date.now()-this.startTime)%8e3;this.camera.position.x+=.01*(t-this.camera.position.x),this.camera.position.y+=.01*(-e-this.camera.position.y),this.camera.position.z=-i+8e3,this.renderer.render(this.scene,this.camera)},n.prototype.onDocumentMouseMove=function(t){this.mouseX=.25*(t.clientX-this.windowHalfX),this.mouseY=.15*(t.clientY-this.windowHalfY)},n.prototype.onWindowResize=function(){this.camera.aspect=this.$el.width()/this.$el.height(),this.camera.updateProjectionMatrix(),this.renderer.setSize(this.$el.width(),this.$el.height(),!1)},n.prototype.onDeviceOrientation=function(t){var e=t.beta,i=t.gamma;e>45&&(e=45),-45>e&&(e=-45),this.tiltX=i,this.tiltY=-e},n}),define("app/modules/forms/watchChange",["jquery","app/modules/BaseModule"],function(t,e){var i,n=".WatchChange",s=0,o=t("html").hasClass("lt-ie10");return i=function(){this.$el=null,this.ns=n+s++},i.prototype=new e,i.prototype.init=function(e){this.$el=t(e),this.originalValues=this.$el.serialize(),this.on("change",this.bind(this.invalidate)),this.on("change",":input",this.bind(this.invalidate)),this.on("keyup",":input",this.bind(this.invalidate)),this.on("click","input[type=reset]",this.bind(o?this.iefix:this.invalidate))},i.prototype.iefix=function(){var t=this;setTimeout(function(){var e=t.$el.find("input");document.createEventObject?e.each(function(){this.fireEvent("onblur",document.createEventObject())}):e.trigger("blur"),t.invalidate()},1)},i.prototype.invalidate=function(){clearTimeout(this.validationTimeout),this.validationTimeout=setTimeout(this.bind(this.handleChange),50)},i.prototype.handleChange=function(){var t=this.$el.serialize()!=this.originalValues;this.$el.find(".js-enable-on-change").prop("disabled",!t)},i}),define("app/modules/forms/datePicker",["jquery","lib/util/EventDispatcher","app/Config","moment","lib/browser/Accessibility"],function(t,e,i,n,s){function o(e,i){var n=this;this.$el=t(e),this.options=t.extend({},c,i),this.dayConditions=[],this.visibleDate=new Date,this.selectedDate=null,this.todayDate=l(new Date),this.minDate=l(new Date),this.maxDate=null,this.specialDates={},this.titleLabel=null,this.addCondition(o.checkMinDate),this.addCondition(o.checkMaxDate),this.addCondition(o.checkWithinMonth),this.addCondition(o.checkToday),this.addCondition(o.checkSelected),this.addCondition(o.checkSpecialDates),this.$el.on("click",".next-month",function(t){t.preventDefault(),n.switchMonth(1)}),this.$el.on("click",".prev-month",function(t){t.preventDefault(),n.switchMonth(-1)}),this.$el.on("click","tbody a",function(e){e.preventDefault();var i=t(this).data("value");n.trigger("click",i)}),this.titleId=s.createId(),this.renderMain(),this.invalidate()}function a(t){return t.setHours(12,0,0,0),t}function r(t){return t.setHours(12,0,0,0)}function l(t){var e;return t instanceof Date?a(new Date(t)):(e=n(t,["L","DD.MM.YYYY"]),e&&e.isValid()&&a(e.toDate()))}function h(t,e){return t==e?!0:t&&e?r(t)==r(e):!1}function u(t,e){return r(t)<r(e)}function d(t,e){return r(t)>r(e)}var c={accessible:!1},p=function(){for(var t=n.langData()._weekdaysMin,e=[],i=0;i<t.length;i++)e[i]=t[i].toLowerCase();
return e}(),f=i.get("months");return f||(f=n.langData()._months),o.prototype=new e,o.prototype.addCondition=function(t){this.dayConditions.push(t)},o.prototype.switchMonth=function(t){var e=this;if(t){var i=new Date(this.visibleDate);i.setDate(1),i.setMonth(i.getMonth()+t),this.showDate(i),this.options.accessible&&setTimeout(function(){s.speak(e.$monthTitle.text())},2)}},o.prototype.renderMonth=function(){var t=this.visibleDate.getMonth();this.visibleDate.getFullYear(),f[t],this.$monthTitle=this.$el.find(".month-title"),this.$monthTitle.text(n(this.visibleDate).format("MMMM YYYY"));var e=new Date(this.visibleDate);e=a(e),e.setDate(1);var i=new Date(e);i.setMonth(e.getMonth()+1),e.setDate(2-e.getDay()),e.getDate()<7&&e.getDate()>1&&e.setDate(e.getDate()-7);var s,o,r,l,h=0;for(this.$tbody.children().remove();e.getTime()<i.getTime()||h>0;){0===h&&(s&&this.$tbody.append(s),s=this.renderRow(),s.children().remove()),r=[];for(var u=0;u<this.dayConditions.length;u++)l=this.dayConditions[u](e,this),l&&r.push(l);o=this.renderDateCell(e,r),s.append(o),e.setDate(e.getDate()+1),h=(h+1)%7}this.$tbody.append(s)},o.prototype.invalidate=function(){var t=this;this._dirty=!0,clearTimeout(this.validationTimeout),this.validationTimeout=setTimeout(function(){t.validate()},1)},o.prototype.validate=function(){if(this._dirty){this._dirty=!1;var e=t.contains(this.$tbody.get(0),document.activeElement)?document.activeElement:null;this.renderMonth(),e&&(e=this.$tbody.find('a[title="'+e.title+'"]').first().focus(),e.length||(e=this.$tbody.find("a:enabled").first().focus()))}},o.prototype.renderRow=function(){return t("<tr></tr>")},o.prototype.renderDateCell=function(e,s){for(var o,a=n(e),r=a.format("LL")+", "+a.format("dddd"),l=t.inArray("disabled",s)>=0,h=[],u=0;u<s.length;u++)h.push(i.get("locale",s[u])||s[u]);o="",o+='<a role="button"',o+=' title="'+r+'"',o+=' aria-label="'+r+" - "+h.join(" ")+'"',o+=this.renderLinkAttr(l),l&&(o+=" disabled"),o+=">",o+=a.date(),o+="</a>";var d=t(o);d.data("value",new Date(e)),o="",o+='<td role="presentation"',o+=' class="'+p[a.day()]+"-day "+s.join(" ")+'"',o+=">",o+="</td>";var c=t(o);return c.append(d),c},o.prototype.renderDayCell=function(e){var i=n.langData()._weekdaysMin[e],s=n.langData()._weekdays[e],o="";return o+="<th ",o+='class="'+p[e]+'-day" ',o+='aria-label="'+s+'">',o+=i,o+="</th>",t(o)},o.prototype.renderMain=function(){this.$el.children().remove(),this.appendHeader(),this.appendBar(),this.appendBody()},o.prototype.appendHeader=function(){if(this.titleLabel){var t="";t+='<div class="date-picker-header"><h4 class="date-picker-title">',t+=this.titleLabel,t+="</h4></div>",this.$el.prepend(t)}},o.prototype.appendBar=function(){var t="";t+='<div class="date-picker-bar">',t+='<span class="month-title" id="'+this.titleId+'"></span>',t+="<a"+this.renderLinkAttr()+' class="prev-month icon" role="button">'+i.get("locale","prev-month")+"</a>",t+="<a"+this.renderLinkAttr()+' class="next-month icon" role="button">'+i.get("locale","next-month")+"</a>",t+="</div>",this.$el.append(t)},o.prototype.renderLinkAttr=function(t){return this.options.accessible&&!t?' href="#"':' tabindex="-1"'},o.prototype.appendBody=function(){for(var e=t('<div class="date-picker-body"></div>'),i=t('<table class="date-picker-table" role="presentation"></table>').appendTo(e),n=t('<thead aria-hidden="true"></thead>').appendTo(i),s=this.renderRow().appendTo(n),o=1;7>=o;o++)s.append(this.renderDayCell(o%7));var a=t("<tbody></tbody>").appendTo(i);this.$tbody=a,this.$el.append(e)},o.prototype.showDate=function(t){var e=l(t),i=this.visibleDate;e&&(this.minDate&&e<n(this.minDate).startOf("month").toDate()||(n(this.maxDate),this.maxDate&&e>n(this.maxDate).endOf("month").toDate()||n(this.visibleDate).isSame(e,"month")||(this.visibleDate=e,this.trigger("show",e)?this.invalidate():this.visibleDate=i)))},o.prototype.showSelected=function(){this.getSelectedDate()&&this.showDate(this.getSelectedDate())},o.prototype.selectDate=function(t){var e,i=this.selectedDate;e=l(t),e&&(this.minDate&&e<this.minDate?(e=null,this.showDate(this.minDate)):this.maxDate&&e>this.maxDate&&(e=null,this.showDate(this.maxDate))),(e||i)&&(!t&&i||t&&!i||!n(t).isSame(i,"date"))&&(this.selectedDate=e,this.trigger("select",e)?this.invalidate():this.selectedDate=i)},o.prototype.getElement=function(){return this.$el},o.prototype.getSelectedDate=function(){return this.selectedDate?new Date(this.selectedDate):null},o.prototype.getVisibleDate=function(){return this.visibleDate},o.prototype.setToday=function(t){this.today=l(t),this.invalidate()},o.prototype.setMinDate=function(t){this.minDate=l(t),this.invalidate()},o.prototype.setMaxDate=function(t){this.maxDate=l(t),this.invalidate()},o.prototype.setTitle=function(e){if(e!=this.titleLabel)if(this.titleLabel=e,this.titleLabel){var i=t(".date-picker-title",this.$el);i.length?i.text(this.titleLabel):this.appendHeader()}else t(".date-picker-header",this.$el).remove()},o.prototype.speakCurrentDate=function(){var t=this.getSelectedDate();if(t){var e=n(t),i=e.format("LL")+", "+e.format("dddd");s.speak(i)}},o.prototype.addSpecialDate=function(t,e){t=l(t),this.specialDates[t.toDateString()]=e,this.invalidate()},o.prototype.clearSpecialDates=function(){this.specialDates=[],this.invalidate()},o.checkMaxDate=function(t,e){return e.maxDate&&d(t,e.maxDate)?"disabled":void 0},o.checkMinDate=function(t,e){return e.minDate&&u(t,e.minDate)?"disabled":void 0},o.checkWithinMonth=function(t,e){return t.getMonth()!==e.visibleDate.getMonth()?"not-month":void 0},o.checkToday=function(t,e){return h(t,e.todayDate)?"today":void 0},o.checkSelected=function(t,e){return e.selectedDate&&h(t,e.selectedDate)?"selected":void 0},o.checkSpecialDates=function(t,e){return e.specialDates[t.toDateString()]},o}),define("app/modules/forms/dateInputPicker",["jquery","app/modules/forms/datePicker","app/util/DOMUtil","lib/util/EventDispatcher","moment"],function(t,e,i,n,s){var o,a=".date-input-picker",r=0;return o=function(){this.$element=null,this.datepicker=null,this.connected=!1,r++,this.ns=a+r},t.extend(o.prototype,n.prototype),o.prototype.prepare=function(e){var i=t(e);if(i.is("input")&&"date"==i.attr("type"))try{i.attr("type","text")}catch(n){}},o.prototype.getPicker=function(){return this.datepicker},o.prototype.connect=function(e,n){var o=this;this.datepicker=n,this.$element=t(e),this.connected&&this.disconnect(),this.connected=!0;var a=!!this.$element.prop("disabled");a||(this.datepicker.addEventListener("click"+this.ns,function(t){this.selectDate(t),i.focusNextInput(o.$element)}),this.datepicker.addEventListener("select"+this.ns,function(t){if(!o.ignorePickerEvents){var e=t?s(t):!1;if(o.trigger("select",t)){var i=o.$element.val();o.$element.val(e?e.format("L"):""),i!=o.$element.val()&&o.$element.trigger("change")}}}),this.datepicker.addEventListener("show"+this.ns,function(t){return o.trigger("show",t)}),this.on("keyup change",function(){o.ignorePickerEvents=!0;var t=s(this.value,["L","DD.MM.YYYY"]),e=!t||!t.isValid();if(this.value.length<8&&(e=!0),e)return o.datepicker.selectDate(null),o.ignorePickerEvents=!1,void 0;var i=o.datepicker.selectedDate;i&&t.isSame(i,"date")||(o.datepicker.selectDate(t.toDate()),o.datepicker.showDate(t.toDate())),o.ignorePickerEvents=!1}),this.on("keydown",function(t){switch(t.keyCode){case 38:case 40:var e,i,n=o.datepicker.getSelectedDate();if(n?(i=38==t.keyCode?-1:1,e=new Date(n),e.setDate(e.getDate()+i)):e=o.datepicker.minDate,e&&(t.preventDefault(),o.datepicker.selectDate(e),o.datepicker.showDate(e),o.datepicker.speakCurrentDate(),e=o.$element.val()))try{o.$element[0].setSelectionRange(0,e.split(".").shift().length)}catch(s){}}}));var r;(r=this.$element.attr("min"))&&(this.datepicker.setMinDate(r),this.datepicker.minDate>this.datepicker.getVisibleDate()&&this.datepicker.showDate(r)),(r=this.$element.attr("max"))&&(this.datepicker.setMaxDate(r),this.datepicker.maxDate<this.datepicker.getVisibleDate()&&this.datepicker.showDate(r)),(r=this.$element.data("today"))&&(this.datepicker.setToday(r),this.datepicker.showDate(r)),(r=this.$element.data("default"))&&this.datepicker.showDate(r),(r=this.$element.val())&&(this.datepicker.selectDate(r),this.datepicker.getSelectedDate()&&this.datepicker.showDate(r)),(r=this.$element.attr("title"))&&this.datepicker.setTitle(r),(r=this.$element.data("datepicker-type"))&&this.datepicker.$el.addClass(r),(r=this.$element.data("datepicker-dates"))&&this.parseDates(r),this.datepicker.validate()},o.prototype.parseDates=function(e){var i,n={};if(0===e.indexOf("#"))i=t(e),i.find("option").each(function(){var e=t(this);n[e.attr("value")]=t.trim(e.attr("label"))});else if(0===e.indexOf("{"))try{n=t.parseJSON(e)}catch(s){n={}}for(var o in n)this.datepicker.addSpecialDate(o,n[o])},o.prototype.disconnect=function(){this.connected&&(t(document).off(this.ns),this.$element.off(a),this.datepicker.removeEventListener(this.ns),this.$element=null,this.datepicker=null,this.connected=!1)},o.prototype.destroy=function(){this.disconnect()},o.prototype.on=function(t,e,i){this.$element.on(t+a,e,i)},o}),define("app/modules/forms/dateInput/dateInputHandler",["jquery","app/modules/forms/datePicker","app/modules/forms/dateInputPicker"],function(t,e,i){var n,s=".date-input-handler",o=0;return n=function(){this.$element=null,this.connector=new i,this.datepicker=null,o++,this.ns=s+o},n.prototype.init=function(e,i){return this.$element=t(e),this.floating=!i,this.needsAccessiblePicker="hidden"===this.$element.attr("type")||this.$element.data("datepicker-dates"),this.floating?(this.$wrapper=t('<span class="date-picker-wrapper"></span>'),this.$wrapper.css({position:"absolute",zIndex:2e4})):(this.$wrapper=t(i),this.openPicker(),this.$wrapper.slideDown("fast")),this.needsAccessiblePicker||this.$wrapper.attr("aria-hidden","true"),this.connector.prepare(e),this},n.prototype.getPicker=function(){return this.datepicker},n.prototype.openPicker=function(){var i=this;if(!this.isOpen&&(this.isOpen=!0,this.$datepicker||(this.$datepicker=t('<div class="date-picker"></div>'),this.floating&&(this.$datepicker.addClass("date-picker-floating"),t("body").append(this.$wrapper)),this.datepicker=new e(this.$datepicker,{accessible:this.needsAccessiblePicker}),i.$wrapper.append(this.$datepicker)),this.datepicker.validate(),this.connector.connect(this.$element,this.datepicker),this.floating)){this.$wrapper.show(),i.repositionPicker(),this._reposition=function(){i.repositionPicker()},t(window).on("resize"+this.ns,this._reposition);var n=this.$wrapper.offset().top+this.$wrapper.height(),s=t("body").scrollTop()||t("html").scrollTop(),o=t(window).height()+s;n>o&&t("html, body").animate({scrollTop:s-o+n},300)}},n.prototype.closePicker=function(){this.floating&&(t(window).off(this.ns),this.connector.disconnect(),this.$wrapper.hide(),this.isOpen=!1)},n.prototype.showPicker=function(){this.openPicker(),this.floating&&this.$wrapper.show()},n.prototype.hidePicker=function(){this.floating&&this.$wrapper.hide()},n.prototype.repositionPicker=function(){var e=this.$element.offset(),i=this.$element.outerWidth(),n=this.$element.outerHeight();this.$datepicker.css({width:i});var s=this.$wrapper.outerWidth(),o=e.left+i/2-s/2;0>o?o=0:o+s>t(window).width()&&(o=t(window).width()-s),this.$wrapper.css({left:o,top:e.top+n})},n.prototype.destroy=function(){this.$element&&(this.isOpen&&this.closePicker(),this.$element.off(s),this.$element=null)},n.prototype.on=function(t,e,i){this.$element.on(t+s,e,i)},n}),define("app/modules/forms/dateInput",["jquery","app/modules/forms/dateInput/dateInputHandler","app/util/SwissDate","app/util/Capabilities","lib/browser/Accessibility","app/Config"],function(t,e,i,n,s,o){var a,r=".date-input",l=0,h=n.touch;return a=function(){this.$element=null,this.handler=new e,l++,this.ns=r+l},a.prototype.init=function(e){function i(t){t.stopPropagation(),s.handler.isOpen||(t.preventDefault(),s.openPicker())}var s=this;this.$element=t(e);var o=this.$element.data("datepicker-target");return this.handler.init(e,o),a.addInstruction(this.$element),this.$element.addClass("needsclick").addClass("needsfocus"),h&&s.handler.floating?!n.system.ios||n.pointertouch?this.on("focus",function(t){t.preventDefault(),t.stopImmediatePropagation(),this.blur(),s.handler.isOpen||(t.preventDefault(),s.openPicker())}):(this.on("ontouchstart",i),this.on("focus",function(t){s.handler.isOpen?s.closePicker():(s.openPicker(),s.$element.blur(),t.preventDefault(),t.stopImmediatePropagation())})):this.on("focus",function(){s.openPicker()}),this},a.prototype.openPicker=function(){function e(e){return t.contains(i.handler.$wrapper[0],e)}var i=this;this.isOpen||(this.isOpen=!0,this.handler.openPicker(),t(document).on("focus"+this.ns,"body",function(t){e(t.target)||i.$element.is(t.target)||i.closePicker()}),t(document).on((h?n.TOUCHSTART:"mousedown")+this.ns,function(t){e(t.target)||i.$element.is(t.target)||i.closePicker()}))},a.prototype.setValue=function(t){this.$element.val(i.format(t))},a.prototype.getValue=function(){return this.$element.val()},a.prototype.setToday=function(t){this.$element.attr("data-today",i.format(t))},a.prototype.setMinDate=function(t){var e=i.parse(this.$element.val()),n=i.parse(t);n>e&&this.$element.val(""),this.$element.attr("min",i.format(n))},a.prototype.setMaxDate=function(t){var e=i.parse(this.$element.val()),n=i.parse(t);e>n&&this.$element.val(""),this.$element.attr("max",i.format(n))},a.prototype.getPicker=function(){return this.handler.getPicker()},a.prototype.closePicker=function(){t(document).off(this.ns),this.handler.closePicker(),this.isOpen=!1},a.prototype.destroy=function(){this.$element&&(this.isOpen&&this.closePicker(),this.$element.off(r),this.$element=null)},a.prototype.on=function(t,e,i){this.$element.on(t+r,e,i)},a.addInstruction=function(e){if(!a.instructionId){var i=o.get("locale","date-input-instruction")||"Missing date format locale string";a.instructionId="date-input-instruction",t("body").append('<span class="is-visuallyhidden" id="'+a.instructionId+'">'+i+"</span>")}s.describeBy(e,a.instructionId)},a}),define("app/modules/forms/dateRange",["jquery","app/modules/forms/datePicker","app/modules/forms/dateInput/dateInputHandler","app/modules/forms/dateInput","lib/util/EventDispatcher","app/util/Capabilities"],function(t,e,i,n,s,o){function a(t,e){var i=t.offset();i.width=t.outerWidth(),i.height=t.outerHeight();var n=e.offset();n.width=e.outerWidth(),n.height=e.outerHeight();var s=i.left,o=i.left+i.width,a=n.left,r=n.left+n.width,l=i.top,h=i.top+i.height,u=n.top,d=n.top+n.height;return a>o||s>r?!1:u>h||l>d?!1:a>s&&o>a?!0:r>s&&o>r?!0:u>l&&h>u?!0:d>l&&h>d?!0:!1}var r,l=".date-input-range",h=0,u="ontouchstart"in window;return r=function(){this.$startInput=null,this.$endInput=null,this.startHandler=new i,this.endHandler=new i,h++,this.ns=l+h},r.prototype=new s,r.prototype.init=function(e){function i(){h.openPicker(this)}function s(t){h.isOpen&&this==h.focusField?h.closePicker():(h.openPicker(this),this.blur(),t.preventDefault())}function a(t){t.stopPropagation(),h.isOpen&&this==h.focusField||(t.preventDefault(),h.openPicker(this))}function r(t){t.preventDefault(),t.stopImmediatePropagation(),this.blur(),h.isOpen||(t.preventDefault(),h.openPicker(this))}var h=this;this.$startInput=t(e),this.$endInput=t(this.$startInput.data("datepicker-rel")),n.addInstruction(this.$startInput),n.addInstruction(this.$endInput);var u=this.$startInput.data("datepicker-target"),d=this.$endInput.data("datepicker-target");return this.startHandler.init(this.$startInput,u),this.endHandler.init(this.$endInput,d),this.floating=!u&&!d,this.floating?o.touch?o.pointertouch?(this.$startInput.on("focus"+l,r),this.$endInput.on("focus"+l,r)):(this.$startInput.on("touchstart"+l,a),this.$endInput.on("touchstart"+l,a),this.$startInput.on("focus"+l,s),this.$endInput.on("focus"+l,s)):(this.$startInput.on("focus"+l,i),this.$endInput.on("focus"+l,i)):this.openPicker(),this},r.prototype.getStartPicker=function(){return this.startHandler.getPicker()},r.prototype.getEndPicker=function(){return this.endHandler.getPicker()},r.prototype.openPicker=function(e){function i(e){var i=t.contains(o.startHandler.$wrapper[0],e),n=t.contains(o.endHandler.$wrapper[0],e);return i||n}function n(t){return function(){a||(a=!0,t.apply(o,arguments),a=!1)}}function s(){var t=o.startHandler.getPicker(),e=o.endHandler.getPicker(),i=t.getVisibleDate(),n=e.getVisibleDate(),s=n.getTime()-i.getTime(),a=t.getSelectedDate(),r=e.getSelectedDate(),l=!1;return a&&r&&(l=r.getTime()-a.getTime()),{picker:{start:t,end:e},visible:{start:i,end:n,diff:s},selected:{start:a,end:r,diff:l}}}var o=this;if(this.focusField=e,this.startHandler.openPicker(),this.endHandler.openPicker(),!this.isOpen){this.isOpen=!0;var a=!1,r=s();this.startHandler.getPicker().addEventListener("show"+this.ns,n(function(t){r.selected.end||r.selected.start||r.picker.end.showDate(new Date(t.getTime()+r.visible.diff)),this.trigger("show"),r=s(t)})),this.endHandler.getPicker().addEventListener("show"+this.ns,n(function(t){r.selected.end||r.selected.start||r.picker.start.showDate(new Date(t.getTime()-r.visible.diff)),this.trigger("show"),r=s(t)})),this.startHandler.getPicker().addEventListener("select"+this.ns,n(function(t){t&&(r.selected.end?t.getTime()>r.selected.end.getTime()&&(r.picker.end.selectDate(null),r.picker.end.showDate(t)):r.picker.end.showDate(t),r.picker.end.setMinDate(t),this.trigger("select"),r=s(t))})),this.endHandler.getPicker().addEventListener("select"+this.ns,n(function(t){this.trigger("select"),r=s(t)})),this.floating&&(t(document).on("focus"+this.ns,"body",function(t){i(t.target)||o.$startInput.is(t.target)||o.$endInput.is(t.target)||o.closePicker()}),t(document).on((u?"touchstart":"mousedown")+this.ns,function(t){i(t.target)||o.$startInput.is(t.target)||o.$endInput.is(t.target)||o.closePicker()})),this.trigger("open")}this.checkDoubleVisibility()},r.prototype.checkDoubleVisibility=function(){this.startHandler.showPicker(),this.endHandler.showPicker();var e=t(this.startHandler.getPicker().getElement()),i=t(this.endHandler.getPicker().getElement());this.overlapping=a(e,i),this.overlapping&&(this.$startInput.is(this.focusField)&&this.endHandler.hidePicker(),this.$endInput.is(this.focusField)&&this.startHandler.hidePicker())},r.prototype.closePicker=function(){t(document).off(this.ns),this.startHandler.getPicker().removeEventListener(this.ns),this.endHandler.getPicker().removeEventListener(this.ns),this.startHandler.closePicker(),this.endHandler.closePicker(),this.isOpen=!1,this.trigger("close")},r.prototype.destroy=function(){this.$startInput&&(this.isOpen&&this.closePicker(),this.$startInput.off(l),this.$startInput=null)},r.prototype.on=function(t,e,i){this.$startInput.on(t+l,e,i)},r}),define("app/modules/forms/dateRangeRemote",["jquery","app/modules/BaseModule","app/modules/forms/dateRange"],function(t,e,i){function n(t){return t?[t.getFullYear(),t.getMonth()+1,t.getDate()].join("-"):""}function s(t){return t?[t.getFullYear(),t.getMonth()+1].join("-"):""}var o,a=".DateRangeRemote",r=0;return o=function(){this.$el=null,this.ns=a+r++,this.cache={}},o.prototype=new e,o.prototype.init=function(e){return this.dateRange=new i,this.remoteSrc=t(e).data("daterange-remote"),this.fetchOnSelect="onselect"==t(e).data("daterange-refetch"),this.cacheEnabled="disabled"!=t(e).data("daterange-cache")&&!this.fetchOnSelect,this.remoteSrc&&(this.dateRange.addEventListener("show",this.bind(this.requestData)),this.dateRange.addEventListener("open",this.bind(this.requestData)),this.fetchOnSelect&&this.dateRange.addEventListener("select",this.bind(this.requestData))),this.dateRange.init(e)},o.prototype.handleShow=function(){},o.prototype.requestData=function(){function e(){var e={};e[d]=v,e[c]=y,this.fetchOnSelect&&(e[d+"_selected"]=n(m),e[c+"_selected"]=n(g)),r.getElement().addClass("is-ajax-loading"),l.getElement().addClass("is-ajax-loading"),t.getJSON(this.remoteSrc,e,function(t){r.getElement().removeClass("is-ajax-loading"),l.getElement().removeClass("is-ajax-loading"),o.cacheEnabled&&(a[b]=t),i(t)})}function i(t){var e,i;e=t[d],r.clearSpecialDates();for(i in e)r.addSpecialDate(i,e[i]);e=t[c],l.clearSpecialDates();for(i in e)l.addSpecialDate(i,e[i])}var o=this,a=this.cache,r=this.dateRange.getStartPicker(),l=this.dateRange.getEndPicker(),h=this.dateRange.$startInput,u=this.dateRange.$endInput,d=h.attr("name"),c=u.attr("name"),p=r.getVisibleDate(),f=l.getVisibleDate(),m=r.getSelectedDate(),g=l.getSelectedDate(),v=s(p),y=s(f),b=v+"/"+y,w=a[b];w?i(w):(clearTimeout(this.requestTimeout),this.requestTimeout=setTimeout(this.bind(e),200))},o.prototype._destroy=o.prototype.destroy,o.prototype.destroy=function(){this.dateRange.destroy(),this._destroy()},o}),define("app/modules/forms/dateMultirange",["jquery","app/modules/BaseModule","moment"],function(t,e){var i,n=".DateMultirange",s=0;return i=function(){s++,this.ns=n+s},i.prototype=new e,i.prototype.init=function(e){var i=this.$el=t(e);this.$el.on("change","input.js-date-input",function(){var e=this,n=!1,s=t(e).val();i.find("input.js-date-input").each(function(){if(n){var i=t(this).data("moduleInstance");if(i.setMinDate(s),i.getValue())return!1}else this==e&&(n=!0)})})},i.prototype.destroy=function(){},i.prototype.on=function(t,e,i){this.$startInput.on(t+n,e,i)},i}),define("app/modules/forms/charCounter",["jquery","app/modules/BaseModule"],function(t,e){var i,n=".charcounter",s=0;return i=function(){this.$el=null,this.ns=n+s++},i.prototype=new e,i.prototype.init=function(e){return this.$el=t(e),this.on("keyup",".js-char-input",this.bind(this.checkChars)),this},i.prototype.checkChars=function(){var t=this,e=t.$el.find(".js-char-input")||t.$el.find("input"),i=e.attr("maxlength"),n=i-e.val().replace(/(\r\n|\n|\r)/g,"  ").length;0>=n&&(e.val(e.val().substr(0,i)),n=0),t.$el.find(".js-char-display").text(n)},i}),define("app/modules/content/sliderAutoplay",["jquery"],function(){function t(t){var e=this;this.slider=t,this.isPaused=!1,this.isStopped=!1,this.clickables=this.slider.$el.find("a, button"),this.intervalAmount=1e4,this.slider.$playToggle.on("click",function(){e.playToggle()}),this.clickables.on("focusin mouseenter mouseover",function(){e.pauseStop()}),this.clickables.on("focusout mouseleave",function(){e.pausePlay()})}return t.prototype.setAutoplay=function(t){var e=this;this.startInterval&&clearInterval(this.startInterval),t&&(this.startInterval=setInterval(function(){if(!e.isPaused){var t=e.slider.getNumPages(),i=e.slider.getPageIndex()+1;i>=t&&(i=0),e.slider.slideToPage(i)}},e.intervalAmount))},t.prototype.playToggle=function(){this.slider.$playToggle.is(":checked")?this.play():this.stop()},t.prototype.play=function(){this.isPaused=!1,this.isStopped=!1,this.slider.$playToggle.prop("checked",!0),this.setAutoplay(!0)},t.prototype.stop=function(){this.setAutoplay(!1),this.pauseTimeout&&clearTimeout(this.pauseTimeout),this.isPaused=!0,this.isStopped=!0,this.slider.$playToggle.prop("checked",!1)},t.prototype.pausePlay=function(){this.isStopped||(this.isPaused=!1)},t.prototype.pauseStop=function(){this.isStopped||(this.pauseTimeout&&clearTimeout(this.pauseTimeout),this.isPaused=!0)},t.prototype.pause=function(){var t=this;this.pauseStop(),this.pauseTimeout=setTimeout(function(){t.pausePlay()},t.intervalAmount)},t.prototype.destroy=function(){this.slider=null},t}),define("app/modules/content/slider",["jquery","app/util/Capabilities","app/modules/content/sliderAutoplay","app/util/delayModule"],function(t,e,i,n){function s(i,n){function s(t){var i;t.touches&&t.touches.length>1||(i=t.touches?t.touches[0]:t,d=i.clientY,u=c=i.clientX,p=c,f=(new Date).getTime(),document.addEventListener(e.TOUCHMOVE,o,!1),document.addEventListener(e.TOUCHEND,a,!1))}function o(t){var e;if(t.touches&&t.touches.length>1)return l(t);if(e=t.touches?t.touches[0]:t,e.clientX!==p){if(!m&&Math.abs(e.clientY-d)>10)return a(t),void 0;if(p=c,c=e.clientX,!m){if(!(Math.abs(c-u)>n.min))return;n.start&&n.start.call(i,0),i.style.pointerEvents="none",g=!0,m=!0}t.preventDefault(),f=(new Date).getTime(),n.step&&n.step.call(i,c-u)}}function a(t){m?(t.preventDefault(),h(t)):n.complete&&n.complete.call(i,!1),l(t)}function r(t){g&&t.preventDefault()}function l(){document.removeEventListener(e.TOUCHMOVE,o),document.removeEventListener(e.TOUCHEND,a),i.style.pointerEvents="",m=!1}function h(){var t=(new Date).getTime()-f,e=c-u,s=e/Math.abs(e)||0;0>(c-u)*(c-p)&&(s=0);var o=1e3*(Math.abs(c-p)/t);Math.abs(c-u)<n.size/2&&100>o&&(s=0),n.complete&&n.complete.call(i,s||0),setTimeout(function(){i.style.pointerEvents="",g=!1},1)}var u,d,c,p,f,m,g=!1;n=t.extend({min:5,size:i.clientWidth,start:null,step:null,complete:null},n),e.touch&&(i.addEventListener(e.TOUCHSTART,s,!1),i.addEventListener("click",r,!1),t(i).css("-ms-touch-action","pan-y"))}function o(t,e,i){i?t.addClass(e):t.removeClass(e)}var a,r=".js-slider",l=0,h=t("html").hasClass("ffbuttonbug"),u={accelerated:!1};return a=function(){this.$el=null,this.ns=r+l++,this.slideIndex=0,this.slideWidth=[],this.numPages=0,this.numSlides=0,this.x=0,this.ns=r},a.prototype.init=function(e){var n=this;return this.$el=t(e),this.options=t.extend({},u,this.$el.data("slide")),this.$playToggle=this.$el.find(".js-slide-play"),e.hasAttribute("data-autoplay")&&(this.autoplay=new i(this),this.$playToggle.prop("checked",!0)),this.$wrapper=this.$el.find(".js-slide-container"),this.$content=this.$el.find(".js-slide-content"),this.$scrollContainer=this.$wrapper.add(this.$content).filter(function(){var e=t(this).css("overflow");return"hidden"==e||"scroll"==e}).first(),this.$indicator=this.$el.find(".js-slide-indicator").eq(0).css({visibility:"visible"}),this.$indicators=this.$indicator.parent(),this.slideIndex=-1==this.$content.find(".is-curr").index()?0:this.$content.find(".is-curr").index(),this.gestureLock=!1,this.accelerated=Modernizr.csstransforms3d&&this.options.accelerated,this.on("click",".js-slide-prev",this._slideByHandler(-1)),this.on("click",".js-slide-next",this._slideByHandler(1)),this.on("click",".js-slide-indicator",this._slideToHandler()),this.$indicator.add(".js-slide-prev, .js-slide-next").attr({"aria-hidden":"true",tabindex:"-1"}).find("button, a").attr({tabindex:"-1"}),this.$scrollContainer.on("scroll",function(){if(!this.ignoreScrolling&&this.scrollLeft){var t=this.scrollLeft;n.activateScrollMode(!0),n.snapToLeft(t)}}),this.on(window,"resize",function(){var t;return function(){clearTimeout(t),t=setTimeout(function(){n.relayout()},500)}}()),this.relayout(),function(){var t,i,o;s(e,{start:function(){n.activateScrollMode(!1),t=n.x,n.gestureLock=!0},step:function(e){o=n.x,n.move(t+e),i=(new Date).getTime()},complete:function(t){t!==!1&&n.slideBy(-t),n.gestureLock=!1}})}(),this.initialised=!0,this},n(a),a.prototype._resizeSummaryMyFlights=function(){var e=[],i=this.$el.find(".js-slide-myaccount_summary_flights--flight--data");if(i.length){i.removeAttr("style"),i.each(function(i,n){e.push(parseInt(t(n).height()))});var n=Math.max.apply(Math,e);i.css("min-height",n),this.$el.find(".js-slide-myaccount_summary_flights--indicator").css("top",n)}},a.prototype.destroy=function(){this.$el&&(this.autoplay&&(this.autoplay.destroy(),this.autoplay=null),this.$el.off(this.ns),t(document).off(this.ns),t(window).off(this.ns),this.$el=null)},a.prototype.relayout=function(){this.$el&&this.$el.is(":visible")&&(this.measure(),this.render(),this._checkVariant()),this.autoplay&&(this.$playToggle.is(":visible")||this.autoplay.stop()),this._resizeSummaryMyFlights()},a.prototype.render=function(e){var i=this;void 0===e&&(e=!0);var n=this.$content.children();if(n.length){var s=this.getPageIndex(),a=this.slideWidth[this.getStartIndex()];this.$indicators.children().removeClass("is-active"),this.$indicators.children().eq(s).addClass("is-active"),o(this.$el.find(".js-slide-prev"),"is-disabled",0>=s),o(this.$el.find(".js-slide-next"),"is-disabled",s>=this.numPages-1),e&&!this.scrollMode&&this.initialised?t({x:this.x}).stop().animate({x:-a},{duration:300,step:function(t){i.move(t)}}):this.move(-a),this.markActiveChildren()}},a.prototype.activateScrollMode=function(t){this.scrollMode=t,this.scrollMode?(this.$content.css({perspective:""}),this.$content.children().css({transform:"",backfaceVisibility:"",left:""})):this.$scrollContainer.scrollLeft(0),this.move(this.x)},a.prototype.move=function(t){this.x=t;var e=this.$content.children();e.length&&(this.scrollMode?(this.ignoreScrolling=!0,this.$scrollContainer.scrollLeft(-t),this.ignoreScrolling=!1):this.accelerated?(this.$content.css({perspective:"1000px"}),e.css({transform:"translateX("+Math.floor(t)+"px)",backfaceVisibility:"hidden"})):Modernizr.csstransforms&&!h?e.css({transform:"translate("+t+"px,0px)"}):e.css({left:t}))},a.prototype.markActiveChildren=function(){var t=this.getStartIndex();this.$content.children().removeClass("is-active").slice(t,t+this.getSlidesPerPage()).addClass("is-active has-once-been-active")},a.prototype.getSlideIndexAt=function(t){var e,i=0,n=0;for(e=0;e<this.slideWidth.length&&(n=t-this.slideWidth[e],!(0>n));e++)i=n;return Math.abs(i)<Math.abs(n)?e-1:e},a.prototype.snapToLeft=function(t){var e=this.getSlideIndexAt(t);this.slideTo(e)},a.prototype.measure=function(){var t=this.$content.children();if(t.length){var e=t.first().position().left,i=0;this.slideWidth=[0],this.numSlides=t.length;for(var n=1;n<this.numSlides;n++)i=Math.floor(t.eq(n).position().left-e),this.slideWidth.push(i);var s=i/(this.numSlides-1);i+=t.last().outerWidth();var o=this.$content.width();this.slidesPerPage=Math.floor((o+1)/s),this.slidesPerPage<1&&(this.slidesPerPage=1),this.setNumPages(Math.ceil(this.numSlides/this.slidesPerPage))}},a.prototype.slideBy=function(t){var e=this.getSlidesPerPage();this.slideTo(this.getSlideIndex()+t*e)},a.prototype.slideTo=function(t){var e=this.getSlidesPerPage(),i=Math.round(t/e);this.slideToPage(i)},a.prototype.slideToPage=function(t){var e=this.getSlidesPerPage();index=Math.max(0,Math.min(this.numPages-1,t)),index*=e,this.slideIndex=index,this.$content.children().css("transition",""),this.render(),this._checkVariant()},a.prototype.getPageIndex=function(){return this.slideIndex/this.getSlidesPerPage()},a.prototype.getSlideIndex=function(){return this.slideIndex||0},a.prototype.getPageIndex=function(){return Math.floor(this.slideIndex/this.numSlides*this.numPages)},a.prototype.getSlidesPerPage=function(){return this.slidesPerPage},a.prototype.getStartIndex=function(){return this.getPageIndex()*this.getSlidesPerPage()},a.prototype.getNumPages=function(){return this.numPages},a.prototype.setNumPages=function(t){if(this.numPages!=t){this.numPages=t;var e;if(this.$indicators.children().remove(),this.numPages>1)for(var i=0;i<this.numPages;i++)e=this.$indicator.clone(),e.appendTo(this.$indicators)}},a.prototype._slideByHandler=function(t){var e=this;return function(i){e.activateScrollMode(!1),i.preventDefault(),e.gestureLock||e.slideBy(t)}},a.prototype._slideToHandler=function(e){var i=this;return function(n){if(i.autoplay&&i.autoplay.pause(),i.activateScrollMode(!1),n.preventDefault(),!i.gestureLock){var s=e||t(this).index()*i.getSlidesPerPage()||0;i.slideTo(s)}}},a.prototype._checkVariant=function(){this.$content.children(".is-active").find(".product_teaser.as-dark").length?this.$el.addClass("as-dark"):this.$el.removeClass("as-dark")},a.prototype.on=function(){for(var e,i,n,s,o=[],a=0;a<arguments.length;a++)o[a]=arguments[a];switch(arguments.length){case 2:s=this.$el,e=o.shift(),n=o.shift();break;case 3:e=o.shift(),"string"==typeof e?(s=this.$el,i=o.shift(),n=o.shift()):(s=t(e),e=o.shift(),n=o.shift());break;case 4:s=t(o.shift()),e=o.shift(),i=o.shift(),n=o.shift()}i?s.on(e+this.ns,i,n):s.on(e+this.ns,n)},a.prototype.bind=function(){},a}),define("app/modules/booking/bookingbar",["jquery","app/modules/BaseModule","app/plugins/mediaDispatcher"],function(t,e,i){var n,s=".bookingbar",o=0;return n=function(){this.$el=null,this.ns=s+o++},n.prototype=new e,n.prototype.init=function(e){function n(e){var i=t("#bookingbar-flight");e?i.removeClass("is-options-hidden"):i.addClass("is-options-hidden"),t(window).trigger("resize")
}return this.$el=t(e),this.on("focus",".bookingbar-lead input",function(){n(!0)}),this.on("click",".js-bookingbar-options-close",function(t){t.preventDefault(),n(!1)}),this.on("click",".js-bookingbar-options-open",function(t){t.preventDefault(),n(!0)}),i.isAbove("mobile").then(this.bind(function(){this.$el.find(".is-active-if-not-mobile").removeClass("is-active-if-not-mobile").addClass("is-active")})),this},n}),define("lib/browser/DOMEvent",[],function(){function t(e,i,n,s){if(e instanceof Array)for(var o=0;o<e.length;o++)t(e[o],i,n,s);else{"undefined"==typeof n&&(n=!0),"undefined"==typeof s&&(s=!0);var a=document.createEvent("HTMLEvents");a.initEvent(i,!0,!0),e.dispatchEvent(a)}}return{dispatch:t}}),define("app/modules/evolution/evoBookingbar",["jquery","app/modules/BaseModule","lib/animation/AnimationFrame","lib/browser/Accessibility","lib/browser/DOMEvent","app/util/SwissDate","app/util/FocusCloser"],function(t,e,i,n,s,o,a){function r(){this.ns=e.ns("EvoBookingbar"),this.nstemp=this.ns+"_temp",this.focusCloser=new a}function l(t,e){var i=t.find("input");e?i.attr("disabled",!0):i.removeAttr("disabled")}var h=function(e,i){t(e).each(function(){this.value!==i&&(this.value=i,s.dispatch(this,"change"))})};r.prototype=new e,r.prototype.init=function(e){return this.$el=t(e),this.$bg=this.$el.find(".js-evo-bookingbar--bg"),this.$inputFrom=this.$el.find(".js-evo-bookingbar--from"),this.$inputTo=this.$el.find(".js-evo-bookingbar--to"),this.$inputsLocation=this.$inputFrom.add(this.$inputTo),this.$destination=this.$el.find(".js-evo-bookingbar--destination"),this.$flightType=this.$el.find(".js-evo-bookingbar--flighttype"),this.$inputsDate=this.$flightType.find("input"),this.$flightTypeToggle=this.$el.find(".js-evo-bookingbar--flighttype--toggle"),this.$flightTypeSingle=this.$flightType.find('.js-evo-input[data-type="single"]'),this.$flightTypeOutbound=this.$flightType.find('.js-evo-input[data-type="outbound"]'),this.$flightTypeReturn=this.$flightType.find('.js-evo-input[data-type="return"]'),this.$passengers=this.$el.find(".js-evo-passenger_select"),this.$departureDate=this.$el.find(".js-evo-bookingbar--departuredate"),this.$returnDate=this.$el.find(".js-evo-bookingbar--returndate"),this.$travelPeriodExact=this.$el.find(".js-evo-bookingbar--travelperiod--exact"),this.$travelPeriodSelect=this.$el.find(".js-evo-bookingbar--travelperiod--select"),this.$travelPeriodFlexible=this.$el.find(".js-evo-bookingbar--travelperiod--flexible"),this.$dates=this.$el.find(".js-evo-bookingbar--date"),this.$output=this.$el.find(".js-evo-passenger_select--infolabel"),this.focusGroups={locations:this.$el.find(".js-evo-bookingbar--destination"),dates:this.$el.find(".js-evo-bookingbar--flighttype"),passengers:this.$el.find(".js-evo-bookingbar--passengers"),timepickup:this.$el.find(".js-evo-bookingbar--timepickup"),timedropoff:this.$el.find(".js-evo-bookingbar--timedropoff"),datepickup:this.$el.find(".js-evo-bookingbar--datepickup"),datedropoff:this.$el.find(".js-evo-bookingbar--datedropoff"),locationpickup:this.$el.find(".js-evo-bookingbar--locationpickup"),locationdropoff:this.$el.find(".js-evo-bookingbar--locationdropoff")},this.$el.find(".js-evo-bookingbar--timepickup").each(function(e,i){n.describeBy(t(i).find(".js-evo-time_select--option"),t(i).find(".js-evo-time_select--infolabel"))}),this.$el.find(".js-evo-bookingbar--timedropoff").each(function(e,i){n.describeBy(t(i).find(".js-evo-time_select--option"),t(i).find(".js-evo-time_select--infolabel"))}),this.$el.find(".js-evo-bookingbar--datepickup").each(function(e,i){n.describeBy(t(i).find(".js-evo-time_select--option"),t(i).find(".js-evo-time_select--infolabel"))}),this.$el.find(".js-evo-bookingbar--datedropoff").each(function(e,i){n.describeBy(t(i).find(".js-evo-time_select--option"),t(i).find(".js-evo-time_select--infolabel"))}),this.$el.find(".js-evo-bookingbar--datepickup").length&&this.validatePickupDate(),this.bindListeners(),this},r.prototype.validatePickupDate=function(){var t=this.$el.find(".js-evo-bookingbar--datepickup .js-date_input"),e=this.$el.find(".js-evo-bookingbar--datedropoff .js-date_input"),i=o.parse(t.val());if(i){var n=new Date(i.getTime());n.setDate(n.getDate());var s=e.data("moduleInstance");s?(s.setMinDate(n),s.picker.gotoDate(n)):e.attr("data-min",o.format(n))}},r.prototype.bindListeners=function(){this.$flightTypeToggle.on("change",this.$flightTypeToggle,this.bind(this.handleFlightTypeToggle)),this.on("change",".js-evo-bookingbar--datepickup .js-date_input",this.bind(this.validatePickupDate)),this.on("click",".js-evo-passenger_select--trigger",this.bind(function(){"passengers"==this.visibleGroup?this.hidePassengerSelect():this.$el.find(".js-evo-passenger_select--input").first().focus().select()})),this.on("click",".js-evo-time_select--trigger",this.bind(function(e){var i,n=t(e.currentTarget),s=n.next().find(".js-evo-time_select--option");s.filter(":checked").length?(s.filter(":checked").focus(),i=s.filter(":checked").parent()):(s.first().attr("checked",!0).focus(),i=s.first().parent()),i.parents(".js-evo-time_select").scrollTop(i.parents(".js-evo-time_select").scrollTop()+i.position().top)})),this.on("click",".js-evo-passenger_select--close",this.bind(function(){"passengers"==this.visibleGroup&&this.hidePassengerSelect()})),this.on("click",".js-evo-time_select--close",this.bind(function(){("timepickup"==this.visibleGroup||"timedropoff"==this.visibleGroup)&&(this.hideTimeSelectPickup(),this.hideTimeSelectDropoff())})),this.on("change",".js-evo-time_select--option",this.bind(function(e){t(e.currentTarget).parents(".evo-time_select--trigger").find(".js-evo-time_select--sumlabel").html(t(e.currentTarget).next().html())}));var e=this.bind(function(){var t=this.$el.find(".js-evo-bookingbar--travelperiod--exact").prop("checked"),e=!t;this.$travelPeriodSelect[e?"removeClass":"addClass"]("is-hidden"),this.$travelPeriodSelect.find("select").prop("disabled",!e),s.dispatch(this.$travelPeriodSelect.find("select").get(0),"change")}),i=this.bind(function(){var t=this.$travelPeriodSelect.find("select"),e=t.val()||"-1";return e.indexOf("-")>0&&(e=e.split("-")[1]),e});this.$travelPeriodSelect.length&&e(),this.on("change",".js-evo-bookingbar--travelperiod--exact, .js-evo-bookingbar--travelperiod--flexible",e),this.on("change",".js-evo-bookingbar--travelperiod--select select",this.bind(function(){var t=i(),e=moment(o.parse(this.$departureDate.val())).add(t,"days"),n=o.parse(this.$returnDate.val());e.diff(n,"days")>0&&h(this.$returnDate,o.format(e.toDate()))})),this.on("change",".js-evo-bookingbar--returndate",this.bind(function(){var e,n=o.parse(this.$departureDate.val()),s=o.parse(this.$returnDate.val()),a=moment(s).diff(n,"days"),r=[];if(!this.$travelPeriodExact.prop("checked")&&this.$travelPeriodExact.length){var l=i();a>=l||0>l||(this.$el.find(".js-evo-bookingbar--travelperiod--select option").each(function(e,i){r.push(Number(t(i).val()))}),e=t.inArray(a,r),-1!=e?this.$travelPeriodSelect.find("option").eq(e).prop("selected","true"):h(this.$travelPeriodSelect.find("select"),"-1"))}})),this.on("change",".js-evo-bookingbar--departuredate",this.bind(function(){var t=this.$el.find(".js-evo-bookingbar--travelperiod--exact").prop("checked");if(!t){var e=o.parse(this.$departureDate.val()),n=o.parse(this.$returnDate.val()),s=moment(n).diff(e,"days"),a=i();if((0>a||!a)&&(a=0),!(s>=a)){var r=o.format(moment(e).add(a,"days").toDate());h(this.$returnDate,r)}}})),this.on("submit",this.bind(function(){this.$dates.each(this.bind(function(e,i){var n=t(i);""!=n.val()&&"undefined"!=typeof n.data("submit-format")&&n.val(moment(o.parse(n.val())).format(n.data("submit-format")))}))})),this.on("click",".js-evo-bookingbar--autocomplete--button",this.bind(function(e){e.preventDefault();var i=t(e.currentTarget).data("form"),n=this.$el.get(0);for(var o in i){var a=i[o],r=t(n[o]);r.is(":checkbox")?r.each(function(){this.checked=this.value==a,s.dispatch(this,"change")}):h(r,a)}this.hideLocationAutocomplete(),this.$el.find(":submit").focus(),t(e.currentTarget).hasClass("no-highlight")||this.$el.find(".evo-input").each(function(t,e){setTimeout(function(){e.style.transform="scale(1.2)",e.style.transition="transform 150ms"},0),setTimeout(function(){e.style.transform=""},150),setTimeout(function(){e.style.transition=""},300)})})),this.focusCloser.listen(this.bind(function(e){var i=t(e.target),n=i.parents(),s=i.hasClass("js-evo-passenger_select--input")||i.hasClass("evo-input-number--button")||i.hasClass("evo-passenger_select--popup--button"),o=i.parents(".js-evo-bookingbar--timepickup").length,a=i.parents(".js-evo-bookingbar--timedropoff").length,r=i.parents(".js-evo-bookingbar--datepickup").length,l=i.parents(".js-evo-bookingbar--datedropoff").length,h=i.parents(".js-evo-bookingbar--locationpickup").length,u=i.parents(".js-evo-bookingbar--locationdropoff").length;i.is("select")||(u?this.showLocationDropoff():this.hideLocationDropoff(),h?this.showLocationPickup():this.hideLocationPickup(),o?this.showTimeSelectPickup():this.hideTimeSelectPickup(),a?this.showTimeSelectDropoff():this.hideTimeSelectDropoff(),r?this.showDatePickup():this.hideDatePickup(),l?this.showDateDropoff():this.hideDateDropoff(),s?this.showPassengerSelect():this.hidePassengerSelect(),n.is(this.$destination)?this.showLocationAutocomplete():this.hideLocationAutocomplete())})),this.on("opendatepicker",this.bind(function(e){var i=this,n=t(e.target).parents(),s=this.focusGroups;setTimeout(function(){s.datedropoff.length&&n.is(s.datedropoff)?i.showDateDropoff():s.datepickup.length&&n.is(s.datepickup)?i.showDatePickup():i.showDates()},0)})),this.on("closedatepicker",this.bind(function(){this.hideDates()})),this.$inputsLocation.on("keyup"+this.nstemp,this.bind(function(){})),this.$destination.on("keydown"+this.nstemp,this.bind(function(){}))},r.prototype.activateFocusGroup=function(t,e){(e||t==this.activeGroup)&&(this.activeGroup=e?t:null,i.cancel(this.focusGroupTick),this.focusGroupTick=i.request(this.bind(function(){this.showFocusGroup(this.activeGroup)})))},r.prototype.showFocusGroup=function(t){if(t!=this.visibleGroup){console.log("Focus group",this.visibleGroup,"->",t," / ",this.$el.attr("action")),this.visibleGroup=t;for(var e in this.focusGroups)this.focusGroups[e][e==t?"addClass":"removeClass"]("is-active");t?this.showBg():this.hideBg()}},r.prototype.showLocationAutocomplete=function(){this.activateFocusGroup("locations",!0)},r.prototype.hideLocationAutocomplete=function(){this.activateFocusGroup("locations",!1)},r.prototype.showPassengerSelect=function(){this.activateFocusGroup("passengers",!0)},r.prototype.hidePassengerSelect=function(){this.activateFocusGroup("passengers",!1)},r.prototype.showLocationPickup=function(){this.activateFocusGroup("locationpickup",!0)},r.prototype.hideLocationPickup=function(){this.activateFocusGroup("locationpickup",!1)},r.prototype.showLocationDropoff=function(){this.activateFocusGroup("locationdropoff",!0)},r.prototype.hideLocationDropoff=function(){this.activateFocusGroup("locationdropoff",!1)},r.prototype.showTimeSelectPickup=function(){this.activateFocusGroup("timepickup",!0)},r.prototype.hideTimeSelectPickup=function(){this.activateFocusGroup("timepickup",!1)},r.prototype.showTimeSelectDropoff=function(){this.activateFocusGroup("timedropoff",!0)},r.prototype.hideTimeSelectDropoff=function(){this.activateFocusGroup("timedropoff",!1)},r.prototype.showDatePickup=function(){this.activateFocusGroup("datepickup",!0)},r.prototype.hideDatePickup=function(){this.activateFocusGroup("datepickup",!1)},r.prototype.showDateDropoff=function(){this.activateFocusGroup("datedropoff",!0)},r.prototype.hideDateDropoff=function(){this.activateFocusGroup("datedropoff",!1)},r.prototype.showDates=function(){this.activateFocusGroup("dates",!0)},r.prototype.hideDates=function(){this.activateFocusGroup("dates",!1)},r.prototype.showBg=function(){console.log("Showing BG",this.$el.attr("action")),this.$bg.stop().fadeIn("fast")},r.prototype.hideBg=function(){console.log("Hiding BG",this.$el.attr("action")),this.$bg.stop().fadeOut("fast")},r.prototype.handleFlightTypeToggle=function(e){var i=t(e.target),n=i.is(":checked");l(this.$flightTypeSingle,n),l(this.$flightTypeOutbound,!n),l(this.$flightTypeReturn,!n),n?(h(this.$flightTypeOutbound.find("input"),this.$flightTypeSingle.find("input").val()),this.$flightType.addClass("is-return").removeClass("is-single")):(h(this.$flightTypeSingle.find("input"),this.$flightTypeOutbound.find("input").val()),this.$flightType.addClass("is-single").removeClass("is-return"))};var u=r.prototype.destroy;return r.prototype.destroy=function(){this.focusCloser.destroy(),u.call(this)},r}),define("app/modules/evolution/evoBookingbarSwitch",["jquery","app/modules/BaseModule"],function(t,e){function i(){this.ns=e.ns("EvoBookingbarSwitch"),this.nstemp=this.ns+"_temp"}return i.prototype=new e,i.prototype.init=function(e){return this.$el=t(e),this.on("change",".js-evo-bookingbar-switch--input",this.bind(function(e){this.$el.find(".js-evo-bookingbar-switch--input").each(function(e,i){t("#"+t(i).attr("data-switch")).addClass("is-hidden").attr("aria-hidden","true")}),t("#"+t(e.currentTarget).attr("data-switch")).removeClass("is-hidden").attr("aria-hidden","false")})),this},i}),define("app/modules/evolution/evoPassengerSelect",["jquery","app/modules/BaseModule"],function(t,e){function i(){this.ns=e.ns("EvoPassengerSelect")}return i.prototype=new e,i.prototype.init=function(e){var i=this;return this.$el=t(e),this.categories=[],this.$el.find(".js-evo-passenger_select--input").each(this.bind(function(e,i){this.categories.push(t(i).data("passenger"))})),this.$el.on("change",".js-evo-passenger_select--input",this.bind(this.passengersListener)),this.values={},this.$el.find(".js-evo-passenger_select--input").each(function(){i.readInput(this)}),this.validate(),this},i.prototype.readInput=function(e){var i=t(e),n=i.data("passenger");this.values[n]=Number(i.val())||0},i.prototype.passengersListener=function(e){t(e.target),this.readInput(e.target),this.validate()},i.prototype.validate=function(){for(var t,e,i=[],n=0,s=0;s<this.categories.length;s++)t=this.categories[s],e=this.values[t],n+=e,i.push(this.getCountText(t,e));console.log(i.join(", ")),this.$el.find(".js-evo-passenger_select--infolabel").text(i.join(", ")),this.$el.find(".js-evo-passenger_select--sumlabel").text(this.getCountText("passenger",n))},i.prototype.getCountText=function(t,e){var i="more";0===e&&(i="none"),1===e&&(i="one");var n=this.$el.data("label-"+t+"-"+i);return n.replace("#",e)},i}),define("app/modules/helpers/JSON",["jquery"],function(t){var e=0,i=function(){this.id=e++,this.callbackName="swiss_autocomplete_"+this.id},n=i.prototype;return n.init=function(t,e){this.source=t,this.callback=e},n.search=function(t,e,i){e||(e=this.callback),i||(i=this.source);var n=i.split("%query%").join(encodeURIComponent(t));this.request(n,e)},n.request=function(e,i){this.abort(),this.$xhr=t.ajax({dataType:"json",url:e,success:function(t){i&&"function"==typeof i&&i(t)}})},n.abort=function(){this.$xhr&&this.$xhr.abort(),delete this.$xhr},i}),define("app/modules/evolution/evoAutocomplete",["jquery","app/modules/BaseModule","lib/util/Templates","app/modules/helpers/JSON","app/modules/helpers/JSONP","lib/browser/KeyCode","app/util/DOMUtil","app/util/FocusCloser"],function(t,e,i,n,s,o,a,r){function l(){this.ns=e.ns("EvoAutocomplete")}l.prototype=new e,l.prototype.init=function(e){this.$el=t(e);var i=this.$el.data("autocomplete-src")||"//www.swiss.com/ch/de/Suggest/Suggest?q=%query%&m=HP",o=this.$el.data("autocomplete-data-type");this.query="json"===o?new n:new s,this.query.init(i,this.bind(this.handleResult)),this.template=this.$el.data("autocomplete-tpl")||"evo-autocomplete-location";var a=this.$el.data("autocomplete-target");return this.defaultBodyHtml="",a?(this.flyout=null,this.$body=t("#"+a),this.defaultBodyHtml=this.$body.html()):(this.flyout=new Flyout,this.flyout.init("#flyout-autocomplete-template",{handleTabKey:!1,top:!1}),this.flyout.createTarget(),this.$body=this.flyout.getTarget().find(".js-autocomplete-body")),this.$context=this.$el.add(this.$body),this.focusCloser=new r(this.$context),this.$el.on("focus",this.bind(this.activate)),this},l.prototype.activate=function(){function e(){try{i.selectionStart=0,i.selectionEnd=i.value.length,i.select(),i.setSelectionRange(0,9999)}catch(e){}t(i).off(n)}if(!this.active){this.deactivate(),this.active=!0;var i=this.$el.get(0);this.selectTimeout=setTimeout(e,1);var n=this.ns+"-select";this.$el.on("mouseup"+n,function(){return!1}),e(),this.$el.on("keyup"+this.ns,this.bind(this.handleInput)),this.$context.on("keydown"+this.ns,this.bind(this.handleKeyDown)),this.$body.on("click"+this.ns,"button",this.bind(function(){this.acceptSelected()})),this.$body.on("mouseenter"+this.ns,"button",this.bind(function(t){this.select(t.currentTarget,!0)})),this.$body.on("mouseleave"+this.ns,"button",this.bind(function(){this.select(null,!0)})),this.focusCloser.listen(this.bind(function(){this.deactivate(),this.cancel()}))}},l.prototype.deactivate=function(){clearTimeout(this.selectTimeout),this.$el.off(this.ns+"-select"),this.$el.off(this.ns),this.$context.off(this.ns),this.$body.off(this.ns),t(document).off(this.ns),this.focusCloser.unlisten(),this.active=!1},l.prototype.cancel=function(){this.$body.html(this.defaultBodyHtml).removeClass("has-content")},l.prototype.handleInput=function(){var t=this.$el.val();t!=this.value&&(this.value=t,this.value?this.query.search(this.value):this.cancel())},l.prototype.handleKeyDown=function(t){switch(t.keyCode){case o.DOWN:this.select(1),t.preventDefault();break;case o.UP:this.select(-1),t.preventDefault();break;case o.SPACE:if(this.$el.is(document.activeElement))break;case o.ENTER:t.preventDefault(),this.acceptSelected();break;default:this.focusedByMe=!0,this.$el.focus()}},l.prototype.acceptSelected=function(){var e=this.$body.find("button.is-active, a.is-active");if(this.$el.val(e.attr("value")),this.cancel(),a.focusNextInput(this.$el.get(0)),"undefined"!=typeof this.$el.data("autocomplete-fill")){var i=this.$el.data("autocomplete-fill");if("string"==typeof i)t('[name="'+i+'"]').val(e.attr("value")).trigger("change");else for(var n=0;n<i.length;n++){i[n];var s=e.attr("data-"+i[n][1])||e.attr("value");t('[name="'+i[n][0]+'"]').val(s).trigger("change")}}},l.prototype.handleResult=function(t){if(t){var e=i.render(this.template,t);e&&(this.$body.html(e).addClass("has-content"),this.select(0,!0))}},l.prototype.select=function(e,i){var n=this.$body.find("button, a"),s=n.filter(".is-active");if(null===e)s=t();else if(e.nodeName)s=t(e);else{var o=n.index(s);o+=e,s=0>o?0>e?n.last():n.first():n.eq(o%n.length)}n.removeClass("is-active"),s.addClass("is-active"),i||s.focus()};var h=l.prototype.destroy;return l.prototype.destroy=function(){h.call(this)},l}),define("app/modules/booking/paymentRadio",["jquery","app/modules/BaseModule","app/util/DOMUtil","lib/browser/Accessibility"],function(t,e){var i;return i=function(){this.ns=e.ns("PaymentRadio")},i.prototype=new e,i.prototype.init=function(e){this.$el=t(e);var i='input[type="radio"][name="'+this.$el.attr("name")+'"]';return this.on(document,"change",i,this.bind(this.validate)),this.on("click",this.bind(this.validate)),this.validate(),this},i.prototype.validate=function(){var e=this.$el.parents(".payment-method"),i=t('label[for="'+this.$el.attr("id")+'"]'),n=this.$el.is(":checked");n?(e.addClass("is-active"),i.addClass("is-active")):(e.removeClass("is-active"),i.removeClass("is-active"))},i}),define("app/util/AjaxFormUpdater",["jquery","app/util/AjaxUpdater"],function(t,e){function i(){this.updater=new e}function n(e,i){var n=t(e),s=n.data("ajax-"+i)||n.attr(i),o=n.data("ajax-target");return o&&(s=s.split("#")[0]+"#"+o),s}return i.prototype.enableCache=function(){this.updater.enableCache()},i.prototype.update=function(e){var i=t(e),s=n(e,"action"),o=i.serialize(),a=i.attr("method");if(s.indexOf("#")<0)return t.Deferred().reject();var r=this.updater.load(s,{data:o,method:a});return r},i.prototype.cancel=function(){this.updater.cancel()},i.prototype.isCached=function(e){var i=t(e),s=n(e,"action"),o=i.serialize(),a=i.attr("method");return this.updater.isCached(s,{data:o,method:a})},i}),define("lib/animation/HeightAnimation",["jquery","lib/animation/Easing"],function(t){function e(t,e){this.options=e||{},t&&this.init(t)}return e.prototype.init=function(e){this.$el=t(e),this.$el.stop().css({overflow:"",height:""}),this.heightBefore=this.$el.height()},e.prototype.complete=function(e){if(!this.$el||!this.$el.length)return e&&e(),void 0;var i=this.$el,n=this.heightBefore,s=this.$el.height(),o=t.extend({duration:550,easing:"easeInOutQuint",delay:0},this.options,{complete:function(){i.css({overflow:"",height:""}),e&&e()}});n!=s&&(this.$el.css({overflow:"hidden",height:n}),this.$el.stop().delay(o.delay).animate({height:s},o))},e}),define("lib/animation/scrollToView",["jquery","lib/animation/Easing"],function(t){function e(e,i){var n=t.extend({align:"top",marginTop:0,marginBottom:0,animation:{duration:550}},i),s=t(e),o=1e9,a=0;s.each(function(){var e=t(this).offset().top,i=e+t(this).outerHeight();o>e&&(o=e),i>a&&(a=i)});var r=t(document).scrollTop(),l=t(window).height(),h=-1,u=-1,d=-1;return r>o&&(h=o-n.marginTop),a>r+l&&(u=a-l-n.marginBottom),"bottom"==n.align?d=u>=0?u:h:"top"==n.align&&(d=h>=0?h:Math.min(o-n.marginTop,u)),0>d?!1:(t("html, body").animate({scrollTop:d},t.extend({duration:350,easing:"easeInOutQuint"},n.animation)),void 0)}return e}),define("app/modules/booking/bookOptions",["jquery","app/modules/BaseModule","app/util/AjaxFormUpdater","lib/animation/HeightAnimation","lib/animation/scrollToView","lib/browser/KeyCode","lib/browser/Accessibility"],function(t,e,i,n,s,o,a){var r,l=".BookOptions",h=0,u=new i,d=[];return r=function(){this.$el=null,this.ns=l+h++},r.prototype=new e,r.prototype.init=function(e){var i=this;this.$el=t(e),d.push(this),this.$details=this.$el.find(".js-book-options--detail"),this.onAll("click",".js-book-options--open, .js-book-options--edit",function(t){t.preventDefault(),i.openingEl=t.target,i.showDetails()}),this.onAll("click",".js-book-options--close",function(t){t.preventDefault(),i.hideDetails()}),this.onAll("click",".js-book-options--submit",function(e){e.preventDefault(),e.stopPropagation();var i=t(this).addClass("is-ajax-loader");u.update(i.parents("form").first()).then(function(){i.removeClass("is-ajax-loader")})}),this.$details.on("keydown"+this.ns,function(t){t.keyCode==o.ESC&&(t.preventDefault(),i.hideDetails())});var n=this.$el.find(".title");return this.$el.find("button").each(function(){a.describeBy(this,n)}),this},r.prototype.onAll=function(t,e,i){this.on(t,e,i),this.$details.on(t+this.ns,e,i)},r.prototype.showDetails=function(){if(!this.isOpen()){var e=this.$details;e.show().children().hide();var i=this.$el.closest("li").nextAll(".js-book-options--detailholder:visible"),s=new n(e,{duration:550}),o=[];this.$el.find(".js-book-options--state").val("1");for(var r=0;r<d.length;r++)o.push(d[r].hideDetails({ignoreScroll:!0}));e.children().show(),i.length&&i.first().prepend(e),this.$el.addClass("is-open"),this.scrollToTop(e.add(this.getHeaderEl())),s.complete(),t(window).trigger("resize");for(var r=o.length-1;r>=0;r--)o[r]&&o[r]();a.focusFirstText(e)}},r.prototype.hideDetails=function(e){function i(){a.complete(function(){o.hide()})}if(this.isOpen()){var s=t.extend({},e),o=this.$details,a=new n(o,{duration:550});if(this.$el.find(".js-book-options--state").val("0"),this.$el.removeClass("is-open"),o.children().hide(),s.ignoreScroll)return i;this.scrollToTop(this.getHeaderEl()),i(),o.children().show(),this.openingEl&&(t(this.openingEl).focus(),this.openingEl=null)}},r.prototype.getHeaderEl=function(){var t=this.$el.find(".book-options-footer");return t.length?t:this.$el},r.prototype.scrollToTop=function(t){s(t,{marginTop:10,marginBottom:10})},r.prototype.isOpen=function(){return this.$el.hasClass("is-open")},r.prototype.__destroy=r.prototype.destroy,r.prototype.destroy=function(){this.__destroy(),this.$details.off(this.ns),d.splice(t.inArray(this,d),1)},r}),define("app/modules/booking/bookBundling",["jquery","app/modules/BaseModule","lib/animation/HeightAnimation","lib/browser/Accessibility"],function(t,e,i,n){function s(e,i){var n,s=t(e),o=t(window).height()-(parseInt(t("#body").css("margin-bottom"),10)||0),a=t(document).scrollTop(),r=s.offset().top,l=r-a,h=s.outerHeight()+10,u=l+h>o,d=0>l;(u||d&&i)&&(u&&(n=a+(l+h)-o),(!u&&d||i&&n>r)&&(n=r)),t("html, body").stop().animate({scrollTop:n},{duration:350,easing:"easeInOutQuint"})}function o(e){e.css("min-height","");var i=0;e.each(function(){var e=t(this).outerHeight();e>i&&(i=e)}),e.css("min-height",i)}function o(e){e.css("min-height","");var i=0;e.each(function(){var e=t(this).outerHeight();e>i&&(i=e)}),e.css("min-height",i)}var a,r=".BookBundling",l=0;return a=function(){this.$el=null,this.ns=r+l++},a.prototype=new e,a.prototype.init=function(e){function i(e){n.selectItem(e),n.currentCategory=t(e).data("category")}var n=this;this.$el=t(e),this.$el.on("click"+this.ns,".js-book-bundling--select",function(t){i(t.currentTarget)}),this.$el.on("change"+this.ns,".js-book-bundling--select",function(t){i(t.currentTarget)}),this.$el.on("click"+this.ns,".js-book-bundling--button",function(e){function i(t){n.selectItem(t.first(),!0)}e.preventDefault();var s=t(this),o=s.data("type");if(s.hasClass("is-selected"))return n.selectItem(null),void 0;var a,r=s.closest(".js-book-bundling--row"),l=r.find('.js-book-bundling--box[data-type="'+o+'"]');(a=l.find('.js-book-bundling--select[data-category="'+n.currentCategory+'"]')).length?i(a):(a=l.find(".js-book-bundling--select[data-favorite]")).length?i(a):(a=l.eq(0),i(a.find(".js-book-bundling--select")))});var s=this.$el.find(".js-book-bundling--showmulti");return!s.attr({"aria-expanded":this.$el.hasClass("is-visible-multi")?"true":"false"}),this.$el.on("click"+this.ns,".js-book-bundling--showmulti",function(){n.$el.toggleClass("is-visible-multi");var e=n.$el.hasClass("is-visible-multi");t(this).children()[e?"addClass":"removeClass"]("is-active"),t(this).attr({"aria-expanded":e?"true":"false"})}),this.$el.find("input.book-bundle-box--input:checked").each(function(){var e=t(this).parents().filter(".js-book-bundling--select"),s=e[0];s&&(e.parents(".book_bundle--multirows").length&&n.$el.addClass("is-visible-multi"),i(s))}),this.$el.find(".js-book-bundling--button").attr({"aria-expanded":"false"}),this},a.prototype.selectItem=function(e,a){var r=t(e);if(!r.hasClass("is-selected")){var l,h,u=r.closest(".js-book-bundling--box"),d=r.closest(".book_bundle_row--boxgroup"),c=r.closest(".js-book-bundling--row"),p=r.find("input.book-bundle-box--input"),f=t(".book_bundle_row--boxgroup.is-selected"),m=d,g=[];f.is(m)||(f.length&&(l=new i(f,{duration:300})),m.length&&(h=new i(m))),this.$el.find(".js-book-bundling--animheight").each(function(){g.push(new i(this,{duration:300}))});var v=c.hasClass("is-selected");if(this.$el.find(".js-book-bundling--button.is-selected").attr({"aria-expanded":"false"}),this.$el.find(".is-selected").removeClass("is-selected"),this.$el.find("input.book-bundle-box--input").not(p).prop("checked",!1),e){p.parentsUntil(".js-book-bundling--row").addClass("is-selected"),p.closest(".js-book-bundling--row").addClass("is-selected"),n.describeBy(p,c.find("h3")),n.describeBy(p,u.find(".book-bundle-box--features")),p.prop("checked",!0).trigger("change").focus();var y=u.data("type");if(c.find('.js-book-bundling--button[data-type="'+y+'"]').addClass("is-selected").attr({"aria-expanded":"true"}),h){var b=d.find(".book_bundle_boxgroup");b.css("min-height",""),o(d.find(".book-bundle-box--top")),b.css("min-height",b.height())}v||s(c,!0)}l?(l.complete(),h&&(h.options.delay=200,h.complete())):h&&h.complete();for(var w=0;w<g.length;w++)g[w].complete()}},a}),define("app/modules/widgets/widgetStage",["jquery","app/modules/BaseModule","app/util/AjaxFormUpdater"],function(t,e,i){var n,s=".widget-stage",o=0,a=new i;return n=function(){this.$el=null,this.ns=s+o++},n.prototype=new e,n.prototype.init=function(e){return this.$el=t(e),this.on("click",".js-ajax-update-click",this.bind(this.handleFormSubmitSoon)),this.on("change",".js-ajax-update-change",this.bind(this.handleFormSubmitSoon)),this.showWidgets(),this},n.prototype.handleFormSubmitSoon=function(t){t.preventDefault(),clearTimeout(this.submitTimeout),this.submitTimeout=setTimeout(this.bind(function(){this.handleFormSubmit(t)}),100)},n.prototype.handleFormSubmit=function(e){var i=this;t(e.target),i.hideWidgets();var n=i.$el.is("form")?i.$el:i.$el.find("form").eq(0);a.update(n).then(function(){i.showWidgets()})},n.prototype.showWidgets=function(){var e=this,i=t(".widget:not(.is-ready)");this.clearTimeouts(),this.widgetTimeouts=[],i.each(function(i){var n=t(this),s=setTimeout(function(){n.addClass("is-ready")},500*i);e.widgetTimeouts.push(s)});var n=setTimeout(function(){e.clearTimeouts(),i.addClass("is-ready is-complete")},6e3);this.widgetTimeouts.push(n)},n.prototype.hideWidgets=function(){var e=this,i=t(".widget");this.clearTimeouts(),this.widgetTimeouts=[],i.each(function(i){var n=t(this),s=setTimeout(function(){n.addClass("is-ready is-complete is-finished")},100*i);e.widgetTimeouts.push(s)})},n.prototype.clearTimeouts=function(){if(this.widgetTimeouts)for(var t=0;t<this.widgetTimeouts.length;t++)clearTimeout(this.widgetTimeouts[t])},n.prototype.scrollToTop=function(){var e=this.$el.offset(),i=t(document).scrollTop();e.top<i&&t("html, body").animate({scrollTop:e.top})},n.prototype.isOpen=function(){return this.$el.hasClass("is-open")},n.prototype.destroy=function(){this.$el&&(this.$el.off(this.ns),this.$el=null)},n}),define("app/modules/content/autoAccordionTabs",["jquery","app/modules/BaseModule"],function(t,e){var i,n=".auto-accordion-tabs",s=0;return i=function(){this.$el=null,this.ns=n+s++},i.prototype=new e,i.prototype.init=function(e){var i=this;return this.$el=t(e),this.on(window,"resize",function(){i.checkSize()}),this.checkSize(),this.$el.find(".tabs-navigation").css({visibility:"visible"}),this},i.prototype.checkSize=function(){if(!this.$el.is(":hidden")){var t=this.$el.find(".tabs-navigation").first(),e=t[0];e.style.display="block";var i=e.scrollWidth>e.clientWidth+1;i?this.$el.addClass("is-accordion"):this.$el.removeClass("is-accordion"),e.style.display=""}},i.prototype.destroy=function(){this.$el&&(this.$el.off(this.ns),t(document).off(this.ns),t(window).off(this.ns),this.$el=null)},i}),define("app/modules/booking/checkInOptions",["jquery","app/modules/BaseModule"],function(t,e){var i,n=".checkin-options",s=0,o={sms:"tel",email:"email",pdf:"email"};return i=function(){this.$el=null,this.ns=n+s++},i.prototype=new e,i.prototype.init=function(e){return this.$el=t(e),this.$el.on("change","select",this.bind(this.validate)),this.validate(),this},i.prototype.validate=function(){var e=this.$el.find(".js-check_options--type").val(),i=this.$el;t(".js-checkin-options--group").each(function(){var n=t(this),s=n.data("group")==e;if(n.find("input,select,textarea").prop("disabled",!s),n[s?"removeClass":"addClass"]("is-hidden"),s){var a=n.find("select").val(),r=i.data("placeholder-"+a);n.find("input:visible").attr({placeholder:r,type:o[a]||"text"})}})},i}),define("app/modules/booking/flightBookTabs",["jquery","app/modules/BaseModule"],function(t,e){var i,n=".FlightBookTabs",s=0,o="roundtrip",a="oneway";return i=function(){this.ns=n+s++},i.prototype=new e,i.prototype.init=function(e){var i=this;return this.$el=t(e),t(e).on("tabchange",function(t){var e=t.id,n=o;e.indexOf("one")>=0&&(n=a),i.setMode(n)}),this},i.prototype.setMode=function(t){var e=this.$el;e.find(".js-flight-book-tabs--mode").val(t);var i=e.find(".js-flight-book-tabs--destpicker");"oneway"==t?(i.addClass("is-disabled is-hidden-mobile"),i.find("input").prop("disabled",!0)):(i.removeClass("is-disabled is-hidden-mobile"),i.find("input").prop("disabled",!1))},i}),define("app/modules/content/responsiveTabsNavigation",["jquery","app/modules/BaseModule","app/modules/helpers/flyout"],function(t,e,i){var n,s=".resp-tabs-nav",o=0;
return n=function(){this.$el=null,this.ns=s+o++},n.prototype=new e,n.prototype.init=function(e){var i=this;return this.$el=t(e),e.style.visibility="visible",e.style.opacity=1,e.style.transform="none",this.$el.parents(".js-tabs").eq(0).is(".js-auto-accordion-tabs")?!1:(this.$el.find(".js-tabs-link.is-active").parent("li").addClass("is-active"),this.listenForOpen(),this.$el.hasClass("js-tabs-nav-dropdown")||this.$el.hasClass("tabs-navigation--is-menu")?this.dropdownMode=!0:(this.on(window,"resize",function(){i.checkSize()}),this.checkSize()),this)},n.prototype.listenForOpen=function(){this.on("click",".tabs-navigation-item",this.bind(function(t){this.dropdownMode&&(t.preventDefault(),t.stopImmediatePropagation(),this.openAsDropdown())}))},n.prototype.select=function(t){var e=this.$el.find('.js-tabs-link[href="'+t+'"]');0!==e.length&&e.trigger("click")},n.prototype.getActive=function(){var t=this.$el.find(".js-tabs-link"),e=t.filter(".is-active");return e.length===t.length&&t.length>1?"#all":0===e.length?"#none":e.eq(0).attr("href")},n.prototype.checkSize=function(){if(!this.$el.is(":hidden")){var t=this.$el,e=t[0];t.removeClass("tabs-navigation--is-menu tabs-navigation--is-tabs");var i=e.scrollWidth>e.clientWidth+1;i?t.addClass("tabs-navigation--is-menu"):t.addClass("tabs-navigation--is-tabs"),this.dropdownMode=i}},n.prototype.openAsDropdown=function(){var e=this;if(this.$el.off(this.ns),!this.flyout){var n=this.$el.find(".js-tabs-link"),s=[];n.each(function(){var e=t(this);s.push({link:e.attr("href")||"",cls:e.hasClass("is-disabled")?"is-disabled":"",name:e.html()})}),this.flyout=new i,this.flyout.init("#flyout-links-template",{top:!1,data:{items:s}}),this.flyout.createTarget(),this.flyout.getTarget().on("click"+this.ns,"a",this.bind(function(e){var i=t(e.currentTarget).attr("href");if(this.$el.parents(".js-tabs").length)e.preventDefault(),this.select(i);else{var s=n.filter('[href="'+i+'"]');1===s.length&&(e.preventDefault(),s.get(0)&&s.get(0).click?s.get(0).click():s.trigger("click"))}this.closeDropdown()}))}this.flyout.open(this.$el);var o=this.flyout.getTarget().find("a").removeClass("selected"),a=this.flyout.getTarget().find(".flyout-body"),r=a.parents(".js-flyout").width(),l=this.$el.find(".is-active").outerWidth();o.filter('[href="#'+this.getActive()+'"]').addClass("selected"),a.css({minWidth:Math.min(r,l),maxWidth:"100%"}),t(document).on(("ontouchstart"in window?"touchstart":"mousedown")+this.ns,this.bind(function(i){t.contains(this.flyout.getTarget()[0],i.target)||e.closeDropdown(i.target)})),this.flyout.repositionTarget()},n.prototype.closeDropdown=function(){this.isOpen=!1,this.flyout&&(this.flyout.close(),t(document).off(this.ns),setTimeout(this.bind(function(){this.listenForOpen()}),1))},n.prototype.destroy=function(){t(window).off(this.ns),t(document).off(this.ns),this.$el.off(this.ns),this.flyout&&(this.flyout.close(),this.flyout.getTarget().off(this.ns)),this.$el=null},n}),define("app/plugins/HashRouter",[],function(){function t(){var t,e=i(),n={};if(e){e=e.split("&");for(var s=0;s<e.length;s++)t=e[s].split("="),2===t.length&&(n[t[0]]=t[1])}return n}function e(t){var e=[];if(t)for(var i in t)e.push(i+"="+t[i]);e=e.join("&"),n(e)}function i(){return location.href.split("#")[1]||""}function n(t){location.hash=t?"#"+t:""}var s=function(){this.values={}},o=s.prototype;o.refresh=function(){this.values=t()},o.set=function(t,i){this.values[t]=i,e(this.values)},o.get=function(t){return this.values[t]};var a=new s;return a.refresh(),a}),define("app/modules/content/tabs",["jquery","app/modules/BaseModule","app/plugins/HashRouter","app/util/DOMUtil","lib/animation/HeightAnimation","lib/browser/KeyCode","lib/browser/Accessibility"],function(t,e,i,n,s,o,a){var r,l=".tabs",h=0;r=function(t){this.$el=null,this.url=!1,this.selector=t||".js-tabs",this.ns=l+h++,this.id="tabs_"+h,this.initialised=!1};var u={animateHeight:!1};return r.prototype=new e,r.prototype.init=function(e){function n(){return t(this).parents(r.selector)[0]==e}var r=this;this.$el=t(e),this.options=t.extend({},u,this.$el.data("tabs")),this.url=this.$el.data("tabs-url")||!1,this.url&&(this.url="t-"+this.url);var l=function(e){return t(e,r.$el).filter(n)},h=function(e){var i=t(e),n=i.attr("href");i.is(".tabs-accordion-link.is-active")&&(n="#none");var o;r.options.animateHeight&&(o=new s(r.$el)),r.select(n),o&&o.complete();var a=i.offset(),l=t(document).scrollTop();a.top<l&&t(document).scrollTop(a.top)};this.on("click",".js-tabs-link",function(e){if(n.call(this)){var i=t(this).attr("href");0===i.indexOf("#")&&e.preventDefault(),h(e.currentTarget)}});var d=function(e,i){var n;if(t(i).parents().filter(r.$el).length){"next"==e?(n=t(".tabs-navigation-item.is-active").next(),n.length||(n=t(".tabs-navigation-item").first())):(n=t(".tabs-navigation-item.is-active").prev(),n.length||(n=t(".tabs-navigation-item").last()));var s=n.find("a:eq(0)").get(0);s&&s.click?s.click():n.find("a:eq(0)").trigger("click")}};this.on("click",".js-tabs-next",function(t){t.preventDefault(),d("next",this)}),this.on("click",".js-tabs-prev",function(t){t.preventDefault(),d("prev",this)});var c=l(".js-tabs-link");this.bind(function(){function e(t){var e="#"+c[t];u.select(e),u.initialised&&d.filter('[href="'+e+'"]:visible').focus()}function i(i){for(var n=t.inArray(u.getActive(),c),s=c.length,o=n+i;0>o;)o=(o||0)+s;o%=s,e(o)}function n(){i(-1)}function s(){i(1)}function r(){e(0)}function l(){e(c.length-1)}function h(i){var n=u.getActive(),s=t(i).attr("href").substr(1);s!=n&&e(t.inArray(s,c)),u.initialised&&a.focusFirstText(u.getPane(s))}var u=this,d=this.getAccessibleLinks();if(0!==d.length){var c=[],p=this.$$(".js-tabs-pane");p.each(function(){var e=t(this),i=e.attr("id");i&&c.push(i),i=e.data("tabs-id"),i&&c.push(i)});var f=[];d.each(function(e){var i=t(this),n=i.attr("href").substr(1);i.attr("id")||i.attr("id",u.id+"_"+e),document.getElementById(n)&&i.attr({"aria-controls":n}),f.push(i.attr("id"))}),this.$el.attr({role:"tablist"}),d.attr({role:"tab"}),d.parentsUntil(this.$el).not(this.$el).attr({role:"presentation"}),p.each(function(){var e=t(this),i=e.attr("id");if(i){var n=d.filter('[href="#'+i+'"]');e.attr({"aria-labelledby":n.attr("id"),role:"tabpanel"})}}),this.$el.on("keydown"+this.ns,function(t){if(!t.isDefaultPrevented()){var e=d.is(t.target);if(e||t.altKey){var i=!1;switch(t.keyCode){case o.LEFT:case o.UP:i=!0,n();break;case o.RIGHT:case o.DOWN:i=!0,s();break;case o.HOME:i=!0,r();break;case o.END:i=!0,l();break;case o.SPACE:case o.ENTER:i=!0,t.stopImmediatePropagation(),e&&h(t.target)}i&&t.preventDefault()}}})}})();var p=c.filter(".is-active"),f=[],m=!1;return this.url&&(m=i.get(this.url),p=c.filter('[href="#'+m+'"]')),f.length?h(f):p.length?h(p.eq(0)):c.first().addClass("is-menu-visible").parent().addClass("is-menu-visible"),this.initialised=!0,this},r.prototype.select=function(t){if(t&&0!==t.indexOf("#"))return!1;"#all"==t?this.$$(".js-tabs-pane").addClass("is-active"):(this.$$(".js-tabs-pane").removeClass("is-active"),this.getPane(t.substr(1)).addClass("is-active")),this.url&&i.set(this.url,t.substr(1));var e=this.getAccessibleLinks();e.removeClass("is-active is-menu-visible").attr({"aria-selected":"false"}).parent("li").removeClass("is-active  is-menu-visible"),e.filter('[href="'+t+'"]').addClass("is-active").attr({"aria-selected":"true"}).parent("li").addClass("is-active"),this.$$(".js-tabs-value").val(t.substr(1)),this.$el.trigger({type:"tabchange",id:t}),n.triggerResize(),this.initialised&&a.focus(this.getPane(t.substr(1)))},r.prototype.getPane=function(t){var e=this.$$("#"+t+',[data-tabs-id="'+t+'"]');return e},r.prototype.getAccessibleLinks=function(){return this.$$('.js-tabs-link[href^="#"]')},r.prototype.getActiveTablink=function(){var t=this.$$(".js-tabs-link:visible"),e=t.filter(".is-active");return e},r.prototype.getActive=function(){var t=this.getAccessibleLinks(),e=t.filter(".is-active");return e.length===t.length&&t.length>1?"all":0===e.length?"none":e.eq(0).attr("href").substr(1)},r.prototype.$$=function(e){function i(){return t(this).parents(s)[0]==n}var n=this.$el[0],s=this.selector;return t(e,this.$el).filter(i)},r}),define("app/modules/content/accordion",["jquery","app/modules/BaseModule","app/util/AjaxFormUpdater","lib/animation/HeightAnimation","lib/animation/scrollToView"],function(t,e,i,n,s){var o,a=".accordion",r=0;return new i,o=function(){this.$el=null,this.ns=a+r++},o.prototype=new e,o.prototype.init=function(e){return this.$el=t(e),this.on("click",".js-accordion-title",this.bind(function(t){t.preventDefault(),this.toggleDetails(t.target)})),this.autoClose="single"==this.$el.data("mode"),this},o.prototype.toggleDetails=function(e){var i=t(e),n=i.parents(".js-accordion-item"),o=n.hasClass("is-active");this.animations=[],this.autoClose?(this.$el.find(".js-accordion-item.is-active").each(this.bind(function(t,e){this.changeState(e,!1)})),o||this.changeState(n,!0)):this.changeState(n,!o),s(n);for(var a=0;a<this.animations.length;a++)this.animations[a].complete()},o.prototype.changeState=function(e,i){var s=t(e),o=s.find(".js-accordion-title"),a=s.hasClass("is-active");if(a!=i){var r=i?"addClass":"removeClass";this.animations.push(new n(s)),s[r]("is-active"),o[r]("is-active"),o.attr("aria-expanded",a?"false":"true")}},o}),define("lib/layout/FlexGrid",["jquery"],function(t){function e(e){this.options=t.extend({},n,e),this.reset()}function i(t,e,i){this.column=t,this.top=e,this.height=i}var n={resizeElementHorizontally:!1,resizeElementVertically:!1,workWithHoles:!0,minHoleHeight:50};return e.prototype.reset=function(){this.columns=[],this.elements=[],this.elementSizes=[],this.holes=[]},e.prototype.resize=function(t,e){new Date;var i;for(this.width=t,this.colWidth=this.width/e,this.columns=[],i=0;e>i;i++)this.columns[i]=0;for(i=0;i<this.elements.length;i++)this.elements[i]&&(this.elementSizes[i]=this.measureElement(this.elements[i]));this._layout(0)},e.prototype.getTotalHeight=function(){return Math.max.apply(null,this.columns)},e.prototype.addElements=function(t,e){var i=this.elements.length;this.elements.push(!1),this.elementSizes.push(!1);for(var n=0;n<t.length;n++)this.elementSizes.push(this.measureElement(t[n])),this.elements.push(t[n]);e||this._layout(i)},e.prototype._layout=function(e){for(var i,n,s,o=e;o<this.elements.length;o++)i=this.elements[o],i?(n=this.elementSizes[o],n.colspan=Math.ceil((n.width-1)/this.colWidth),s=n.colspan>1?this._placeSpanningElement(i,n):this._placeSimpleElement(i,n),t(i).css({position:"absolute",top:s.top,left:100*(s.column/this.columns.length)+"%"})):this.holes=[]},e.prototype._placeSpanningElement=function(t,e){var n,s,o,a;for(s=-1,o=Number.MAX_VALUE,n=0;n<=this.columns.length-e.colspan;n++)a=Math.max.apply(null,this.columns.slice(n,n+e.colspan)),o>a&&(s=n,o=a);if(e.top=o,e.column=s,this.options.workWithHoles)for(n=e.column;n<e.column+e.colspan;n++){a=e.top-this.columns[n];var r=new i(n,this.columns[n],a);if(a>=this.options.minHoleHeight){for(var l=0;l<this.holes.length;l++)if(a<this.holes[l].height){this.holes.splice(l,0,r),r=!1;break}r&&this.holes.push(r)}}for(n=e.column;n<e.column+e.colspan;n++)this.columns[n]=e.top+e.height;return e},e.prototype._placeSimpleElement=function(t,e){var n,s,o;if(this.options.workWithHoles)for(n=0;n<this.holes.length;n++)if(this.holes[n].height>=e.height)return s=this.holes[n],e.top=s.top,e.column=s.column,s.height-e.height>this.options.minHoleHeight?this.holes[n]=new i(s.column,s.top+e.height,s.height-e.height):this.holes.splice(n,1),e;for(s=-1,o=Number.MAX_VALUE,n=0;n<this.columns.length;n++)this.columns[n]<o&&(s=n,o=this.columns[n]);return e.top=this.columns[s],e.column=s,this.columns[s]+=e.height,e},e.prototype.measureElement=function(e){var i=t(e),n={width:i.outerWidth(),height:i.outerHeight()};return n},e}),define("app/modules/explore/mashupLinks",["jquery","app/modules/BaseModule","app/plugins/lightboxLink","lib/net/HTMLLoader","lib/util/contextTrigger","app/util/Capabilities","lib/browser/Accessibility"],function(t,e,i,n,s,o,a){function r(t){var e=Math.pow(Math.sin(t*Math.PI/2),5);return 0>t&&e>0?-e:t>0&&0>e?-e:e}function l(t,e){var i=100*e;c&&Modernizr.csstransforms3d?t[0].style.webkitTransform="translateX("+i+"%)":Modernizr.csstransforms?t.css({transform:"translate("+i+"%, 0)"}):t.css({marginLeft:i+"%"})}var h,u=".mashup-links",d=0;o.touch;var c="webkitRequestAnimationFrame"in window;return h=function(){this.$el=null,this.ns=u+d++,this.loader=new n,this.renderedPosition=0,this.renderPosition=0,this.$transition=t({})},h.prototype=new e,h.prototype.init=function(e){return this.$el=t(e),this.$el.addClass(c?"webkit":"no-webkit"),this.on("click",'[target="_blank"]',this.bind(this.handleLightboxLink)),this},h.prototype.handleLightboxLink=function(e){this.lightbox||(this.lightbox=new i,this.lightbox.getAccessibleElements=function(){var t=this.$element.find("");return this.$element.not(t)}),this.lightbox.open("#mashup-lightbox"),this.lightbox.addEventListener("close"+this.ns,this.bind(this.handleLightboxClose));var n=this.lightbox.$element;this.pages=n.find("#explore-prev, #explore-curr, #explore-next").toArray(),t(this.pages[0]).hide().attr("aria-hidden","true"),t(this.pages[2]).hide().attr("aria-hidden","true"),this.loadLightboxLink(e),this.lightbox.$element.on("click"+this.ns,".js-lightbox-prev",this.bind(function(t){t.preventDefault(),this.slideTo(1)})),this.lightbox.$element.on("click"+this.ns,".js-lightbox-next",this.bind(function(t){t.preventDefault(),this.slideTo(-1)})),navigator.userAgent.match(/blackberry/i)&&this.lightbox.$element.on("touchstart"+this.ns,".js-lightbox-close",this.bind(function(t){t.preventDefault(),this.lightbox.close()})),this.setupGesture(),this.keepFocus(),a.focusFirstText(n.find("h1")),window.renderGesture=this.render},h.prototype.handleLightboxClose=function(){this.lightbox.removeEventListener(this.ns),t(document).off(u),t(document).off(this.ns)},h.prototype.loadLightboxLink=function(e){e.preventDefault();var i=t(e.currentTarget).attr("href");this.loadLightbox(i)},h.prototype.loadLightbox=function(t){function e(t,e){return o.loadPage(t,e)}var i=0,n=1,s=2,o=this,a=this.lightbox.$element;e(t,n).then(function(t){var n=t.data("prev");a.find(".js-lightbox-prev").attr("href",n);var o=t.data("next");a.find(".js-lightbox-next").attr("href",o),e(n,i).then(function(t){t.fadeIn(),e(o,s).then(function(t){t.fadeIn()})})})},h.prototype.loadPage=function(e,i){var n=this,o=t.Deferred(),a=t(n.pages[i]);return a.data("url")!=e?(a.data("url",e),a.data("next",!1),a.data("prev",!1),a.children().remove(),a.hide(),this.loader.load(e,function(e){var i=t("<div></div>").html(e),n=i.find("#explore-curr");a.data("prev",i.find(".js-lightbox-prev").attr("href")),a.data("next",i.find(".js-lightbox-next").attr("href")),a.append(n.children()),s.run(a.children()),a.fadeIn("slow"),o.resolve(a)})):o.resolve(a),o},h.prototype.setupGesture=function(){function e(e){var f=t(e.target);f.is(".explore-lightbox-item.is-curr a")||e.preventDefault();var m,g,v=t(window).width(),y=e.originalEvent.touches?e.originalEvent.touches[0]:e,b=(t(e.target),l.pages[1]);r=y.clientX,starty=y.clientY,h=l.renderedPosition,d=!1,c=!1,m=Number(new Date),g=l.renderedPosition,t(document).off(o.DRAGSTART+u),t(document).on(o.DRAGMOVE+u,function(t){d&&t.preventDefault(),t.originalEvent.touches&&(t=t.originalEvent.touches[0]);var e=t.clientX-r,s=t.clientY-starty;c?b.scrollTop=h-s:d?a(h+1.5*(e/v)):Math.abs(e)>10?(n(),d=!0):Math.abs(s)>3&&(b.scrollHeight>b.clientHeight?(c=!0,h=b.scrollTop):i())}),t(document).on(o.DRAGEND+u,function(t){var e=Number(new Date)-m;return d?(250>e&&Math.abs(g-p)>.1&&(p=0>p?-1:1),t.preventDefault(),t.stopImmediatePropagation(),s(),void 0):(i(),void 0)})}function i(){t(document).off(o.DRAGMOVE+u),t(document).off(o.DRAGEND+u),t(document).on(o.DRAGSTART+u,e)}function n(){l.$transition.stop()}function s(){i(),l.slideTo(Math.round(p)),p=0}function a(t){p=t,l.render(t)}var r,l=this,h=0,d=!1,c=!1,p=0;t(document).on(o.DRAGSTART+u,e),this.lightbox.$element.css("-ms-touch-action","none")},h.prototype.keepFocus=function(){var t=this.lightbox.$element,e=t.find(".explore-lightbox-wrapper"),i=t.find(".js-is-main"),n=t.find(".js-explore-lightbox-page"),s=n.filter(".is-curr");t.find(".js-is-main"),this.releaseFocus&&this.releaseFocus(),e.append(n.not(s)),i.append(s),a.keepFocus(i,!0)},h.prototype.slideTo=function(e,i){function n(){var n=["is-prev","is-curr","is-next"];if(t(s.pages).css({transform:"none"}),e>.1)s.pages.unshift(s.pages.pop());else{if(!(-.1>e))return;s.pages.push(s.pages.shift())}t(s.pages).removeClass("is-prev is-next is-curr"),t(s.pages).attr("style","");for(var o=0;3>o;o++){var r=t(s.pages[o]);r.addClass(n[o]).attr("aria-hidden","true"),"is-curr"===n[o]&&r.attr("aria-hidden","false")}s.loadLightbox(t(s.pages[1]).data("url")),s.keepFocus(),setTimeout(function(){a.focus(s.pages[1])},0),s.renderedPosition=0,i&&i()}var s=this;Math.round(e),this.$transition.stop(),this.$transition=t({value:this.renderedPosition}).animate({value:Math.round(e)},{duration:400,step:function(){s.render(this.value)},complete:n})},h.prototype.render=function(e){this.renderedPosition=e;var i=t(this.pages[0]),n=t(this.pages[1]),s=t(this.pages[2]);l(n,e),l(i,.6*e),l(s,.6*e)},h.prototype.render=function(e){var i;this.renderedPosition=e,-1>e&&(e=-1),e>1&&(e=1);var n=t(this.pages[e>0?2:0]),s=t(this.pages[1]),o=t(this.pages[e>0?0:2]);i=r(1-e),0>e?i-=1:i=1-i,l(s,.6*i),s.css({zIndex:Math.abs(e)>.5?5:6}),o.css({zIndex:Math.abs(e)>.5?6:0}),l(n,.4*i),i=r(e),l(o,.6*i)},h.prototype.destroy=function(){this._destroy()},h}),define("app/modules/explore/mashupGrid",["jquery","app/modules/BaseModule","lib/layout/FlexGrid","app/modules/explore/mashupLinks"],function(t,e,i,n){function s(t){var e,i=0;e=setInterval(function(){return i>=t.length?(clearInterval(e),void 0):(t.eq(i).addClass("is-placed"),i++,void 0)},100)}var o,a=".mashup-grid",r=0;return o=function(){this.$el=null,this.ns=a+r++,this.grid=new i},o.prototype=new e,o.prototype.init=function(e){var i=this;this.$el=t(e),this.mashupLinks=new n,this.mashupLinks.init(e);var o=this.$el.children(".l-column");return this.grid.addElements(o),s(o),i.relayout(),i.relayout(),this.on(window,"resize",this.bind(this.relayout)),t(window).load(this.bind(this.relayout)),this},o.prototype.relayout=function(){var t=this.$el.width(),e=Math.floor(t/200);2>e&&(e=2),this.$el.find(".l-one-col").css({width:100/e+"%"}),this.$el.find(".l-two-col").css({width:200/e+"%"}),this.grid.resize(t,e),this.$el.height(this.grid.getTotalHeight())},o.prototype.destroy=function(){this.mashupLinks.destroy(),this.$el&&(this.$el.off(this.ns),t(document).off(this.ns),t(window).off(this.ns),this.$el=null)},o}),define("app/modules/explore/stackHover",["jquery","app/modules/BaseModule"],function(t,e){var i,n=".stack-hover",s=0;return i=function(){this.$el=null,this.ns=n+s++},i.prototype=new e,i.prototype.init=function(e){this.$el=t(e),"ontouchstart"in window||(this.$el.on("mouseenter",this.bind(this.handleMouseEnter)),this.$el.on("mouseleave",this.bind(this.handleMouseLeave)))},i.prototype.handleMouseEnter=function(){this.$el.addClass("hover");for(var t=0;1>t&&t>-1;)t=-4+8*Math.random();var e=100*Math.random(),i=100*Math.random();this.$el.find(".js-stack-hover-bg").css({transform:"rotate("+t+"deg)","transform-origin":e+"% "+i+"%"}),this.$el.find(".js-stack-hover-fg").css({transform:"rotate("+t/-2+"deg)"})},i.prototype.handleMouseLeave=function(){this.$el.removeClass("hover"),this.$el.find(".js-stack-hover-bg, .js-stack-hover-fg").css({transform:"rotate(0deg)"})},i}),define("app/modules/explore/ExploreNavigation",["jquery","app/modules/BaseModule","lib/util/contextTrigger","lib/browser/KeyCode","lib/browser/Accessibility"],function(t,e,i,n,s){var o,a=".ExploreNavigation",r=0,l="accordion",h="dropdown";return o=function(){this.$el=null,this.ns=a+r++,this.nstemp=this.ns+"_temp"},o.prototype=new e,o.prototype.init=function(e){return this.$el=t(e),this.$exploreTriggers=this.$el.find(".js-explore_navigation_dropdown_trigger"),this.$exploreAccordionTriggers=this.$el.find(".js-explore_navigation--accordion_link"),this.$exploreTriggers.on("click"+this.ns,this.bind(this.dropdownClickHandler)),this.$exploreTriggers.on("keydown"+this.ns,this.bind(this.keyboardHandler)),this.$exploreAccordionTriggers.on("click"+this.ns,this.bind(this.accordionClickHandler)),this.$sitePage=t(".site-page"),this.openTimer=null,this.type="",this},o.prototype.accordionClickHandler=function(t){this.type=l,this.openSubmenu(t)},o.prototype.mouseoverHandler=function(){clearTimeout(this.closeTimer)},o.prototype.dropdownClickHandler=function(t){t.preventDefault(),this.type=h,this.openSubmenu(t)},o.prototype.mouseenterHandler=function(t){var e=this;this.type=h,this.openTimer=setTimeout(function(){e.openSubmenu(t)},100)},o.prototype.keyboardHandler=function(t){(t.keyCode==n.SPACE_BAR||t.keyCode==n.ENTER)&&(this.type=h,t.preventDefault(),this.openSubmenu(t))},o.prototype.openSubmenu=function(e){var i=t(e.target);return i.is("a")||(i=i.parent()),i.hasClass("is-active")?(e.preventDefault(),this.closeSubmenu(),void 0):(e.preventDefault(e),this.prepare(),this.type==h&&(clearTimeout(this.closeTimer),this.$el.addClass("is-dropdown-visible"),this.$closeBtn.attr("tabindex",0),this.$closeBtn.focus(),t(document).on("mousedown"+this.nstemp,this.bind(this.updateState))),this.prepareSubmenu(i),void 0)},o.prototype.prepareSubmenu=function(e){this.$menuTrigger=e;var i=t(e.attr("href"));this.$menuLinks=i.find("a,input,button"),this.$menuTrigger.addClass("is-active"),i.addClass("is-active"),i.attr("aria-hidden","false"),this.$menuTrigger.attr("aria-selected","true"),this.$menuLinks.attr("tabindex",0),this.isOpen=i,this.$closeBtn.attr("aria-hidden","false"),s.focus(i),t(window).trigger("resize")},o.prototype.updateState=function(t){var e=t.target||document.activeElement,i=this.inTarget([this.$dropdown[0],this.$el[0]],e);i||this.$sitePage.hasClass("is-ajax-loading")||this.closeSubmenu()},o.prototype.prepare=function(){void 0===this.$dropdownMenus&&this.initVariables(),this.type!=h||this.$isEventsBinded||this.bindUIActions(),this.resetClasses()},o.prototype.initVariables=function(){this.$dropdown=this.$el.find(".js-explore_navigation--dropdown"),this.$closeBtn=this.$el.find(".js-explore_navigation--dropdown--close"),this.$dropdownMenus=this.$el.find(".js-explore_navigation--dropdown--submenu"),this.$menuLinks=null,this.closeTimer=null,this.isOpen=null,this.$menuTrigger=null,this.$isEventsBinded=!1},o.prototype.bindUIActions=function(){this.$closeBtn.on("click"+this.ns,this.bind(this.closeBtnClickHandler)),this.$closeBtn.on("keydown"+this.ns,this.bind(this.closeBtnKeyboardHandler)),this.$isEventsBinded=!0},o.prototype.closeBtnKeyboardHandler=function(t){(t.keyCode==n.SPACE_BAR||t.keyCode==n.ENTER)&&(t.preventDefault(),this.closeSubmenu(t))},o.prototype.closeSubmenu=function(){this.resetClasses(),t(document).off(this.nstemp),this.$closeBtn.attr("tabindex",-1).attr("aria-hidden","true"),this.$menuLinks.attr("tabindex",-1),this.$menuTrigger.focus(),this.isOpen=!1},o.prototype.resetClasses=function(){this.$exploreAccordionTriggers.removeClass("is-active"),this.$exploreTriggers.removeClass("is-active").attr("aria-selected","false"),this.$el.removeClass("is-dropdown-visible"),this.$dropdownMenus.removeClass("is-active").attr("aria-hidden","true")},o.prototype.closeBtnClickHandler=function(t){t.preventDefault(),this.closeSubmenu()},o.prototype.closeNavigation=function(t){var e=this;clearTimeout(this.openTimer),clearTimeout(this.closeTimer),this.isOpen&&(this.closeTimer=setTimeout(function(){e.closeBtnClickHandler(t)},200))},o.prototype.inTarget=function(e,i){for(var n=0;n<e.length;n++)if(t.contains(e[n],i)||e[n]==i)return!0;return!1},o}),define("app/modules/explore/ExploreMetaNavigation",["jquery","app/modules/BaseModule"],function(t,e){var i,n=".ExploreMetaNavigation",s=0;return i=function(){this.$el=null,this.ns=n+s++,this.nstemp=this.ns+"_temp"},i.prototype=new e,i.prototype.init=function(e){return this.$el=t(e),this.$container=this.$el.parents(".js-tabs"),this.$mapTrigger=this.$el.find(".js-map_trigger"),this.$mapView=t("#map-view"),this.$mapTrigger.on("click"+n,this.bind(this.clickHandler)),this.updateState(),this},i.prototype.clickHandler=function(){this.$container.toggleClass("is-map-visible")},i.prototype.updateState=function(){this.$mapView.hasClass("is-active")?this.$container.addClass("is-map-visible"):this.$container.removeClass("is-map-visible")},i}),define("app/modules/explore/ExploreNavigationForm",["jquery","app/modules/BaseModule"],function(t,e){var i,n=".ExploreNavigationForm",s=0;return i=function(){this.$el=null,this.ns=n+s++,this.nstemp=this.ns+"_temp"},i.prototype=new e,i.prototype.init=function(e){function i(){setTimeout(function(){n.$checkboxValues.add(n.$hiddenValues).eq(0).trigger("change")},0)}var n=this;return this.$el=t(e),this.initVariables(),this.bindUIActions(),this.updateState(),this.$checkboxValues.is(":checked")?i():this.$hiddenValues.each(function(){return parseInt(this.value)?(i(),!1):void 0}),this},i.prototype.initVariables=function(){this.$checkboxValues=this.$el.find('input[type="checkbox"]'),this.$hiddenValues=this.$el.find('input[type="hidden"]'),this.$menuTriggerTitle=null,this.$menuTriggerValue=null,this.$rangeFrom=t("#range-from"),this.$rangeTo=t("#range-to"),this.suffix=t(".js-suffix").html()},i.prototype.bindUIActions=function(){this.$checkboxValues.on("click"+this.nstemp,this.bind(this.valueChangedHandler)),this.$hiddenValues.on("change"+this.nstemp,this.bind(this.valueChangedHandler))},i.prototype.valueChangedHandler=function(e){t(e.target).is(":checkbox")&&Modernizr.touch&&e.stopImmediatePropagation(),this.updateMenuTrigger(e.target)},i.prototype.updateState=function(){var e=this;t.each([this.$checkboxValues,this.$hiddenValues],function(){t.each(this,function(t,i){e.updateMenuTrigger(i)})})},i.prototype.updateMenuTrigger=function(e){var i=t(e),n=i.parents(".js-explore_navigation--dropdown--submenu").attr("id"),s=t(".js-explore_navigation_dropdown_trigger[href='#"+n+"'],.js-explore_navigation--accordion_link[href='#"+n+"']");this.$menuTriggerTitle=s.find(".js-explore_navigation--list--item--link--title"),this.$menuTriggerValue=s.find(".js-explore_navigation--list--item--link--value");var o=i.val();if(i.is(":checkbox")){var a=i.siblings(".js-input_checkbox_custom--label").text().replace(/^\s+|\s+$/g,"");i.is(":checked")?this.addValue(this.toTitleCase(a)):this.removeValue(this.toTitleCase(a))}else o=this.$rangeFrom.val()+"-"+this.$rangeTo.val()+this.suffix,this.$menuTriggerValue.html(o),"0"===this.$rangeFrom.val()&&"0"===this.$rangeTo.val()?(this.$menuTriggerValue.html(""),this.$menuTriggerTitle.show()):(this.$menuTriggerTitle.hide(),this.$menuTriggerValue.html(o))},i.prototype.addValue=function(e){var i=this.$menuTriggerValue.html().split(", ");1===i.length&&""===i[0]&&(i=[]),-1===t.inArray(e,i)&&(this.$menuTriggerTitle.hide(),i.push(e),this.$menuTriggerValue.html(i.join(", ")))},i.prototype.removeValue=function(e){var i=this.$menuTriggerValue.html().split(", ");if(-1!==t.inArray(e,i)){var n=t.inArray(e,i);i.splice(n,1),i.length>0?this.$menuTriggerValue.html(i.join(", ")):(this.$menuTriggerValue.html(""),this.$menuTriggerTitle.show())}},i.prototype.toTitleCase=function(t){return t.replace(/\w\S*/g,function(t){return t.charAt(0).toUpperCase()+t.substr(1).toLowerCase()})},i}),define("app/modules/explore/ExploreNavigationSearch",["jquery","app/modules/BaseModule","app/util/Capabilities"],function(t,e,i){var n,s=".ExploreNavigationSearch",o=0;return n=function(){this.$el=null,this.ns=s+o++,this.nstemp=this.ns+"_temp"},n.prototype=new e,n.prototype.init=function(e){return this.$el=t(e),this.$inputField=this.$el.find(".js-explore_navigation_search--input"),this.$inputField.on("focus"+this.ns,this.bind(this.prepare)),this},n.prototype.prepare=function(t){var e=this;t.preventDefault(),void 0===this.$form&&this.initVariables(),this.isHandlersBinded||this.bindUIActions(),("click"===t.type||"mouseenter"===t.type)&&setTimeout(function(){e.$inputField.focus()},0)},n.prototype.initVariables=function(){this.resultListClassName=".js-explore_navigation_search_result_list",this.$form=this.$el.find(".js-explore_navigation_search--form"),this.$resultList=this.$el.find(this.resultListClassName),this.$closeBtn=t(".js-explore_navigation--dropdown--close"),this.isHandlersBinded=!1},n.prototype.bindUIActions=function(){this.$inputField.on("keyup"+this.nstemp,this.bind(this.handleKeyUp)),this.$closeBtn.on(i.DRAGSTART+this.nstemp,this.bind(this.closeSearchBox)),this.isHandlersBinded=!0},n.prototype.closeSearchBox=function(){this.clearSearchBox(),this.removeEventListeners()},n.prototype.removeEventListeners=function(){this.$closeBtn.off(this.nstemp),this.$inputField.off(this.nstemp),this.isHandlersBinded=!1},n.prototype.handleKeyUp=function(){var t=this.$inputField.val();t.length>2?this.loadResults():0===t.length&&this.clearSearchBox()},n.prototype.clearSearchBox=function(){this.$xhr&&(this.$xhr.abort(),this.$el.removeClass("is-loading")),this.$inputField.val(""),this.$resultList.html(""),this.$el.removeClass("has-results")},n.prototype.loadResults=function(){function e(e){var n=t(e),s=n.find(i.resultListClassName),o=s.find(".js-explore_navigation_search_result_list--item");i.$resultList.html(s.html()),i.$el.removeClass("is-loading"),o.length>0?i.$el.addClass("has-results"):i.$el.removeClass("has-results")}var i=this,n=i.$form.attr("action")+"?"+this.$inputField.attr("name")+"="+this.$inputField.val();this.$xhr&&this.$xhr.abort(),this.$el.addClass("is-loading"),this.$xhr=t.ajax({type:"GET",url:n,dataType:"html",success:function(t){e(t)}})},n}),define("app/modules/content/ExplorerFeedItems",["jquery","app/modules/BaseModule"],function(t,e){var i,n=".explorer-feed-items",s=0;return i=function(){this.$el=null,this.ns=n+s++},i.prototype=new e,i.prototype.init=function(e){return this.$el=t(e),this.$ajaxContainer=this.$el.find(".js-explorer-feed-items__list"),this.$loadMoreBtn=this.$el.find(".js-explorer-load-more-content-btn"),this.bindUIActions(),this},i.prototype.bindUIActions=function(){this.$loadMoreBtn.on("click",this.bind(this.clickHandler))},i.prototype.clickHandler=function(t){t.preventDefault(),this.loadMore()},i.prototype.loadMore=function(){function e(e){var s=t(e),o=s.find(".js-explorer-feed-items__list"),a=s.find(".js-explorer-load-more-content-btn").attr("href"),r=o.find(".explorer-social-feed-item");i(r),n.$ajaxContainer.append(o.html()),n.$loadMoreBtn.removeClass("is-loading"),"explorer_feed_items.html"==a?n.$loadMoreBtn.hide():n.$loadMoreBtn.attr("href",a)}function i(t){for(var e=t.length-1;e>=0;e--){var i=t.eq(e);i.css({animation:"explorerShowUp 300ms 1 ease-out both","animation-delay":Math.min(80*e,1500)+"ms"})}}var n=this;this.$xhr&&this.$xhr.abort(),n.$loadMoreBtn.addClass("is-loading"),this.$xhr=t.ajax({type:"GET",url:n.$loadMoreBtn.attr("href"),dataType:"html",success:function(t){e(t)}})},i}),define("lib/browser/Visibility",["jquery"],function(){function t(t){var e=t,i=window.innerWidth,n=window.innerHeight,s="vertical",o=!0,a=e.getBoundingClientRect(),r=a.top>=0&&a.top<n,l=a.bottom>0&&a.bottom<=n,h=a.left>=0&&a.left<i,u=a.right>0&&a.right<=i,d=o?r||l:r&&l,c=o?h||u:h&&u;return"both"===s?d&&c:"vertical"===s?d:"horizontal"===s?c:void 0}function e(t,e){e||(e=0);var i=t,n=window.innerHeight,s=-e,o=n+e,a=i.getBoundingClientRect(),r=a.bottom>s&&a.top<o,l=r;return l}return{isVisible:t,isScrollVisible:e}}),define("app/modules/helpers/LoadMore",["jquery","app/modules/BaseModule","lib/net/HTMLLoader","lib/browser/Visibility"],function(t,e,i,n){var s,o=0,a=".LoadMore",r={autoload:!1};s=function(){this.$el=null,this.ns=a+o++,this.nstemp=this.ns+"temp",this.loader=new i},s.prototype=new e,s.prototype.init=function(e){return this.$el=t(e),this.config=t.extend({},r,{autoload:this.$el.data("autoload")?this.$el.data("autoload"):!1}),this.on("click",".js-load_more--button",this.bind(this.handleClick)),this.config.autoload&&"click"!==this.config.autoload&&this.initAutoload(),this
};var l=s.prototype.destroy;return s.prototype.destroy=function(){clearTimeout(this.autoloadTimeout),this.loader.cancel(),this._handleScroll&&document.removeEventListener("scroll",this._handleScroll,!0),l.call(this)},s.prototype.initAutoload=function(){this.$el.addClass("is-autoload"),this.autoloadTimeout=setTimeout(function(){this.autoloaded=0,this._handleScroll=this.handleScroll.bind(this),document.addEventListener("scroll",this._handleScroll,!0),this._handleScroll()}.bind(this),2e3)},s.prototype.handleScroll=function(){!this.loader.isLoading()&&n.isScrollVisible(this.$el.get(0),window.innerHeight||500)&&(this.autoload===!0||this.autoloaded<this.config.autoload)&&(this.autoloaded++,this.load())},s.prototype.handleClick=function(t){t.preventDefault(),this.autoloaded=0,this.load(),"click"===this.config.autoload&&(this.autoload=!0,this.initAutoload())},s.prototype.load=function(){var t=this.$el.find(".js-load_more--button"),e=t.attr("href");t.addClass("is-ajax-loader").prop("disabled",!0),this.loader.cancel(),this.loader.load(e,this.bind(this.handleLoad))},s.prototype.handleLoad=function(e){var i,n,s,o,a=t(e),r=this.$el.data("target"),l=this.$el.data("source")||r,h=(this.$el.data("update")||"").split(",");if(r&&(n=t(r),s=a.find(l),i=s.find("a,button,input,textarea,select").first(),n.append(s.children()),n.trigger("update")),h)for(o=0;o<h.length;o++)n=t(h[o]),s=a.find(h[o]),s.length?n.replaceWith(s):n.remove();if(0===a.find("#"+this.$el.attr("id")).length&&this.$el.remove(),this.$el.find(".js-load_more--button").removeClass("is-ajax-loader").prop("disabled",!1),i){var u=t(document).scrollTop();i.focus(),t("html, body").scrollTop(u)}},s}),define("app/modules/content/WebcheckinToggleRow",["jquery","app/modules/BaseModule","lib/browser/Accessibility"],function(t,e,i){function n(){t(".js-webcheckin__toggle-row").each(function(){this.toggleRowInstance&&this.toggleRowInstance.closeRow()})}var s,o=".webchecking-toggle-row",a=0;return s=function(){this.$el=null,this.ns=o+a++},s.prototype=new e,s.prototype.init=function(e){return e.toggleRowInstance=this,this.$el=t(e),this.initVariables(),this.bindUIActions(),this},s.prototype.initVariables=function(){this.$target=t(this.$el.data("target"))},s.prototype.bindUIActions=function(){this.$el.on("click"+this.ns,this.bind(this.openRow)),this.$target.on("click"+this.ns,".js-webcheckin__close-row",this.bind(this.closeRow))},s.prototype.openRow=function(t){t&&t.preventDefault(),n(),this.$el.addClass("is-active"),this.$target.addClass("is-active"),i.focusFirstText(this.$target)},s.prototype.closeRow=function(t){t&&t.preventDefault(),this.$el.removeClass("is-active"),this.$target.removeClass("is-active"),this.$el.focus()},s}),define("app/modules/widgets/currencyConvert",["jquery"],function(t){var e,i=".module-currencyConvert",n=0;e=function(){this.$el=null,this.ns=i+n++,this.conversions=null};var s=function(t,e){var i=t.data("exchangerate")*t.val();i=isNaN(i)?"error":i.toFixed(2),e.val(i)};return e.prototype.adaptCurrencyExchangerate=function(){var t,e;t=this.$curIn.find(":selected").val(),e=this.$curOut.find(":selected").val(),t==e?(this.$curInVal.data("exchangerate",1),this.$curOutVal.data("exchangerate",1)):(this.$curInVal.data("exchangerate",this.conversions[t][e]),this.$curOutVal.data("exchangerate",this.conversions[e][t]))},e.prototype.init=function(e){this.$el=t(e);var i=this;return this.conversions=this.$el.data("conversions"),this.$curIn=this.$el.find(".js-currency-in"),this.$curOut=this.$el.find(".js-currency-out"),this.$curInVal=this.$el.find(".js-currency-in-value"),this.$curOutVal=this.$el.find(".js-currency-out-value"),this.on("change",".js-currency-in",function(){i.adaptCurrencyExchangerate(),s(i.$curOutVal,i.$curInVal)}),this.on("change",".js-currency-out",function(){i.adaptCurrencyExchangerate(),s(i.$curInVal,i.$curOutVal)}),this.on("keyup",".js-currency-in-value",function(){s(t(this),i.$curOutVal)}),this.on("keyup",".js-currency-out-value",function(){s(t(this),i.$curInVal)}),this},e.prototype.destroy=function(){this.$el&&(this.$el.off(this.ns),t(document).off(this.ns),t(window).off(this.ns),this.$el=null)},e.prototype.on=function(){for(var e,i,n,s,o=[],a=0;a<arguments.length;a++)o[a]=arguments[a];switch(arguments.length){case 2:s=this.$el,e=o.shift(),n=o.shift();break;case 3:e=o.shift(),"string"==typeof e?(s=this.$el,i=o.shift(),n=o.shift()):(s=t(e),e=o.shift(),n=o.shift());break;case 4:s=t(o.shift()),e=o.shift(),i=o.shift(),n=o.shift()}i?s.on(e+this.ns,i,n):s.on(e+this.ns,n)},e.prototype.bind=function(t){var e=this;return function(){t.apply(e,arguments)}},e}),define("app/modules/widgets/widgetSlider",["jquery","app/modules/BaseModule"],function(t,e){var i,n=".module-widgetSlider",s=0;return i=function(){this.ns=n+s++,this.activeSlide=0,this.totalSlides=0,this.visibleSlideEq=0},i.prototype=new e,i.prototype.buildControls=function(){var e,i,n=t("<ol />",{"class":"content-teaser-slider-indicator"});e=this,i=t("<li />",{"class":"content-teaser-slider-slide-nr js-widget-slide-indicator"}),i.append("<a href='#' class='content-teaser-slider-slide-link' >go to slide</a>"),e.$topSlides.each(function(){i.clone().appendTo(n)}),e.$triggers=n.find(".js-widget-slide-indicator"),n.on("click"+e.ns,".js-widget-slide-indicator",function(i){i.preventDefault(),e.showSlide(t(this).index()),clearInterval(e.interval)}),n.appendTo(e.$topContainer)},i.prototype.showSlide=function(t){this.visibleSlideEq=t,this.$triggers.eq(t).addClass("is-active").siblings().removeClass("is-active"),this.$topSlides.eq(t).addClass("is-active").siblings().removeClass("is-active"),this.$bottomSlides.eq(t).addClass("is-active").siblings().removeClass("is-active")},i.prototype.init=function(e){var i=this;return this.$topContainer=t(e),this.$topSlides=this.$topContainer.find(".js-widget-slider-slide"),this.$bottomContainer=t(".js-widget-slider-bottom"),this.$bottomSlides=this.$bottomContainer.find(".js-widget-slider-slide"),this.totalSlides=this.$topSlides.length,this.buildControls(),i.showSlide(0),i.interval=setInterval(function(){i.visibleSlideEq==i.totalSlides-1?i.showSlide(0):i.showSlide(i.visibleSlideEq+1)},6e3),this},i.prototype.destroy=function(){this.$el&&(this.$el.off(this.ns),t(document).off(this.ns),t(window).off(this.ns),this.$el=null)},i}),define("app/modules/maps/BaseMap",["jquery","app/modules/BaseModule","mapbox","mapboxPlugins"],function(t,e){function i(t){var e=t.match(/\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}/)[0]+"+00:00";return new Date(e)}function n(t){t instanceof Date||(t=i(t));var e="0"+t.getHours(),n="0"+t.getMinutes();return e.substr(-2)+":"+n.substr(-2)}var s,o=".basemap",a=0;return s=function(){this.$el=null,this.ns=o+a++},s.prototype=new e,s.prototype.init=function(e){var i=this;if(this.$el=t(e),this.$wrapper=t(".js-route-network-wrapper"),this.$wrapper.is(":hidden")){var n=function(){i.$wrapper.is(":hidden")||(i.initMap(),t(window).off("resize"+o,n))};t(window).on("resize"+o,n)}else i.initMap();return this},s.prototype.initMap=function(){function t(){e.updateFlights(function(){e.$wrapper.removeClass("is-loading"),setTimeout(t,5e3)})}var e=this;this.locations=this.$el.data("map-locations"),this.CENTER_LATLNG="world"==this.$el.data("map-type")?new L.LatLng(23.725,10.9):new L.LatLng(46.95,-1),this.CENTER_ZOOM="world"==this.$el.data("map-type")?3:5,this.SIMPLIFIED=!L.Browser.svg,this.destinations={},this.routes=[],this.flights=[],this.initVariables(),this.defineStyles(),this.createMap();var i=function(){this.renderMarkers(this.locations),this.renderRoutes(this.locations),this.getFlightGroup(),this.initEventListeners()}.bind(this);this.apiUrl=this.$el.data("map-live"),this.apiUrl?(this.$wrapper.addClass("is-loading"),this.updateWeather(function(){i(),t()})):i()},s.prototype.initVariables=function(){var e,i,n,s,o;for(this.zoomControlsPosition="topright",this.routesHash={},e=this.locations.length-1;e>=0;e--)s=this.locations[e],o=t.extend({},s,{type:"destination",marker:null,operator:null,origins:[],weather:{temperature:{}}}),this.destinations[s.iata]=o;for(e=this.locations.length-1;e>=0;e--)for(s=this.locations[e],o=this.destinations[s.iata],i=s.routes.length-1;i>=0;i--){var a=s.routes[i];a.to=s.iata,a.type="route";for(var n=a.operators.length-1;n>=0;n--)a.operators[a.operators[n]]=!0;a.operators.Swiss?o.operator="Swiss":a.operators.Edelweiss&&"Swiss"==!o.operator&&(o.operator="Edelweiss"),this.routesHash[a.from+a.to]?console.log("ERROR: Double definition of route "+a.from+" - "+a.to):(this.routes.push(a),this.routesHash[a.from+a.to]=a,this.routesHash[a.to+a.from]=a,this.destinations[a.from].origins.push(a.to),this.destinations[a.to].origins.push(a.from))}},s.prototype.getDestination=function(t){return this.destinations[t]},s.prototype.getRoute=function(t,e){return this.routesHash[t+e]},s.prototype.getFlights=function(t,e){var i=[];for(var n in this.flights){var s=this.flights[n];(s.from.iata==t&&s.to.iata==e||s.to.iata==t&&s.from.iata==e)&&i.push(s)}return i},s.prototype.getFlight=function(t){return this.flights[t]},s.prototype.routeHasOperator=function(t,e,i){var n=this.getRoute(t,e);return!!n.operators[i]},s.prototype.destinationHasOperator=function(t,e){for(var i=this.getDestination(t),n=i.origins.length-1;n>=0;n--)if(this.routeHasOperator(t,i.origins[n],e))return!0;return!1},s.prototype.defineStyles=function(){this.LINE_STYLE={color:"#c00",opacity:.1,weight:1,clickable:!1,smoothFactor:.25},this.LINE_STYLE_CODESHARE={color:"#333333",opacity:.1,weight:1,clickable:!1,smoothFactor:.25},this.LINE_STYLE_FOCUS={opacity:.5},this.LINE_STYLE_NOFOCUS={opacity:.05},this.MARKER_OPACITY=1,this.MARKER_OPACITY_NOFOCUS=.2,this.MARKER_ICON_SWISS=new L.DivIcon({className:"map-marker",iconSize:[20,20],iconAnchor:[10,10],popupAnchor:[0,-4]}),this.MARKER_ICON_CODESHARE=new L.DivIcon({className:"map-marker map-marker--codeshare",iconSize:[20,20],iconAnchor:[10,10],popupAnchor:[0,-4]}),this.MARKER_ICON_PLANE=new L.DivIcon({className:"map-marker map-marker--plane",iconSize:[24,24],iconAnchor:[12,12],popupAnchor:[0,-6],scale:.7}),this.MARKER_ICON_START=new L.DivIcon({className:"map-marker map-marker--start",iconSize:[20,20],iconAnchor:[10,10],popupAnchor:[0,-6]})},s.prototype.initEventListeners=function(){this.map.addEventListener("popupopen",this.bind(function(t){var e=t.popup.target;t.popup.temporary||(this.selected=e),this.highlight(this.selected||e)})),this.map.addEventListener("popupclose",this.bind(function(t){t.popup.target!==this.selected||t.popup.temporary||(this.selected=null),this.highlight(this.selected)})),this.$el.parent().on("click",function(t){t.stopPropagation()})},s.prototype.highlight=function(t){t?"destination"==t.type?this.highlightDestination(t.iata):"flight"==t.type&&this.highlightFlight(t.id):this.resetHighlight()},s.prototype.createMap=function(){var e=this;L.mapbox.accessToken="pk.eyJ1Ijoic3dpc3MiLCJhIjoiQUoybTQ5byJ9.-FpG_sxMlc-EdnyxnFsFYw",L.mapbox.config.HTTPS_URL="https://api.mapbox.com",L.mapbox.config.FORCE_HTTPS=!0,this.map=L.mapbox.map(this.$el[0],null,{zoomControl:!1,minZoom:2,maxZoom:7,keyboard:!1,scrollWheelZoom:!1,attributionControl:!1,worldCopyJump:!0}),L.mapbox.styleLayer("mapbox://styles/swiss/cj9h6cac31u1h2spar3l2ia5a").addTo(this.map),this.map.addControl(L.control.zoom({position:e.zoomControlsPosition})),window.map=this.map,this.map.setView(this.CENTER_LATLNG,this.CENTER_ZOOM),this.$el.find("a").attr("tabindex","-1"),e.map.getSize().y>t(window).height()-100&&L.Browser.touch&&e.disableMapInteraction(),t(window).on("resize",function(){var i=e.map.getSize().y,n=t(window).height()-100;i>n&&L.Browser.touch?e.disableMapInteraction():e.enableMapInteraction()})},s.prototype.highlightDestination=function(t){this.setFeatureStyle("off");var e=this.getDestination(t);this.setMarkerStyle(e,"on");for(var i=e.origins.length-1;i>=0;i--){var n=e.origins[i];this.setMarkerStyle(this.getDestination(n),"on"),this.setLineStyle(this.getRoute(t,n),"on");for(var s=this.getFlights(t,n),o=s.length-1;o>=0;o--)this.setMarkerStyle(s[o],"on")}},s.prototype.highlightRoute=function(t,e){this.setFeatureStyle("off"),this.setMarkerStyle(this.getDestination(t),"on"),this.setMarkerStyle(this.getDestination(e),"on"),this.setLineStyle(this.getRoute(t,e),"on")},s.prototype.highlightFlight=function(t){var e=this.flights[t];this.highlightRoute(e.from.iata,e.to.iata),this.setMarkerStyle(e,"on")},s.prototype.resetHighlight=function(){this.setFeatureStyle("default")},s.prototype.setFeatureStyle=function(t){var e;for(e in this.destinations)this.setMarkerStyle(this.destinations[e],t);for(e in this.flights)this.setMarkerStyle(this.flights[e],t);for(e=this.routes.length-1;e>=0;e--)this.setLineStyle(this.routes[e],t)},s.prototype.setMarkerStyle=function(t,e){t.marker.setOpacity("off"==e?.2:1)},s.prototype.setLineStyle=function(t,e){var i=t.lineStyle;"off"==e?i=this.LINE_STYLE_NOFOCUS:"on"==e&&(i=this.LINE_STYLE_FOCUS),t.line.setStyle(i)},s.prototype.getAllRoutesAndMarkersByIATA=function(t,e){var i=[],n=[];for(var s in t)for(var o=t[s].routes,a=o.length-1;a>=0;a--)o[a].iataStart===e&&(i.push(o[a]),n.push(t[s].marker));return n.push(t[e].marker),{routes:i,markers:n}},s.prototype.setLineFocusStyle=function(t){var e,i=this;for(this.setStyle(i.destinations,i.LINE_STYLE_NOFOCUS),e=t.length-1;e>=0;e--)t[e].setStyle(i.LINE_STYLE_FOCUS)},s.prototype.setStyle=function(t,e){for(var i in t){var n=t[i].routes;if(void 0!==n)for(var s=n.length-1;s>=0;s--)n[s].line.setStyle(e)}},s.prototype.setMarkerFocusStyleByDestination=function(t){var e,i=this;for(var n in i.destinations){var s=i.destinations[n].marker;s.setOpacity(this.MARKER_OPACITY_NOFOCUS)}for(t.marker.setOpacity(this.MARKER_OPACITY),e=0;e<t.startpoints.length;e++)t.startpoints[e].setOpacity(this.MARKER_OPACITY)},s.prototype.setMarkerFocusStyle=function(t){var e,i=this;for(var n in i.destinations){var s=i.destinations[n].marker;s.setOpacity(this.MARKER_OPACITY_NOFOCUS)}for(e=t.length-1;e>=0;e--)t[e].setOpacity(i.MARKER_OPACITY)},s.prototype.disableMapInteraction=function(){this.map.dragging.disable(),this.map.touchZoom.disable(),this.map.tap&&this.map.tap.disable(),this.map.doubleClickZoom&&this.map.doubleClickZoom.disable(),this.map.setView(this.CENTER_LATLNG,this.CENTER_ZOOM),this.map.invalidateSize()},s.prototype.enableMapInteraction=function(){this.map.dragging.enable(),this.map.touchZoom.enable(),this.map.doubleClickZoom.enable(),L.Browser.touch&&!L.Browser.pointer&&this.map.tap.enable()},s.prototype.renderMarkers=function(){var e=this,i=this.markerGroup=new L.FeatureGroup;t.each(this.destinations,function(t,n){var s;s="ZRH"==n.iata||"GVA"==n.iata?new L.Marker(new L.LatLng(n.lat,n.lng),{icon:e.MARKER_ICON_START,keyboard:!1,zIndexOffset:1e4}):"Swiss"==n.operator?new L.Marker(new L.LatLng(n.lat,n.lng),{icon:e.MARKER_ICON_SWISS,keyboard:!1,zIndexOffset:9e3}):new L.Marker(new L.LatLng(n.lat,n.lng),{icon:e.MARKER_ICON_CODESHARE,keyboard:!1,zIndexOffset:9e3});var o=e.getPopUp(n);o&&(o.target=n,s.bindPopup(o)),s.id=n.iata,i.addLayer(s),n.marker=s}.bind(this)),e.map.addLayer(i)},s.prototype.getPopUpContent=function(){},s.prototype.getPopUp=function(t){var e=this.getPopUpContent(t);if(e){var i=new L.Popup({closeButton:!1,className:"swiss-map-popup swiss-map-popup-"+t.type,autoPanPadding:new L.Point(50,50)});return i.setContent(e),i}return!1},s.prototype.findDestination=function(t){return this.destinations[t]},s.prototype.renderRoutes=function(){var e=this,i=this.routesGroup=new L.LayerGroup;t.each(this.routes,function(t,n){var s,o=this.getDestination(n.from).marker,a=this.getDestination(n.to).marker,r=this.routeHasOperator(n.from,n.to,"Swiss")?this.LINE_STYLE:this.LINE_STYLE_CODESHARE;s=e.SIMPLIFIED?new L.Polyline([o.getLatLng(),a.getLatLng()],r):new L.GreatCircle([o.getLatLng(),a.getLatLng()],r),i.addLayer(s),n.lineStyle=r,n.line=s}.bind(this)),e.map.addLayer(i)},s.prototype.updateFlights=function(e){var s=this;this.cachedFlightsData;var o=function(){for(var t=new Date,n=s.cachedFlightsData,o=0;o<n.length;o++){var a=n[o],r=i(a.from.time),l=i(a.to.time);a.progress=(t-r)/(l-r)}s.renderFlights(n),e&&e()};this.cachedFlightsData&&new Date-this.cachedFlightsData.time<6e4?o():t.getJSON(this.apiUrl+"flights",function(e){var a=[],r=new Date;a.time=r;for(var l=0;l<e.length;l++){var h=e[l];i(h.from.time),i(h.to.time),s.getRoute(h.from.iata,h.to.iata)&&(h.from=t.extend(h.from,s.getDestination(h.from.iata)),h.to=t.extend(h.to,s.getDestination(h.to.iata)),h.from.timeString=n(h.from.time),h.to.timeString=n(h.to.time),h.destination="ZRH"===h.from.iata||"GVA"===h.from.iata?h.to:h.from,a.push(h))}s.cachedFlightsData=a,o()}).fail(e)},s.prototype.updateWeather=function(e){var i={cloudy:"bedeckt",sunny:"sonnig",cloudysunny:"bewoelkt",rainy:"regen",foggy:"nebel",lightning:"gewitter",snow:"schneefall",rainysunny:"wolkig"},n=this;t.getJSON(this.apiUrl+"weather",function(t){console.log("Weather",t);for(var e=0;e<t.length;e++){var s=t[e],o=n.getDestination(s.iata);o&&(s.picto=i[s.condition],o.weather=s)}}).always(e)},s.prototype.getMarkerGroup=function(){return this.markerGroup},s.prototype.getFlightGroup=function(){if(!this.flightGroup){var t=this.flightGroup=new L.FeatureGroup;t.on("click",function(t){return setTimeout(function(){t.layer.openPopup(),self.keepPopupOpen=!0},0),!1}),this.map.addLayer(t)}return this.flightGroup},s.prototype.renderFlights=function(e){var i,n=this;this.flights||(this.flights={});for(i in this.flights)this.flights[i].live=!1;var s=this.getFlightGroup(),o=[];t.each(e,this.bind(function(t,e){var i=this.flights[e.id];if(!i){if(!this.getRoute(e.from.iata,e.to.iata))return o.push(e),void 0;i={type:"flight"},i.marker=new L.TransformedMarker(new L.LatLng(0,0),{icon:n.MARKER_ICON_PLANE,keyboard:!1}),i.marker.id=e.id,this.renderFlightMarker(i.marker,e),i.marker.setScale(0);var a=n.getPopUp(e);a&&(a.target=i,i.marker.bindPopup(a)),s.addLayer(i.marker),this.flights[e.id]=i}})),o.length>0&&console.log(o.length+" flights will not be rendered because they are not covered by the route network",o),setTimeout(function(){t.each(e,this.bind(function(e,i){var n=this.flights[i.id];!n||n.progress>1||n.progress<0||(n.live=!0,n.progress!=i.progress&&(n=t.extend(n,i),this.renderFlightMarker(n.marker,n),t(n.marker._icon).css({transition:"transform 200ms ease-in-out"})))}));for(i in this.flights)this.flights[i].live||(t(this.flights[i].marker._icon).css({transition:"transform 200ms ease-in"}),this.flights[i].marker.setScale(0),this.flights[i].marker.update());this.renderFlightsTable()}.bind(this),0),setTimeout(function(){for(i in this.flights)if(this.flights[i].live)t(this.flights[i].marker._icon).css({transition:""});else{var e=this.flights[i].marker;delete this.flights[i],s.removeLayer(e)}this.highlight(this.selected)}.bind(this),200)},s.prototype.renderFlightMarker=function(t,e){var i=this.destinations[e.from.iata].marker,n=this.destinations[e.to.iata].marker,s=e.progress,o=L.GreatCircle.prototype.pointAt(i.getLatLng(),n.getLatLng(),s),a=L.GreatCircle.prototype.pointAt(i.getLatLng(),n.getLatLng(),s+.001),r=this.map.project(o),l=this.map.project(a),h=Math.atan2(l.y-r.y,l.x-r.x);t.setScale(1),t.setAngle(180*h/Math.PI),t.setLatLng(o)},s.prototype.renderFlightsTable=function(){var e=t(".js-flights-table"),i=e.find("tbody");$rows=i.children();var n=[];$rows.each(function(){n.push(this.flightId),this.verified=!1});var s,o,a,r=[];for(var l in this.flights)o=this.flights[l],a=n.indexOf(o.id),a>=0?n.splice(a,1):(s=[o.no,o.from.city,o.to.city,o.from.timeString,o.to.timeString],s.id=o.id,r.push(s));var h=$rows.filter(function(){return n.indexOf(this.flightId)>=0});h.remove();for(var l=0;l<r.length;l++){var u=t("<tr><td>"+r[l].join("</td><td>")+"</td></tr>");u.get(0).flightId=r[l].id,i.append(u)}e.show()},s}),define("app/modules/maps/routeNetwork",["jquery","app/modules/maps/BaseMap","lib/util/Templates","app/util/delayModule"],function(t,e,i,n){function s(t){t=l(t);var e=t.getMonth()+1;if(e>3&&10>e)return!0;if(3>e||e>10)return!1;var i=r(t);return t>=i?3===e:10===e}function o(t){var e=h(t,-1);return s(e)&&(e=h(t,-2)),e}function a(t){return new Date(t.getFullYear(),t.getMonth()+1,1,-12)}function r(t){var e=a(t),i=e.getDay();return e.setDate(e.getDate()-i),e}function l(t){return new Date(t.getFullYear(),t.getMonth(),t.getDate())}function h(t,e){var i=36e5*e-6e4*t.getTimezoneOffset();return new Date(t.getTime()+i)}var u,d=".route-network",c=0;u=function(){this.$el=null,this.ns=d+c++},u.prototype=new e,n(u),u.prototype.getTooltipContent=function(t){var e="";return e="destination"==t.type?"Swiss"==t.operator?"<span class='ico ico-winglet-swiss tooltip-winglet'></span>"+t.city:"Edelweiss"==t.operator?"<span class='ico ico-winglet-edelweiss tooltip-winglet'></span>"+t.city:"<span class='ico ico-winglet-codeshare tooltip-winglet'></span>"+t.city:"<span class='ico ico-winglet-swiss tooltip-winglet'></span>"+t.from.city+" - "+t.to.city},u.prototype.getPopUpContent=function(t){return"destination"==t.type?i.render("map_destination_flyout",{destination:t}):i.render("map_flight_flyout",{flight:t})};var p=e.prototype.initEventListeners;return e.prototype.initEventListeners=function(){p.call(this);var t=this.getMarkerGroup(),e=this.getFlightGroup(),i=new L.Popup({closeButton:!1,className:"swiss-map-tooltip",autoPanPadding:new L.Point(50,50)});i.temporary=!0;var n=this.bind(function(t,e){t!==this.selected&&(i.setContent(this.getTooltipContent(t)),i.setLatLng(e.layer.getLatLng()),i.target=t,map.addLayer(i))});t.on("mouseover",this.bind(function(t){var e=this.getDestination(t.layer.id);return n(e,t),!1})),t.on("mouseout",this.bind(function(){return map.removeLayer(i),!1})),e.on("mouseover",this.bind(function(t){var e=this.getFlight(t.layer.id);return n(e,t),!1})),e.on("mouseout",this.bind(function(){return map.removeLayer(i),!1}));var s=this.$el.parents(".js-route-network-wrapper").find(".js-route-network-time"),a=function(){var t=new Date;s.text(o(t).toLocaleTimeString())}.bind(this);setInterval(a,1e3),setTimeout(a,0)},u}),define("app/modules/maps/explorerRouteNetwork",["jquery","app/modules/maps/BaseMap"],function(t,e){var i,n=".explorer-route-network",s=0;return i=function(){this.$el=null,this.ns=n+s++},i.prototype=new e,i.prototype.defineStyles=function(){this.LINE_STYLE={color:"#c00",opacity:.1,weight:1,clickable:!1},this.LINE_STYLE_NEXT={color:"#4f4440",opacity:.1,weight:1,clickable:!1},this.LINE_STYLE_FOCUS={opacity:.5},this.LINE_STYLE_NOFOCUS={opacity:.05},this.MARKER_OPACITY=1,this.MARKER_OPACITY_NOFOCUS=.2,this.MARKER_ICON_PREV=new L.DivIcon({className:"map-marker",iconSize:[20,20],iconAnchor:[10,10],popupAnchor:[0,-4]}),this.MARKER_ICON_CURR=new L.DivIcon({className:"map-marker map-marker--curr",iconSize:[20,20],iconAnchor:[10,10],popupAnchor:[0,-4]}),this.MARKER_ICON_NEXT=new L.DivIcon({className:"map-marker map-marker--codeshare",iconSize:[20,20],iconAnchor:[10,10],popupAnchor:[0,-4]}),this.MARKER_ICON_START=new L.DivIcon({className:"map-marker map-marker--start",iconSize:[20,20],iconAnchor:[10,10],popupAnchor:[0,-6]})},i.prototype.paintMarkers=function(e){var i=this,n=new L.FeatureGroup,s=new L.Point(50,50);t.each(e,function(t,e){var o,a,r;"ZRH"==e.iata||"GVA"==e.iata||"BSL"==e.iata?o=new L.Marker(new L.LatLng(e.lat,e.lng),{icon:i.MARKER_ICON_START,zIndexOffset:1e3}):("next"==e.state?(o=new L.Marker(new L.LatLng(e.lat,e.lng),{icon:i.MARKER_ICON_NEXT}),o.lineStyle=i.LINE_STYLE_NEXT):"prev"==e.state?(o=new L.Marker(new L.LatLng(e.lat,e.lng),{icon:i.MARKER_ICON_PREV}),o.lineStyle=i.LINE_STYLE):(o=new L.Marker(new L.LatLng(e.lat,e.lng),{icon:i.MARKER_ICON_CURR}),o.lineStyle=i.LINE_STYLE),o.type=e.state),a=new L.Popup({closeButton:!1,autoPanPadding:s}).setContent(i.getPopUpContent(r,e)),o.bindPopup(a),a.id=e.iata,o.id=e.iata,n.addLayer(o),void 0===i.destinations[e.iata]&&(i.destinations[e.iata]=[]),i.destinations[e.iata].endpoint=o}),i.bindMouseOverEvent(n),n.on("click",function(t){return setTimeout(function(){t.layer.openPopup(),i.customClickHandler(),i.keepPopupOpen=!0},0),!1}),i.map.addLayer(n)},i.prototype.getPopUpContent=function(e,i){return t("#tooltip-"+i.iata).html()},i.prototype.customInit=function(){var e=this;this.$pageHeader=t(".explorer-page-header");var i=function(){e.CENTER_ZOOM=t(window).width()<640?1:3,e.map.setView(e.CENTER_LATLNG,e.CENTER_ZOOM)};t(window).on("resize",function(){i()}),i()},i.prototype.customClickHandler=function(){t(window).width()>=640&&this.$pageHeader.css("visibility","hidden")},i.prototype.customPopupCloseHandler=function(){this.$pageHeader.is(":visible")&&this.$pageHeader.css("visibility","visible")},i}),define("app/modules/maps/destinationFinderRouteNetwork",["jquery","app/modules/maps/BaseMap"],function(t,e){function i(t){a[t]=n.prototype[t]}var n,s=".destination-finder-route-network",o=0;n=function(){this.$el=null,this.ns=s+o++},n.prototype=new e;var a={};return i("initMap"),n.prototype.initMap=function(){a.initMap.call(this);var e=this;this.$pageHeader=t(".js-tabs");var i=function(){!e.$pageHeader.hasClass("is-map-visible")&&e.openedLayer&&e.openedLayer.closePopup(),e.map.invalidateSize()};t(window).on("resize",function(){i()}),i()},i("initVariables"),n.prototype.initVariables=function(){a.initVariables.call(this),this.CENTER_LATLNG=new L.LatLng(46.95,-1),this.zoomControlsPosition="bottomleft",this.openedLayer=null},i("defineStyles"),n.prototype.defineStyles=function(){a.defineStyles.call(this),this.LINE_STYLE={color:"#4f4440",opacity:.1,weight:1,clickable:!1},this.LINE_STYLE_FOCUS={opacity:.5},this.LINE_STYLE_NOFOCUS={opacity:.05},this.MARKER_OPACITY=1,this.MARKER_OPACITY_NOFOCUS=.2,this.MARKER_ICON_SWISS=new L.DivIcon({className:"map-marker",iconSize:[20,20],iconAnchor:[10,10],popupAnchor:[0,-4]}),this.MARKER_ICON_CODESHARE=new L.DivIcon({className:"map-marker map-marker--codeshare",iconSize:[20,20],iconAnchor:[10,10],popupAnchor:[0,-4]}),this.MARKER_ICON_EDELWEISS=new L.DivIcon({className:"map-marker map-marker--edelweiss",iconSize:[20,20],iconAnchor:[10,10],popupAnchor:[0,-4]}),this.MARKER_ICON_START=new L.DivIcon({className:"map-marker map-marker--start",iconSize:[20,20],iconAnchor:[10,10],popupAnchor:[0,-6]})},n.prototype.paintMarkers=function(e){var i=this,n=new L.FeatureGroup,s=new L.Point(50,50);t.each(e,function(e,o){var a,r,l,h;"ZRH"==o.iata||"GVA"==o.iata||"BSL"==o.iata?(a=new L.Marker(new L.LatLng(o.lat,o.lng),{icon:i.MARKER_ICON_START,zIndexOffset:1e3}),a.lineStyle=i.LINE_STYLE):(l=o.routes[0].operators,h=-1!==t.inArray("Codeshare",l)?i.MARKER_ICON_CODESHARE:-1!==t.inArray("Edelweiss",l)?i.MARKER_ICON_EDELWEISS:i.MARKER_ICON_SWISS,a=new L.Marker(new L.LatLng(o.lat,o.lng),{icon:h}),a.lineStyle=i.LINE_STYLE),r=new L.Popup({closeButton:!1,offset:s,autoPanPadding:s}).setContent(i.getPopUpContent(o)),a.bindPopup(r),r.target=o,a.id=o.iata,n.addLayer(a)}),n.on("mouseover",function(t){i.highlightDestination(t.layer.id)}),n.on("mouseout",function(){return i.resetHighlight(),!1}),n.on("click",function(t){return setTimeout(function(){i.openedLayer=t.layer,i.openedLayer.openPopup(),i.keepPopupOpen=!0},0),!1}),i.map.addLayer(n)},n.prototype.getPopUpContent=function(e){return t("#tooltip-"+e.iata).html()},n}),define("app/modules/booking/seatselection",["jquery","app/modules/BaseModule","app/util/Capabilities","lib/util/Templates","app/modules/helpers/flyout-trigger","app/plugins/lightboxLink","lib/browser/KeyCode","lib/browser/Accessibility"],function(t,e,i,n,s,o,a,r){function l(e,n){n||(n={forceUpdate:!1});var s=t("html").hasClass("is-seatmap-active");if(e!=s||n.forceUpdate){var o=t(".js-seatselection-seatmap");e?(i.system.android&&(c=t(document).scrollTop(),t("html, body").scrollTop(0)),t("html").addClass("is-seatmap-active"),o.attr("aria-hidden","false")):(i.system.android&&t("html, body").scrollTop(c),t("html").removeClass("is-seatmap-active"),o.attr("aria-hidden","true")),o.find(".js-seat").attr("tabindex",e?"":"-1")}}var h,u=".Seatselection",d=0;h=function(){this.$el=null,this.ns=u+d++,h.instance=this},h.prototype=new e,h.prototype.init=function(e){return this.$el=t(e),this.options=this.$el.data("seatselection"),this.$passengerInputs=this.$el.find(".js-seatselection-input"),this.$passengerViews=this.$el.find(".js-seatselection-passenger"),this.$seats=this.$el.find(".js-seat"),this.$passengerInputs.length?(this.initModel(),this.initController(),this.initAccessibility(),l(!1,{forceUpdate:!0}),this.validate(),this.$passengerViews.filter("[data-selected]").first().each(function(){t(this).trigger("click")}),this):(this.destroy(),!1)},h.prototype.initModel=function(){var e=this;this.data={passengers:[],seats:{}},this.selectedPassenger=!1,this.initialSeats=[],this.options.selectedPassenger&&(this.selectedPassenger=this.options.selectedPassenger),!this.selectedPassenger&&t(".js-seatselection-selection").length&&(this.selectedPassenger=t(".js-seatselection-selection").val()),this.$passengerInputs.each(function(i){var n=t(this),s=n.data("passenger"),o=e.$passengerViews.filter('[data-passenger="'+s+'"]'),a={id:s,index:i,seat:n.val(),$input:n,$view:o};e.initialSeats.push(a.seat),e.selectedPassenger||a.seat||(e.selectedPassenger=a.id),e.data.passengers.push(a)}),this.$passengerInputs.on("change",this.bind(function(e,i){if("seatselection"!==i){var n=t(e.currentTarget),s=n.data("passenger"),o=n.val(),a=this.getPassenger(s);a.seat!==o&&this.addSeatToPassenger(s,o)}})),this.selectedPassenger||(this.selectedPassenger=this.getPassengerAt(0).id),this.previouslySelectedPassenger=this.selectedPassenger,t(".js-seatselection-selection").length&&t(".js-seatselection-selection").val()!=this.selectedPassenger&&t(".js-seatselection-selection").val(this.selectedPassenger).trigger("change"),this.$seats.each(function(){var i=t(this),n=i.data("seat");n.$el=i,e.data.seats[n.id]=n})},h.prototype.hasModelChanged=function(){for(var t=[],e=0;e<this.data.passengers.length;e++)t.push(this.data.passengers[e].seat);return t.join("||")!=this.initialSeats.join("||")},h.prototype.initController=function(){var e=this;t(document).on("click"+this.ns,".js-seat-basket-button, .seatmap--seats .js-seat",this.bind(function(i){i.preventDefault();var n=t(i.currentTarget),s=n.attr("name");e.addSeatToPassenger(this.selectedPassenger,s)&&(l(!1),t(i.currentTarget).trigger("mouseenter"))})),this.on("mouseenter",".seatmap--seats .js-seat",function(){var i=t(this).data("seat").id,n=e.getPassengerForSeat(i);n&&(e.previouslySelectedPassenger=e.selectedPassenger,e.showPassenger(n.id))}),this.on("mouseleave",".seatmap--seats .js-seat",function(){var i=t(this).data("seat").id,n=e.getPassengerForSeat(i);n&&e.showPassenger(e.previouslySelectedPassenger)}),this.on("click",".js-seatselection-passenger",function(i){i.preventDefault();var n=t(this).data("passenger"),s=e.getPassenger(n);if(e.setSelectedPassenger(n),l(!0),this.$previouslyFocused=t(":focus"),s.seat)e.getSeat(s.seat).$el.focus();else{var o=e.$seats.filter(":enabled").filter(":not(.is-selected)");o.length?o.first().focus():r.focusFirstText(e.$el.find(".js-seatmap"))}t(".js-seatselection-seatmap").scrollTop(0)}),this.on("change",".js-seatselection-selection",function(i){var n=t(i.currentTarget).val();e.setSelectedPassenger(n)}),this.on("mouseenter",".js-seatselection-passenger",function(){var i=t(this).data("passenger");e.previouslySelectedPassenger=e.selectedPassenger,e.showPassenger(i)}),this.on("mouseleave",".js-seatselection-passenger",function(){t(this).data("passenger"),e.showPassenger(e.previouslySelectedPassenger)}),this.on("click",".js-seatselection-passenger-remove",this.bind(function(e){e.preventDefault(),e.stopPropagation();var i=t(e.currentTarget).parents(".js-seatselection-passenger").data("passenger");this.removeSeatFromPassenger(i),this.getPassenger(i).$view.focus()})),t(document).on("click"+this.ns,".js-seatselection-close-active",this.bind(function(t){t.preventDefault(),l(!1)})),this.options.hideFlyout||this.prepareFlyoutsForSeats()},h.prototype.initAccessibility=function(){function t(t){var i=e.$seats.filter(":enabled"),n=i.index(document.activeElement);n>=0&&(n+=t,0>n&&(n=0),n>i.length-1&&(n=i.length-1),i.get(n).focus())}var e=this,i=this.$el.find(".js-seatmap");
i.on("keydown"+this.ns,function(i){var n=!1;switch(i.keyCode){case a.LEFT:case a.UP:n=!0,t(-1);break;case a.RIGHT:case a.DOWN:n=!0,t(1);break;case a.PAGE_UP:n=!0,t(-10);break;case a.PAGE_DOWN:n=!0,t(10);break;case a.HOME:n=!0,t(-1e4);break;case a.END:n=!0,t(1e4);break;case a.ESC:n=!0,l(!1),e.getPassenger(e.selectedPassenger).$view.focus()}n&&i.preventDefault()})},h.prototype.prepareFlyoutsForSeats=function(){function e(e,s){var o=n.render("seatmap-tooltip-template",i.getSeatFlyoutData(e)),a=t(t.parseHTML(t.trim(o)));return t("#"+s).remove(),t("body").append(a),a.attr("id",s).hide(),a}var i=this;this.$seats.each(function(){var n=t(this),o=n,a=n.data("seat").id;n=n.parent();var r="tpl-"+a,l=new s,h=l.open;l.open=function(t){t&&"click"==t.type&&t.stopImmediatePropagation(),this.refresh();var i=e(a,r).text();o.attr("aria-label",i),h.apply(this,arguments)},n.data("flyout-target","#"+r),n.data("flyout-behavior","hover,focus,top,bottom"),l.options=i.options,l.init(n[0])})},h.prototype.getSeatFlyoutData=function(t){var e=this.getSeat(t),i=this.getPassenger(this.selectedPassenger),n=i.seat?this.getSeat(i.seat):null,s=this.getPassengerForSeat(t),o=!1,a=!1,r=[e.desc];return e.price&&(n&&!this.options.hide_price_difference?(o=this.formatPriceDiff(e.price-n.price),a=this.formatPrice(n.price)):o=this.formatPrice(e.price)),s&&(r.push(this.options.locale.myseat),o=null,a=null),{id:t,desc:r.join("<br>"),price:o,oldprice:a,disabled:e.disabled,ismine:s&&s.id==this.getSelectedPassenger()}},h.prototype.invalidate=function(){this.validate()},h.prototype.validate=function(){this.$seats.filter(".is-selected").removeClass("is-selected"),this.$seats.filter(".is-mine").removeClass("is-mine");for(var t,e,i,n=0,s=0,o=0;o<this.data.passengers.length;o++)if(t=this.data.passengers[o],i=this.$passengerInputs.filter('[data-passenger="'+t.id+'"]'),e=i.val(),i.val(t.seat),t.seat!==e&&i.trigger("change","seatselection"),t.seat){if(e=this.getSeat(t.seat),!e)continue;s++,e.$el.addClass("is-selected"),t.id==this.selectedPassenger&&e.$el.addClass("is-mine");var a="";"preferred"===e.type,t.$view.find(".js-seatselection-passenger-remove").show(),t.$view.find(".js-seatselection-passenger-price").text(this.formatPrice(e.price)),t.$view.find(".js-seatselection-passenger-value").html(this.options.locale.selectPrefix+a+String(e.id).toUpperCase()),n+=e.price}else t.$view.find(".js-seatselection-passenger-remove").hide(),t.$view.find(".js-seatselection-passenger-price").text("-"),t.$view.find(".js-seatselection-passenger-value").html(this.options.locale.select);this.$passengerViews.removeClass("is-active").attr("aria-selected","false");var r=this.$passengerViews.filter("[data-passenger="+this.selectedPassenger+"]").addClass("is-active");r.attr("aria-selected","true"),this.$el.find(".js-seatselection-active-passenger").text(r.find(".seat-selection__seat-list__passenger").text()),this.$el.find(".js-seatselection-passenger-total").text(this.formatPrice(n));var l=this.hasModelChanged();this.options.asr||(l=l&&s==this.data.passengers.length),l&&this.$el.find(".js-seatselection-add").prop("disabled",!l)},h.prototype.showPassenger=function(t){var e=this.getPassenger(t);if(this.$passengerViews.removeClass("is-active"),this.$passengerViews.filter("[data-passenger="+t+"]").addClass("is-active"),this.$seats.filter(".is-mine").removeClass("is-mine").attr("aria-selected","false"),e.seat){var i=this.getSeat(e.seat);i&&i.$el.addClass("is-mine").attr("aria-selected","true")}this.selectedPassenger=t},h.prototype.formatPrice=function(t){return this.options.currency+" "+Number(t).toFixed(2)},h.prototype.formatPriceDiff=function(t){t=Number(t);var e=t>=0?"+":"-";return this.options.currency+" "+e+Math.abs(t).toFixed(2)},h.prototype.addSeatToPassenger=function(t,e,i){var n,s=this,a=this.data.seats[e];if(n=this.getPassengerForSeat(e))return n.seat=null,this.setSelectedPassenger(n.id),!0;if(a.needslogin)return this.lightbox=new o,this.lightbox.open(this.options.loginpopup,function(){this.getElement().find(".js-passenger--id").val(t),this.getElement().find(".js-passenger--seat").val(e)}),!1;if(a.needsconfirmation&&!i)return this.confirm(a.needsconfirmation,function(){s.addSeatToPassenger(t,e,!0)}),!1;if(a.disabled)return alert("Seat is disabled (shouldn't happen anyway)"),!0;n=this.getPassenger(t),n.seat=e,this.invalidate();var r=n.index+1;return r<this.data.passengers.length&&(n=this.getPassengerAt(r),this.setSelectedPassenger(n.id)),n.$view.focus(),!0},h.prototype.removeSeatFromPassenger=function(t){this.getPassenger(t).seat=null,this.invalidate()};var c=0;return h.prototype.getSelectedPassenger=function(){return this.selectedPassenger},h.prototype.setSelectedPassenger=function(e){var i=e!=this.selectedPassenger||e!=this.previouslySelectedPassenger;this.previouslySelectedPassenger=e,this.selectedPassenger=e,this.invalidate(),i&&t(".js-seatselection-selection").val(this.selectedPassenger).trigger("change")},h.prototype.getSeat=function(t){return this.data.seats[t]},h.prototype.getPassenger=function(t){for(var e=0;e<this.data.passengers.length;e++)if(passenger=this.data.passengers[e],passenger.id==t)return passenger},h.prototype.getPassengerAt=function(t){return this.data.passengers[t]},h.prototype.getPassengerForSeat=function(t){for(var e=0;e<this.data.passengers.length;e++)if(passenger=this.data.passengers[e],passenger.seat==t)return passenger;return null},h.prototype.confirm=function(e,i){this.lightbox=new o,this.lightbox.open(e,function(){var t=this,e=t.getElement();e.find(".js-confirm-checkbox").prop("checked",!1),e.find(".js-confirm-button").prop("disabled",!0),e.on("change",".js-confirm-checkbox",function(){e.find(".js-confirm-button").prop("disabled",!this.checked)}),e.on("click",".js-confirm-button",function(){i.call(t,!0)})}),t(document).trigger("flyout.close")},h}),define("app/modules/booking/seatmap",["jquery","app/modules/BaseModule","lib/util/Templates","app/util/Capabilities","app/modules/helpers/flyout-trigger","app/plugins/mediaDispatcher"],function(t,e,i,n,s,o){var a,r=".Seatmap",l=0;return a=function(){this.$el=null,this.ns=r+l++,this.flyout=null,this.options={overDelay:0,outDelay:1}},a.prototype=new e,a.prototype.init=function(e){var i=this;this.$el=t(e),this.$el.find("[data-tooltip]").each(function(){var e=t(this),n="tpl-"+e.attr("id"),o=new s,a=o.open;o.open=function(){this.refresh(),i.createTarget(e,n),a.apply(this,arguments)},e.data("flyout-target","#"+n),e.data("flyout-behavior","hover,focus,top,bottom"),o.options=i.options,o.init(this)});var n=1.2,a=this.$el.find(".seatmap--seats"),r=a.height()*n;return o.isOrBelow("tablet-portrait").then(function(){a.css({transform:"scale("+n+")",transformOrigin:"top",height:r})}).otherwise(function(){a.css({transform:"",transformOrigin:"",height:""})}),this},a.prototype.createTarget=function(e,n){var s=e.data("tooltip"),o=i.render("seatmap-tooltip-template",s),a=t(t.parseHTML(t.trim(o)));t("body").append(a),a.attr("id",n).hide()},a}),define("app/modules/booking/stickyBasket",["jquery","app/modules/BaseModule"],function(t,e){var i,n=".StickyBasket",s=0;return i=function(){this.$el=null,this.ns=n+s++},i.prototype=new e,i.prototype.init=function(e){return this.$el=t(e),t(window).on("resize"+this.ns,this.bind(this.handleResize)),this.handleResize(),this},i.prototype.handleResize=function(){var e="fixed"==this.$el.css("position")&&this.$el.is(":visible"),i=t("#body");e?i.css("margin-bottom",this.$el.outerHeight()+"px"):i.css("margin-bottom","")},i}),define("app/modules/layout/sticky",["jquery","app/modules/BaseModule","app/plugins/mediaDispatcher"],function(t,e,i){var n,s=".Sticky",o=0;return n=function(){this.$el=null,this.ns=s+o++},n.prototype=new e,n.prototype.init=function(e){return this.$el=t(e),this.$inner=this.$el.children().eq(0),this.isSticky=!1,this.options=this.$el.data("sticky"),this.marginTop=this.options.marginTop||0,this.marginBottom=this.options.marginBottom||0,this.scrollFirst=this.options.showBottom,this.$boundingParent=this.$el.parents(this.options.bottomLimit||"body").eq(0),this.options.deviceLimit?i.isAbove(this.options.deviceLimit).then(this.bind(this.activate)).otherwise(this.bind(this.deactivate)):this.activate(),!1},n.prototype.validate=function(){if(this.active){this.measure();var e=t(document).scrollTop(),i=this.topLimit;this.scrollFirst&&this.height>this.windowHeight-2*this.marginTop?i+=this.height-this.windowHeight+this.marginTop:i-=this.marginTop;var n=this.bottomLimit,s=e>i;if(s&&!this.isSticky?this.$inner.css({position:"fixed",zIndex:10}):!s&&this.isSticky&&this.reset(),this.isSticky=s,this.isSticky){var o=this.topLimit-i,a=n-(o+this.height+e);0>a&&(o+=a),this.$inner.css({top:o})}}},n.prototype.reset=function(){this.$inner.css({position:"",left:"",top:"",width:"",zIndex:""}),this.$el.css({height:""})},n.prototype.invalidate=function(){this.validate()},n.prototype.activate=function(){this.active=!0,this.on(window,"scroll",this.bind(this.handleScroll)),this.on(window,"resize",this.bind(this.handleResize)),this.securityInterval=setInterval(this.bind(this.invalidate),1e3),this.handleResize(),this.invalidate()},n.prototype.deactivate=function(){this.active=!1,clearInterval(this.securityInterval),t(window).off(this.ns),this.reset(),this.isSticky=!1},n.prototype.handleScroll=function(){this.invalidate()},n.prototype.handleResize=function(){this.invalidate()},n.prototype.measure=function(){this.$inner=this.$el.children().eq(0);var e=this.$el.offset(),i=this.$el.width();this.$inner.width(i),this.$el.height(this.$inner.height()),this.windowHeight=t(window).height(),this.height=this.$inner.height(),this.topLimit=e.top,this.leftLimit=e.left,this.bottomLimit=this.$boundingParent?this.$boundingParent.offset().top+this.$boundingParent.outerHeight():document.body.scrollHeight,this.bottomDistance=document.body.scrollHeight-this.bottomLimit},n}),define("app/modules/layout/sameheight",["jquery","app/modules/BaseModule","app/plugins/mediaDispatcher"],function(t,e,i){function n(){clearTimeout(h),h=setTimeout(s,1)}function s(){for(var t in l)l[t].validate()}var o,a=".sameheight",r=0,l={};o=function(){this.$el=null,this.ns=a+r++},o.prototype=new e,o.prototype.init=function(e){this.options=t(e).data("sameheight-options")||{};var s=t(e).data("sameheight");s?(s=this.getGroup(s),s.add(e)):(s=this.getGroup("group"+this.ns),t(e).find(".js-sameheight-item").each(function(){s.add(this)}));var o=t(e).data("sameheight-reset");return o&&i.isOrBelow(o).then(function(){s.disable()}).otherwise(function(){s.enable()}),n(),this},o.prototype.getGroup=function(t){return l[t]||(l[t]=new u(this.options)),l[t]},o.prototype.destroy=function(){};var h;t(window).resize(n);var u=function(t){this.elements=[],this.ns=a+r++,this.enabled=!0,this.options=t||{},this.property=this.options.useHeight?"height":"min-height"};return u.prototype.add=function(t){this.elements.push(t)},u.prototype.enable=function(){this.enabled||(this.enabled=!0,n())},u.prototype.disable=function(){this.enabled&&(this.enabled=!1,n())},u.prototype.destroy=function(){t(this.elements).css(this.property,""),this.elements=[]},u.prototype.validate=function(){var e=t(this.elements);if(e.css(this.property,""),this.enabled){e.css("transition",this.property+" 0s");var i=0;e.each(function(){var e=t(this).height();e>i&&(i=e)}),e.css(this.property,i),e.css("transition","")}},o}),define("app/modules/helpers/noScroll",["jquery","app/modules/BaseModule"],function(t,e){var i,n=".autocomplete",s=0;return i=function(){this.$el=null,this.ns=n+s++},i.prototype=new e,i.prototype.init=function(e){return this.$el=t(e),this.on("scroll",this.resetScroll),this.resetScroll.call(e),!1},i.prototype.resetScroll=function(){var t=this;t.scrollLeft=0,t.scrollTop=0},i}),define("app/modules/forms/maxlengthJumper",["jquery","app/modules/BaseModule","app/util/DOMUtil"],function(t,e,i){var n,s=".MaxlengthJumper",o=0;return n=function(){this.$el=null,this.ns=s+o++},n.prototype=new e,n.prototype.init=function(e){this.$el=t(e),navigator.userAgent.match(/(iPhone|iPod|iPad)/i)||(this.maxlength=this.$el.attr("maxlength"),this.maxlength&&this.on("keyup",this.bind(this.checkChars)))},n.prototype.checkChars=function(t){var e=this,n=String.fromCharCode(t.keyCode);if(!(t.keyCode<47||n.match(/\s/))&&n){var s=e.$el,o=this.maxlength,a=o-s.val().length;0>=a&&(s.val(s.val().substr(0,o)),i.focusNextInput(this.$el))}},n}),define("app/modules/nav/SiteHeader",["jquery","app/modules/BaseModule"],function(t,e){var i,n=".SiteHeader",s=0;return i=function(){this.$el=null,this.ns=n+s++,this.nstemp=this.ns+"temp"},i.prototype=new e,i.prototype.init=function(e){return this.$el=t(e),this.setup(),this.bindListeners(),this},i.prototype.setup=function(){this.$el.addClass("is-sticky")},i.prototype.bindListeners=function(){this.on("flyout_open",this.bind(this.onFlyoutOpen)),this.on("flyout_close",this.bind(this.onFlyoutClose))},i.prototype.onFlyoutOpen=function(){this.$el.addClass("is-flyout-opened")},i.prototype.onFlyoutClose=function(){this.$el.removeClass("is-flyout-opened")},i}),define("app/modules/forms/StepInput",["jquery","app/modules/BaseModule","lib/browser/Accessibility"],function(t,e,i){function n(){this.ns=e.ns("StepInput"),this.nstemp=this.ns+"_temp"}return n.prototype=new e,n.prototype.init=function(e){return this.$el=t(e),this.$input=this.$el.find("input"),this.$increaseButton=this.$el.find(".js-stepinput--increase"),this.$decreaseButton=this.$el.find(".js-stepinput--decrease"),this.minValue=Number(this.$input.attr("min"))||0,this.maxValue=Number(this.$input.attr("max"))||Number.MAX_VALUE,this.stepValue=Number(this.$input.attr("step")||1),this.on("mousedown",".js-stepinput--increase",this.handleMouseDown(this.stepValue)),this.on("mousedown",".js-stepinput--decrease",this.handleMouseDown(-this.stepValue)),this.on("click",".js-stepinput--increase",this.handleClick(this.stepValue)),this.on("click",".js-stepinput--decrease",this.handleClick(-this.stepValue)),this.on("focusout",this.$input,this.handleFocusOut()),this.updateButtonState(!0),this},n.prototype.handleMouseDown=function(e){return this.bind(function(){function i(t){clearInterval(o),o=setInterval(function(){s.changeBy(e)},t)}function n(){clearTimeout(a),clearInterval(o),s.preventClick=!0,a=setTimeout(function(){s.preventClick=!1},0),t(document).off(s.nstemp)}var s=this;t(document).on("mouseup"+this.nstemp,n),this.changeBy(e);var o,a=setTimeout(function(){i(250),a=setTimeout(function(){i(100)},2e3)},250)})},n.prototype.handleClick=function(t){return this.bind(function(e){this.preventClick||(e.preventDefault(),this.changeBy(t))})},n.prototype.handleFocusOut=function(){return this.bind(function(){this.setValue(this.getValue(),!0)})},n.prototype.increase=function(){this.changeBy(this.stepValue)},n.prototype.decrease=function(){this.changeBy(-this.stepValue)},n.prototype.changeBy=function(t){this.setValue(this.getValue()+t)},n.prototype.setValue=function(t,e){t>this.maxValue&&(t=this.maxValue),t<this.minValue&&(t=this.minValue),this.$input.val(t),this.$input.change(),i.speak(this.getValue()),this.updateButtonState(e)},n.prototype.updateButtonState=function(t){this.$input.val()>=this.maxValue?(this.$increaseButton.attr("disabled",!0),"undefined"==typeof t&&this.$input.trigger("focus")):this.$increaseButton.removeAttr("disabled"),this.$input.val()<=this.minValue?(this.$decreaseButton.attr("disabled",!0),"undefined"==typeof t&&this.$input.trigger("focus")):this.$decreaseButton.removeAttr("disabled")},n.prototype.getValue=function(){return Number(this.$input.val())||0},n}),define("app/modules/helpers/loadLater",["jquery","app/modules/BaseModule","app/plugins/mediaDispatcher"],function(t,e,i){var n,s=".LoadLater",o=0;return n=function(){this.$el=null,this.ns=s+o++},n.prototype=new e,n.prototype.init=function(e){var n=this,s=t(e).data("load-later-when");s?i.isOrAbove(s).then(function(){n.exec(e)}):this.exec(e)},n.prototype.exec=function(e){var i=t(e),n=t("<div></div>").append(i.val()).children();n.hide(),i.after(n),i.remove(),setTimeout(function(){n.slideDown()},500)},n.prototype.destroy=function(){},n}),define("app/modules/booking/timetable",["jquery","app/modules/BaseModule"],function(t,e){var i,n=".Timetable",s=0;return i=function(){this.$el=null,this.ns=n+s++},i.prototype=new e,i.prototype.init=function(e){var i=this;return this.$el=t(e),this.$dateSelects=i.$el.find(".js-timetable-date-select").find("a"),this.$dateSelectsFlyout=this.$dateSelects.closest(".js-flyout"),this.$timetableInputs=this.$el.find(".js-timetable-input"),i.setFlightStatus(),this.$timetableInputs.on("change",function(e){var n=t(this),s=t(e.currentTarget);if(s.prop("checked")){var o=i.$el.find("th, td");i.$el.find("input").prop("checked",!1),o.removeClass("is-active is-active-before js-timetable-active-day");var a=s.parents("th, td").eq(0),r=a.index()+1;o.filter(":nth-child("+r+")").addClass("is-active js-timetable-active-day").find("input").prop("checked",!0),o.filter(":nth-child("+(r-1)+")").addClass("is-active-before"),i.setFlightStatus(),i.$dateSelects.removeClass("selected"),i.$el.find(".js-timetable-selected-date").text(n.val())}}),this.$dateSelects.on("click",function(e){e.preventDefault();var n=t(this),s=n.data("date");i.$el.find('.js-timetable-input[value="'+s+'"]').prop("checked",!0).change(),n.addClass("selected"),i.$el.trigger("flyout.close")}),this},i.prototype.setFlightStatus=function(){var e=this.$el.find(".js-timetable-active-day");e.each(function(e,i){var n=t(i),s=n.data("flight-status"),o=n.closest("tr").find("th");"cancelled"===s?o.removeClass("flightstatus--available flightstatus--not-available").addClass("flightstatus--cancelled"):"not-available"===s?o.removeClass("flightstatus--available flightstatus--cancelled").addClass("flightstatus--not-available"):"available"===s&&o.removeClass("flightstatus--cancelled flightstatus--not-available").addClass("flightstatus--available")})},i}),define("lib/net/ImagePreloader",["jquery"],function(t){function e(e,i){var n=t.Deferred();n.always(i);var s=new Image;return s.src=e,s.complete?n.resolve(s):t(s).load(function(){n.resolve(s)}),n.promise()}return e}),define("app/modules/content/image",["jquery","app/modules/BaseModule","lib/net/ImagePreloader"],function(t,e,i){var n,s=".DeferredImage",o=0;return n=function(){this.$el=null,this.ns=s+o++},n.prototype=new e,n.prototype.init=function(e){this.$el=t(e);var i=this.bind(this.start);return"complete"==document.readyState?i():t(window).on("load",i),this},n.prototype.start=function(){var t=this.$el.data("image-src"),e=this.$el.data("image-width"),n=this.$el.data("image-height");if(e&&n)this.createImage(t,e,n);else{var s=new i(t);s.done(this.bind(this.imageLoaded))}},n.prototype.imageLoaded=function(t){var e=t.width,i=t.height;this.createImage(t.src,e,i)},n.prototype.createImage=function(e,i,n){var s;this.$el.css("padding-top",""),Modernizr.backgroundsize?(s=t("<div></div>"),s.css({backgroundImage:"url("+e+")",paddingTop:100*(n/i)+"%",backgroundSize:"cover"})):s=t('<img src="'+e+'"/>'),s.addClass("img").appendTo(this.$el).css("opacity",0),s.animate({opacity:1},500),this.destroy()},n}),define("app/modules/content/table",["jquery","app/modules/BaseModule"],function(t,e){var i,n=".Table",s=0,o={};return i=function(){this.$el=null,this.ns=n+s++},i.prototype=new e,i.prototype.init=function(e){this.$el=t(e),this.options=t.extend({},o,this.$el.data("table")),this.on("touchstart mouseover","td, thead th",this.bind(this._handleCellClick))},i.prototype._handleCellClick=function(e){var i=t(e.currentTarget);this.$el.find("th, td").removeClass("is-active");var n=i.index()+1;this.$el.find("th:nth-child("+n+"), td:nth-child("+n+")").addClass("is-active")},i}),define("app/modules/forms/errorLabel",["jquery","lib/browser/Accessibility"],function(t,e){var i,n=0;return i=function(){this.id="error-label-"+ ++n},i.prototype.init=function(i){var n=t(i),s=n.attr("for"),o=t("#"+s);return o.length||(o=t('input[name="'+s+'"]')),o.length&&(n.attr({"for":"",id:this.id}),e.describeBy(o,this.id)),!1},i}),define("app/modules/forms/inputReset",["jquery","app/modules/BaseModule"],function(t,e){function i(){this.ns=".inputreset"}return i.prototype=new e,i.prototype.init=function(e){var i=this;return Modernizr.touch||Modernizr.pointertouch?(this.$el=t(e),this._getInput().on("keyup change",function(){i.validate()}),this.$el.on("click",".btn-input-reset",function(t){t.preventDefault(),i.reset()}),this.validate(),this):!1},i.prototype.validate=function(){var t=this._getInput().val(),e=!!t;e?this.$el.addClass("has-value"):this.$el.removeClass("has-value")},i.prototype.reset=function(){this._getInput().val(""),this.validate(),this._getInput().focus()},i.prototype._getInput=function(){return this.$el.find("input,textarea")},i}),define("app/modules/helpers/externalLink",["jquery","app/Config"],function(t,e){function i(t){for(var i,n=(t.attr("class")||"").split(/\s+/),s=0;s<n.length;s++){if(i=n[s],"js-avoid_disclaimer"==i)return!1;if(0===i.indexOf("js-"))return!1}var o=t.attr("href");if(!o)return!1;if(0===o.indexOf("http://")||0===o.indexOf("https://")){if(0===o.indexOf(window.location.origin))return;var a=e.get("external_whitelist");if(a)for(var s=0;s<a.length;s++)if(a[s]instanceof RegExp?a[s].test(o):o.indexOf(a[s])>=0)return!1;return!0}return!1}var n=" –– "+e.get("locale","external-link"),s=e.get("external_indicator")||{};return ExternalLink=function(){},ExternalLink.prototype.init=function(e){var o=t(e);if(i(o)){var a=o.find(".external_link_indicator");if(a.length)a.html(' <span class="external_link_text">'+n+"</span>");else{var r=o;for(var l in s)if(o.is(l)){if("DISCLAIMER"==s[l])return o.addClass("js-external_disclaimer"),!1;r=o.find(s[l])}r.length||(r=o),r.append('<span class="external_link_indicator"> <span class="external_link_text">'+n+"</span></span>")}}return!1},ExternalLink.prototype.destroy=function(){},ExternalLink}),define("app/modules/booking/TimeoutDisclaimer",["jquery","app/plugins/lightboxLink"],function(t,e){var i;return i=function(){},i.prototype.init=function(e){return this.timeToTimeout=Number(t(e).data("timeout-time")),this.delayToTimeout=Number(t(e).data("timeout-delay")),this.postponeURL=t(e).data("timeout-rescue"),this.reset(),this},i.prototype.reset=function(){var t=this;return clearTimeout(this.timeout),this.timeToTimeout&&(this.timeout=setTimeout(function(){t.show()},1e3*this.timeToTimeout)),this},i.prototype.show=function(){var i=this,n=new e,s=(new Date).getTime()+1e3*this.delayToTimeout;n.open("#timeout-disclaimer",function(){function e(){var t=Math.round((s-new Date)/1e3);if(0>t)clearTimeout(o),n.find(".js-timeout--show").show(),n.find(".js-timeout--hide,.js-lightbox-close").hide();else{var e=Math.floor(t/60);t%=60,10>t&&(t="0"+t),e+=":"+t,n.find(".js-timeout--delay").text(e)}}var n=this.getElement(),o=setInterval(function(){e()},1e3);e(),n.on("click",".js-lightbox-close",function(){t.post(i.postponeURL),i.reset()})})},i.prototype.destroy=function(){clearTimeout(this.timeout)},i}),define("app/modules/journal/JournalTeaserGrid",["jquery","app/modules/BaseModule","lib/animation/AnimationFrame"],function(t,e,i){var n,s=0,o=".JournalTeaserGrid",a={columns:16};return n=function(){this.$el=null,this.ns=o+s++},n.prototype=new e,n.prototype.init=function(e){return this.$el=t(e),this.$items=this.$el.find(".js-journal_teaser_grid--item"),this.$window=t(window),this.acceleratedCompositing=Modernizr.csstransforms3d,this.mouseX=0,this.mouseY=0,this.bindListeners(),this.options=a,this.recalculate(),this.render(),this},n.prototype.bindListeners=function(){this.on(window,"resize",this.bind(this.onWindowResize)),this.on(window,"mousemove",this.bind(this.onMouseMove))},n.prototype.onMouseMove=function(t){this.mouseX=t.clientX,this.mouseY=t.clientY},n.prototype.onWindowResize=function(){this.recalculate(),this.render()},n.prototype.recalculate=function(){this.windowHeight=this.$window.height(),this.windowWidth=this.$window.width(),this.items=[];for(var t=this.$items,e=0,i=t.length;i>e;e++){var n={},s=t.eq(e),o=s.offset();n.height=s.outerHeight(),n.width=s.outerWidth(),n.top=o.top,n.bottom=n.top+n.height;var a=120-50*(n.width/n.height);this.items.push({$el:s,bounds:n,shift:a,progress:0,bgProgress:0,contentProgressX:0,contentProgressY:0,$bg:s.find(".js-journal_teaser--background_parallax"),$content:s.find(".js-journal_teaser--content_parallax"),$inner:s.find(".js-journal_teaser--inner"),bgLerp:.1*Math.random()+.1})}},n.prototype.render=function(){if(!this.isLayouting){for(var t=this.$window.scrollTop()+this.windowHeight,e=(this.mouseX-this.windowWidth/2)/this.windowWidth,n=(this.mouseY-this.windowHeight/2)/this.windowHeight,s=0,o=this.items.length;o>s;s++){var a=this.items[s],r=a.$el,l=a.bounds.top,h=(t-l)/(this.windowHeight+a.bounds.height);a.progress+=.1*(h-a.progress),a.bgProgress+=(h-a.bgProgress)*a.bgLerp,a.contentProgressX+=.1*(e-a.contentProgressX),a.contentProgressY+=.1*(n-a.contentProgressY),a.progress>=0&&a.progress<=1&&(r.addClass("is-visible"),a.$content.css({transform:"translateY("+4*a.contentProgressY+"px) translateX("+4*a.contentProgressX+"px) "+(this.acceleratedCompositing?"translateZ(0)":"")}))}i.request(this.bind(this.render))}},n.prototype.getColumns=function(){var t;return window.getComputedStyle&&(t=window.getComputedStyle(this.$el[0],":after").getPropertyValue("content"),t=t.replace(/['"]/g,"")),t||(t=this.options.columns),t},n}),define("app/modules/journal/JournalCustomContent",["jquery","app/modules/BaseModule","lib/util/Templates","lib/browser/Accessibility","lib/browser/KeyCode"],function(t,e,i,n,s){var o,a=".CustomContent",r=0;return o=function(){this.$el=null,this.ns=a+r++,this.nstemp=this.ns+"temp"},o.prototype=new e,o.prototype.init=function(e){return this.$el=t(e),this.on("click",this.bind(this.onClick)),this},o.prototype.onClick=function(t){t.preventDefault();var e=t.currentTarget,i=e.getAttribute("href");this.load(i)},o.prototype.load=function(e){var i=this;i.url=e,this.$html?i.insertHtml():(this.$xhr&&this.$xhr.abort(),this.$xhr=t.ajax({url:e,dataType:"html",success:function(e){i.$html=t(e).find(".js-custom_content--overlay"),i.insertHtml()}}))},o.prototype.insertHtml=function(){var e=this;e.$html.removeClass("is-visible is-static is-intro-hidden"),e.$html.appendTo(t("body")),t("html").addClass("is-custom_content-visible"),setTimeout(function(){e.$html.addClass("is-visible"),e.$html.addClass("is-intro-hidden"),e.$html.focus(),e.originalUrl=window.location.href,e.updateUrl(e.url),t(document).on("click"+e.nstemp,".js-custom_content--overlay--close",e.bind(e.onCloseClick))},0)},o.prototype.updateUrl=function(t){window.history&&o.isSameOrigin(t)&&history.replaceState({},"",t)},o.prototype.onCloseClick=function(t){t.preventDefault(),this.close()},o.prototype.onKeyUp=function(t){t.keyCode===s.ESC&&this.close()},o.prototype.close=function(){var e=this;t(document).off("click"+this.nstemp),this.$html.removeClass("is-visible"),this.$html.removeClass("is-intro-hidden"),t("html").removeClass("is-custom_content-visible"),setTimeout(function(){e.updateUrl(e.originalUrl),e.$html.remove(),e.originalUrl=void 0},500)},o.isSameOrigin=function(t){var e=window.location,i=document.createElement("a");return i.href=t,i.hostname==e.hostname&&i.port==e.port&&i.protocol==e.protocol},o}),define("app/modules/journal/JournalHeader",["jquery","app/modules/BaseModule","lib/animation/AnimationFrame"],function(t,e,i){var n,s=0,o=".JournalHeader",a={selectors:{media:".js-journal_header--media"}};return n=function(){this.$el=null,this.ns=o+s++},n.prototype=new e,n.prototype.init=function(e){return this.$el=t(e),this.options=t.extend({},a,this.$el.data("journal-header-options")),this.bindListeners(),this.initVariables(),this.render(),this},n.prototype.initVariables=function(){this.acceleratedCompositing=Modernizr.csstransforms3d,this.progress=0,this.$window=t(window),this.$media=this.$el.find(this.options.selectors.media),this.recalculate()},n.prototype.bindListeners=function(){this.on(window,"resize",this.bind(this.onWindowResize))},n.prototype.onWindowResize=function(){this.recalculate()},n.prototype.onScroll=function(){this.animationFrameScheduled||(this.animationFrameScheduled=!0,i.request(this.bind(this.render)))},n.prototype.recalculate=function(){this.height=this.$el.outerHeight(),this.top=this.$el.offset().top,this.bottom=this.top+this.height},n.prototype.render=function(){var t=this.$window.scrollTop(),e=(t-this.top)/this.height;this.progress+=.4*(e-this.progress),this.progress=Math.max(Math.min(this.progress,1),0),this.$media.css({opacity:1-this.progress,transform:"scale("+(1+this.progress/10)+") translateY("+this.progress*this.height/4+"px)"+(this.acceleratedCompositing?"translateZ(0)":"")}),i.request(this.bind(this.render))},n}),define("app/modules/journal/JournalParallaxImage",["jquery","app/modules/BaseModule","lib/animation/AnimationFrame"],function(t,e,i){var n,s=0,o=".JournalParallaxImage";return n=function(){this.$el=null,this.ns=o+s++},n.prototype=new e,n.prototype.init=function(e){return this.$el=t(e),this.initVariables(),this.relayoutContainer(),this.bindListeners(),this.checkImageState(),this.renderLoop(),this},n.prototype.initVariables=function(){this.acceleratedCompositing=Modernizr.csstransforms3d,this.progress=0,this.$img=this.$el.find(".js-journal_parallax_image--img"),this.$container=this.$el.find(".js-journal_parallax_image--container"),this.$win=t(window),this.recalculate()},n.prototype.bindListeners=function(){this.on(window,"resize",this.bind(this.onWindowResize)),this.$el.find("img").one("load",this.bind(this.onWindowResize))},n.prototype.checkImageState=function(){var t=this.$img[0],e=this;t.naturalWidth&&t.complete||(t.onload=function(){e.onWindowResize()})},n.prototype.onWindowResize=function(){this.recalculate(),this.relayoutContainer()},n.prototype.onScroll=function(){this.render()},n.prototype.recalculate=function(){this.imgHeight=this.$img.outerHeight(),this.height=.7*this.imgHeight,this.top=this.$container.offset().top,this.translateYMax=this.imgHeight-this.height,this.winHeight=this.$win.height()},n.prototype.renderLoop=function(){var t=this.$win.scrollTop()+this.winHeight,e=t-this.top,n=e/(this.height+this.winHeight);this.progress+=.2*(n-this.progress);var s=this.progress;if(1>s||s>0){var o=-1*s*this.translateYMax;this.$img.css({transform:"translateY("+o+"px) "+(this.acceleratedCompositing?"translateZ(0)":"")})}i.request(this.bind(this.renderLoop))},n.prototype.relayoutContainer=function(){this.$container.css({height:this.height})},n}),define("app/modules/journal/JournalCollectionNav",["jquery","app/modules/BaseModule","lib/browser/KeyCode","lib/browser/Accessibility"],function(t,e,i,n){var s,o=0,a=".JournalCollectionNav";return s=function(){this.$el=null,this.ns=a+o++,this.nstemp=this.ns+"temp"},s.prototype=new e,s.prototype.init=function(e){return this.$el=t(e),this.bindListeners(),this},s.prototype.bindListeners=function(){this.on(document,"click",".js-journal_collection_nav--trigger",this.bind(this.onTriggerClick)),this.on("click",".js-journal_collection_nav--close",this.bind(this.onCloseClick))},s.prototype.onCloseClick=function(t){t.preventDefault(),this.close()},s.prototype.onTriggerClick=function(e){var i=t(e.target);i.hasClass("is-active")?this.close():this.open()},s.prototype.open=function(){var e=this;this.$el.prepareTransition().addClass("is-visible").attr("aria-hidden","false"),t(".js-journal_collection_nav--trigger").addClass("is-active"),t(document).on("keydown"+this.nstemp,this.bind(this.onKeyDown)),t("html").addClass("has-lightbox"),setTimeout(function(){e.releaseFocus=n.keepFocus(e.$el,!0),e.$el.focus()},0)},s.prototype.close=function(){this.$el.prepareTransition().removeClass("is-visible").attr("aria-hidden","true"),t(".js-journal_collection_nav--trigger").removeClass("is-active"),t("html").removeClass("has-lightbox"),this.releaseFocus(),t(document).off(this.nstemp)},s.prototype.onKeyDown=function(t){t.keyCode===i.ESC&&this.close()},s}),define("app/modules/journal/JournalTagFilter",["jquery","app/modules/BaseModule","lib/browser/KeyCode","lib/browser/Accessibility","lib/browser/KeyCode"],function(t,e,i,n,i){var s,o=0,a=".JournalTagFilter";
return s=function(){this.$el=null,this.ns=a+o++,this.nstemp=this.ns+"temp"},s.prototype=new e,s.prototype.init=function(e){return this.$el=t(e),this.$form=t(this.$el.data("target-form")),this.bindListeners(),this.handleHistory(),this},s.prototype.bindListeners=function(){this.on(document,"click",".js-journal_tag_filter--trigger",this.bind(this.onTriggerClick)),this.on("click",".js-journal_tag_filter--close",this.bind(this.onCloseClick)),this.on("click",".js-journal_tag_filter--tag--label",this.bind(this.onLabelClick)),this.$form.on("click"+this.ns,'[type="reset"]',this.bind(this.onResetClick)),this.$form.on("change"+this.ns,this.bind(this.onChange)),this.$form.on("change"+this.ns,".js-flyout",this.bind(this.onChangeInFlyout)),this.on("click",this.bind(this.onClick))},s.prototype.onClick=function(e){var i=t(e.target);i.closest(".js-journal_tag_filter--content--inner").length||this.close()},s.prototype.onCloseClick=function(t){t.preventDefault(),this.close()},s.prototype.onTriggerClick=function(e){var i=t(e.target);i.hasClass("is-active")?this.close():this.open()},s.prototype.onChangeInFlyout=function(e){var i=t(e.currentTarget);i.find(".js-flyout-close").trigger("click")},s.prototype.handleHistory=function(){this.updateUrl(window.location.href),history.pushState&&(window.onpopstate=function(t){t.state.html&&(document.body.innerHTML=t.state.html)})},s.prototype.onResetClick=function(t){t.preventDefault(),this.clearForm(),this.onChange()},s.prototype.clearForm=function(){this.$form.find(":input").not(":button, :submit, :reset, :hidden, :checkbox, :radio").val(""),this.$form.find(":checkbox, :radio").prop("checked",!1)},s.prototype.onChange=function(){var t=this.lastAction===i.LEFT_ARROW||this.lastAction===i.UP_ARROW||this.lastAction===i.RIGHT_ARROW||this.lastAction===i.DOWN_ARROW;t||this.submitForm()},s.prototype.submitForm=function(){var e=this,i=t(this.$el.data("target-container"));i.length?this.load(i,this.$el.data("target-container")):(this.$form.one("submit",function(t){t.preventDefault();var i=e.$form.attr("action")+"?"+e.$form.serialize();i=e.getFormattedURL(i),window.location=i}),this.$form.submit()),this.updateDisplay(),setTimeout(function(){e.close()},100)},s.prototype.updateDisplay=function(){var e=t(".js-journal_tag_filter--trigger"),i=this.$el.find('[name="tag"]:checked');if(i.length){e.addClass("has-filter_active");for(var n=[],s=0,o=i.length;o>s;s++){var a=this.$el.find('label[for="'+i.attr("id")+'"]').find(".js-journal_tag_filter--tag--text").text();n.push(a)}t(".js-journal_tag_filter_controls--reset_container").addClass("has-filter_active"),e.find(".js-journal_tag_filter--active_display").html(n.join(", "))}else e.removeClass("has-filter_active"),t(".js-journal_tag_filter_controls--reset_container").removeClass("has-filter_active")},s.prototype.open=function(){var e=this;this.$el.prepareTransition().addClass("is-visible").attr("aria-hidden","false"),t(".js-journal_tag_filter--trigger").addClass("is-active"),t(document).on("keydown"+this.nstemp,this.bind(this.onKeyDownTemp)),t("html").addClass("has-lightbox"),setTimeout(function(){e.releaseFocus=n.keepFocus(e.$el,!0),e.$el.focus()},0)},s.prototype.close=function(){this.$el.prepareTransition().removeClass("is-visible").attr("aria-hidden","true"),t(".js-journal_tag_filter--trigger").removeClass("is-active"),t(document).off(this.nstemp),t("html").removeClass("has-lightbox"),this.releaseFocus&&this.releaseFocus()},s.prototype.onKeyDownTemp=function(e){var n=e.keyCode;n===i.ESC?this.close():n!==i.ENTER&&n!==i.SPACE||!t(document.activeElement).is('input[type="radio"]')||this.submitForm(),this.lastAction=n},s.prototype.onLabelClick=function(e){var i=this.$el.find("#"+t(e.currentTarget).attr("for"));i.length&&i.is(":checked")&&(e.preventDefault(),i.prop("checked",!1))},s.prototype.load=function(e,i){var n=this;e.addClass("is-ajax-loading"),this.$xhr&&this.$xhr.abort();var s=t(".js-journal_tag_filter--trigger"),o=this.$form.attr("action"),a=this.$form.serializeArray();s.addClass("is-ajax-loader");for(var r=a.length-1;r>=0;r--)"tag"==a[r].name&&(o=o+"/"+a[r].value,a.splice(r,1));this.$xhr=t.ajax({type:"GET",url:o,data:a,dataType:"html",beforeSend:function(){},success:function(o){var a=t(o),r=a.find(i).html();e.removeClass("is-ajax-loading"),s.removeClass("is-ajax-loader"),e.html(r),n.updateUrl(this.url)}})},s.prototype.getFormattedURL=function(t){return t=t.replace("&tag=","/"),t=t.replace("?tag=","/"),t=t.replace("&sort=","?sort=")},s.prototype.updateUrl=function(t){window.history&&(t=this.getFormattedURL(t),window.history.pushState({html:document.body.innerHTML},"",t))},s.prototype.destroy=function(){this.$form.off(this.ns),this._destroy()},s});var yt_iframe_api_loaded_def=null;define("lib/net/YTiFrameAPILoader",["jquery"],function(t){return yt_iframe_api_loaded_def||(yt_iframe_api_loaded_def=t.Deferred(),window.onYouTubeIframeAPIReady=function(){yt_iframe_api_loaded_def.resolve()},require(["//www.youtube.com/iframe_api"],function(){},function(){yt_iframe_api_loaded_def.reject()})),yt_iframe_api_loaded_def.promise()}),define("app/modules/journal/JournalEmbeddedMedia",["jquery","app/modules/BaseModule","lib/net/YTiFrameAPILoader"],function(t,e,i){var n,s=0,o=".JournalEmbeddedMedia";return n=function(){this.$el=null,this.ns=o+s++},n.prototype=new e,n.prototype.init=function(e){return this.$el=t(e),this.options=t.extend({},this.$el.data("journal-embedded-media-options")),this.bindListeners(),this.initPlayer(this.$el.find(".js-journal_embedded_media--content")[0]),this},n.prototype.bindListeners=function(){this.on(document,"embeddedMedia_play",this.bind(this.onEmbeddedMediaPlay))},n.prototype.onEmbeddedMediaPlay=function(e){var i=t(e.target);this.isPlaying&&!i.is(this.$el)&&this.pauseVideo()},n.prototype.playVideo=function(){this.player&&this.player.playVideo()},n.prototype.pauseVideo=function(){this.player&&this.player.pauseVideo()},n.prototype.initPlayer=function(t){var e=this;i.done(function(){e.loadPlayer(t)})},n.prototype.loadPlayer=function(t){this.player=new YT.Player(t,{events:{onReady:this.bind(this.onPlayerReady),onStateChange:this.bind(this.onPlayerStateChange)}})},n.prototype.onPlayerReady=function(){},n.prototype.onPlayerStateChange=function(t){if(t&&t.data)switch(t.data){case YT.PlayerState.PLAYING:this.onPlayVideo();break;case YT.PlayerState.PAUSED:this.onPauseVideo()}},n.prototype.onPlayVideo=function(){this.isPlaying=!0,this.$el.trigger("embeddedMedia_play")},n.prototype.onPauseVideo=function(){this.isPlaying=!1},n}),define("app/modules/journal/JournalEmbeddedMediaLazy",["jquery","app/modules/BaseModule","app/modules/journal/JournalEmbeddedMedia","lib/net/YTiFrameAPILoader"],function(t,e,i,n){var s,o=0,a=".JournalEmbeddedMediaLazy";return s=function(){this.$el=null,this.ns=a+o++},s.prototype=new i,s.prototype.init=function(e){return this.$el=t(e),this.options=t.extend({},this.$el.data("journal-embedded-media-options")),this.bindListeners(),this},s.prototype.bindListeners=function(){i.prototype.bindListeners.call(this),this.on("click",".js-journal_embedded_media--preview",this.bind(this.onClick))},s.prototype.initPlayer=function(t,e){var i=this;n.done(function(){i.loadPlayer(t,e)})},s.prototype.loadPlayer=function(t,e){var i=this;this.player=new YT.Player(t,{videoId:e,width:"640",height:"360",playerVars:{autoplay:1,showinfo:0,fs:1,rel:0},events:{onReady:i.bind(i.onPlayerReady),onStateChange:i.bind(i.onPlayerStateChange)}})},s.prototype.onClick=function(t){t.preventDefault();var e=this.$el.find(".js-journal_embedded_media--content");this.isPlayerReady?this.playVideo():this.initPlayer(e[0],this.options.id),e.addClass("is-visible"),this.$el.find(".js-journal_embedded_media--preview").addClass("is-hidden"),this.$el.find(".js-journal_embedded_media--media_container").addClass("is-visible")},s}),define("app/modules/journal/JournalTeaser",["jquery","app/modules/BaseModule","lib/animation/AnimationFrame"],function(t,e){var i,n=0,s=".JournalTeaser",o={maxChar:24};return i=function(){this.$el=null,this.ns=s+n++,this.nstemp=this.ns+"temp"},i.prototype=new e,i.prototype.init=function(e){return this.$el=t(e),this.options=t.extend({},o,this.$el.data("settings")),this},i.prototype.validateTitleSize=function(){var t=this.$el.find(".js-journal_teaser--title"),e=t.text().replace(/ /g,"").length;e>=this.options.maxChar&&t.addClass("is-small")},i.prototype.bindListeners=function(){this.on("mouseenter",this.bind(this.onMouseEnter))},i.prototype.onMouseEnter=function(){this.recalculate(),this.$el.parent().css("perspective","1000px"),this.$el.on("mousemove"+this.nstemp,this.bind(this.onMouseMove)),this.$el.on("mouseleave"+this.nstemp,this.bind(this.onMouseLeave))},i.prototype.onMouseMove=function(t){var e=5;return cx=this.width/2,cy=this.height/2,dx=t.offsetX-cx,dy=t.offsetY-cy,tiltx=-(dy/cy),tilty=dx/cx,radius=Math.sqrt(Math.pow(tiltx,2)+Math.pow(tilty,2)),degree=radius*e,this.$el.css("transform","rotate3d("+tiltx+", "+tilty+", 0, "+degree+"deg)"),void 0},i.prototype.onMouseLeave=function(){this.$el.off(this.nstemp),this.$el.css({transform:""})},i.prototype.recalculate=function(){var t=this.$el.offset();this.top=t.top,this.left=t.left,this.height=this.$el.outerHeight(),this.width=this.$el.width(),this.bottom=this.top+this.height},i}),define("app/modules/journal/JournalOverlayShare",["jquery","app/modules/BaseModule"],function(t,e){var i,n=0,s=".JournalOverlayShare";return i=function(){this.$el=null,this.ns=s+n++,this.nstemp=this.ns+"temp"},i.prototype=new e,i.prototype.init=function(e){return this.$el=t(e),this.$trigger=this.$el.find(".js-journal_overlay_share--trigger"),this.bindListeners(),this},i.prototype.bindListeners=function(){this.on("click",".js-journal_overlay_share--trigger",this.bind(this.onTriggerClick))},i.prototype.onTriggerClick=function(t){t.preventDefault(),this.$trigger.hasClass("is-active")?this.close():this.open()},i.prototype.open=function(){var e=this;this.$trigger.addClass("is-active"),this.$el.find(".js-journal_overlay_share--dropdown").addClass("is-visible"),setTimeout(function(){t(document).on("click"+e.nstemp,e.bind(e.onDocumentClick))},0)},i.prototype.close=function(){this.$trigger.removeClass("is-active"),this.$el.find(".js-journal_overlay_share--dropdown").removeClass("is-visible"),t(document).off("click"+this.nstemp)},i.prototype.onDocumentClick=function(e){t(e.target).closest(".js-journal_custom_content").length||this.close()},i}),define("app/modules/journal/JournalCollectionSlider",["jquery","app/modules/BaseModule","lib/browser/Pointer","lib/browser/KeyCode"],function(t,e,i,n){var s,o=0,a=".JournalCollectionSlider",r={autoplay:0};return s=function(){this.$el=null,this.ns=a+o++,this.nsPointer=this.ns+"pointer"},s.prototype=new e,s.prototype.init=function(e){return this.$el=t(e),this.options=t.extend({},r,this.$el.data("page-teaser-slider-options")),this.checkBackgroundVideoSupport(),this.setupPagers(),this.initVariables(),this.setup(),this.bindListeners(),this.checkLoadState(),this.goToSlide(0),this.restartAutoplay(),this},s.prototype.bindListeners=function(){this.on("click",".js-journal_collection_slider--button-next",this.bind(this.goToNext)),this.on("click",".js-journal_collection_slider--button-prev",this.bind(this.goToPrevious)),this.on("click",".js-journal_slider_pagination--bullet",this.bind(this.onPagerClick)),this.on(i.dragstart(this.ns),this.bind(this.onDragStart)),this.on(window,"resize",this.bind(this.onWindowResize)),this.on(window,"keydown",this.bind(this.onKeyDown))},s.prototype.setup=function(){this.setActivePager(this.activeIndex)},s.prototype.setupPagers=function(){for(var t="",e=this.$el.find(".js-journal_collection_slider--slide").length,i=0;e>i;i++)t+='<li class="js-journal_slider_pagination--bullet journal_slider_pagination--bullet">',t+='<span class="is-visuallyhidden">Slide'+i+"</span>",t+="</li>";this.$el.find(".js-journal_slider_pagination--list").html(t)},s.prototype.initVariables=function(){this.$window=t(window),this.$slides=this.$el.find(".js-journal_collection_slider--slide"),this.$pagers=this.$el.find(".js-journal_slider_pagination--bullet"),this.activeIndex=0,this.slidesTotal=this.$slides.length,this.recalculate()},s.prototype.onKeyDown=function(t){var e=t.keyCode;e===n.RIGHT?this.goToNext():e===n.LEFT&&this.goToPrevious()},s.prototype.onDragStart=function(e){function n(t){l.isDragging=!0,l.$el.addClass("is-dragging");var e=i.getEventPosition(t);f=e.x,m=e.y,a=f-c,r=m-p,Math.abs(r)<Math.abs(a)&&t.preventDefault(),a>0?l.$el.addClass("is-dragging-right").removeClass("is-dragging-left"):l.$el.addClass("is-dragging-left").removeClass("is-dragging-right");var n=1-Math.abs(a)/(l.elWidth/2);a/l.elWidth,l.$activeSlide.css({opacity:n,"will-change":"opacity, transform"}),o&&o.css({opacity:""}),o=0>a?l.$nextSlide:l.$prevSlide,o.css("opacity",1)}function s(){var t=(new Date).getTime()-h;u.off(l.nsPointer),setTimeout(function(){l.$slides.css({opacity:"",transform:"","will-change":""})},300),(Math.abs(a)>l.elWidth/4||200>t&&a>r&&l.isDragging)&&l.goToSlide(l.$slides.index(o)),l.$el.removeClass("is-dragging is-dragging-left is-dragging-right"),l.isDragging=!1,l.restartAutoplay()}this.stopAutoplay();var o,a,r,l=this,h=(new Date).getTime(),u=t(document),d=i.getEventPosition(e),c=d.x,p=d.x,f=c,m=p;u.on(i.dragmove(this.nsPointer),n),u.on(i.dragend(this.nsPointer),s)},s.prototype.restartAutoplay=function(){if(this.options.autoplay){var t=this;this.stopAutoplay(),this.autoshowInterval=setInterval(function(){t.goToNext()},1e4)}},s.prototype.stopAutoplay=function(){this.options.autoplay&&clearInterval(this.autoshowInterval)},s.prototype.goToNext=function(){this.goToSlide(this.activeIndex+1)},s.prototype.goToPrevious=function(){this.goToSlide(this.activeIndex-1)},s.prototype.onPagerClick=function(e){e.preventDefault();var i=t(e.currentTarget),n=this.$pagers.index(i);this.goToSlide(n)},s.prototype.goToSlide=function(t){t>=this.slidesTotal?t=0:0>t&&(t=this.slidesTotal-1),this.$slides.css("opacity","").removeClass("is-active is-prev is-next"),this.$prevSlide=0===t?this.$slides.eq(this.slidesTotal-1):this.$slides.eq(t-1),this.$nextSlide=t===this.slidesTotal-1?this.$slides.eq(0):this.$slides.eq(t+1),this.$activeSlide=this.$slides.eq(t),this.$activeSlide.addClass("is-active"),this.$prevSlide.addClass("is-prev"),this.$nextSlide.addClass("is-next"),this.$activeVideo&&this.$activeVideo[0].pause(),this.activeIndex=t,this.setActivePager(t),this.checkMedia(this.$activeSlide),this.restartAutoplay()},s.prototype.checkMedia=function(t){var e=t.find("video");e.length?(e.one("timeupdate",function(){t.addClass("is-video-loaded")}),e[0].play(),this.$activeVideo=e):this.$activeVideo=void 0},s.prototype.setActivePager=function(t){this.$pagers.removeClass("is-active"),this.$pagers.eq(t).addClass("is-active")},s.prototype.checkLoadState=function(){var t=this,e=this.$slides.eq(0).find("img")[0];e.complete||e.naturalWidth?(this.$el.addClass("is-initialized"),this.$slides.eq(0).addClass("is-active")):e.onload=e.onerror=function(){t.$el.addClass("is-initialized"),t.$slides.eq(0).addClass("is-active")}},s.prototype.checkBackgroundVideoSupport=function(){Modernizr.backgroundvideos||this.$el.find("video").remove()},s.prototype.onWindowResize=function(){this.recalculate()},s.prototype.recalculate=function(){this.elWidth=this.$el.width()},s}),define("app/modules/journal/JournalShareButtons",["jquery","app/modules/BaseModule","lib/animation/AnimationFrame"],function(t,e,i){var n,s=0,o=".JournalShareButtons";return n=function(){this.$el=null,this.ns=o+s++,this.nstemp=this.ns+"temp"},n.prototype=new e,n.prototype.init=function(e){return this.$el=t(e),this.$window=t(window),this.$slider=t(".js-journal_collection_slider"),this.$header=t(".js-journal_header"),this.recalculate(),this.bindListeners(),this.render(),this},n.prototype.bindListeners=function(){this.on(window,"scroll",this.bind(this.onScroll)),this.on(window,"resize",this.bind(this.onWindowResize))},n.prototype.onWindowResize=function(){this.recalculate()},n.prototype.onScroll=function(){this.animationFrameScheduled||(this.animationFrameScheduled=!0,i.request(this.bind(this.render)))},n.prototype.recalculate=function(){this.calcTop(),this.calcBottom()},n.prototype.calcTop=function(){this.top=this.$header.length?this.$header.position().top+this.$header.outerHeight()-.25*this.$window.height():.5*this.$window.height()},n.prototype.calcBottom=function(){this.bottom=this.$slider.length?this.$slider.position().top-.75*this.$window.height():t("body").outerHeight()},n.prototype.render=function(){var t=this.$window.scrollTop();t>this.top&&t<this.bottom?this.$el.addClass("is-visible"):this.$el.removeClass("is-visible"),this.animationFrameScheduled=!1},n}),define("app/modules/layout/Cover",["jquery","app/modules/BaseModule"],function(t,e){function i(t){return 2*Math.round(t/2)}var n,s=".Cover",o=0,a={top:0,left:0,middle:.5,firstquarter:.25,lastquarter:.75,center:.5,right:1,bottom:1},r={align:"center",valign:"middle"};return n=function(){this.$el=null,this.ns=s+o++},n.prototype=new e,n.prototype.init=function(e){var i=this;return this.$el=t(e),this.options=t.extend({},r,this.$el.data("cover")),this.type=this.$el.is("img")?"img":"div",this.updateChilds(),this.calculateSourceWidth(this.$img).then(function(){this.relayout(),this.bindListeners(),setTimeout(function(){i.$el.addClass("is-initialized")},0)}.bind(this)),this},n.prototype.bindListeners=function(){this.on(window,"resize",this.bind(this.onWindowResize))},n.prototype.onWindowResize=function(){this.relayout()},n.prototype.updateChilds=function(){if("img"!=this.type){var t=this.$el.find("img");t.css("height","auto"),t.css("width","100%"),t.css("min-height","auto"),t.css("min-width","auto"),this.$img=t}else this.$img=this.$el},n.prototype.calculateSourceWidth=function(e){function i(t,e){s.sourceWidth=t,s.sourceHeight=e,n.resolve(t,e)}var n=t.Deferred(),s=this,o=this.$el.data("source-width"),a=this.$el.data("source-height");if(o||a)i(o,a);else{var r=e[0];r?r.complete||r.naturalWidth?i(r.naturalWidth,r.naturalHeight):r.onload=r.onerror=function(){i(r.naturalWidth,r.naturalHeight)}:i(1920,1080)}return n.promise()},n.prototype.relayout=function(){var t=this.$el.offsetParent(),e=t.outerWidth(),n=t.outerHeight(),s=Math.max(e/this.sourceWidth,n/this.sourceHeight);this.sourceWidth*=s,this.sourceHeight*=s;var o=a[this.options.valign]||0,r=a[this.options.align]||0;this.$el.css({position:"absolute",height:i(this.sourceHeight),width:i(this.sourceWidth),left:i((e-this.sourceWidth)*r),top:i((n-this.sourceHeight)*o)})},n}),define("app/modules/content/PosterVideo",["jquery","app/modules/BaseModule"],function(t,e){var i,n=0,s=".PosterVideo";return i=function(){this.$el=null,this.ns=s+n++,this.nstemp=this.ns+"temp"},i.prototype=new e,i.prototype.init=function(e){var i=this;return this.$el=t(e),this.$video=this.$el.find(".js-poster_video--video"),setTimeout(function(){i.initVideo()},0),this},i.prototype.initVideo=function(){var t=this;this.$video.one("play",function(){t.$video.addClass("is-playing"),t.$el.find(".js-poster_video--poster").addClass("is-video_playing")}),this.$video[0].play()},i}),define("app/modules/forms/evo-input",["jquery","app/modules/BaseModule","app/util/SwissDate","moment"],function(t,e,i,n){function s(){this.ns=e.ns("EvoInput")}function o(t){var e=n.localeData()._longDateFormat.LLLL,i=e.indexOf("d"),s=e.indexOf("Y"),o=s>i,a="<small>"+t.format("dd")+"</small>",r=t.format("L");return o?a+" "+r:r+" "+a}return s.prototype=new e,s.prototype.init=function(e){return this.$el=t(e),this.$input=this.$el.find("input, select, textarea"),this.cloneMode=this.$el.data("clone"),this.$input.on("focus",this.bind(this.handleFocus)),this.$input.on("blur",this.bind(this.handleBlur)),this.$input.on("change keydown keyup paste",this.bind(this.invalidate)),this.$el.addClass("has-value"),this.validate(),this},s.prototype.validate=function(){var t=this.$input.val();this.$el.find(".js-evo-time_select--sumlabel.js-evo-time_select--trigger").length&&(t=this.$el.find(".js-evo-time_select--sumlabel").text()),t?this.$el.removeClass("no-value"):this.$el.addClass("no-value"),document.activeElement!=this.$input.get(0)&&this.validateClone()},s.prototype.validateClone=function(){var t=this.$input.val();if(t!==this.clonedValue){this.clonedValue=t;var e=this.getCloneValue(t,this.cloneMode);this.$el.find(".js-evo-input--clone").html(e)}},s.prototype.getCloneValue=function(t,e){var s;switch(e){case"date":if(s=n(i.parse(t)),s.isValid())return o(s);break;case"destination":if(s=t&&t.match(/^(.+)\s*\((.+)\)$/))return'<span class="evo-input--clone--label">'+s[1]+'</span> <abbr class="evo-abbr_tag">'+s[2]+"</abbr>"}return t},s.prototype.handleFocus=function(){this.$el.addClass("has-focus")},s.prototype.handleBlur=function(){this.$el.removeClass("has-focus"),this.validateClone()},s.prototype.invalidate=function(){clearTimeout(this.validationTimeout),this.validationTimeout=setTimeout(this.bind(this.validate),0)},s}),define("app/modules/evolution/evoBookingLinks",["jquery","app/modules/BaseModule","lib/browser/Accessibility"],function(t,e){function i(){this.ns=e.ns("EvoBookingLinks")}return i.prototype=new e,i.prototype.init=function(e){return this.$el=t(e),this.$link=this.$el.find(".booking_links--link"),this.$link.on("focusin",this.bind(function(){this.$el.addClass("is-open")})),this.$link.on("focusout",this.bind(function(){this.$el.removeClass("is-open")})),this},i}),define("app/modules/forms/InputObserver",["jquery","app/modules/BaseModule"],function(t,e){function i(){this.ns=e.ns("InputObserver")}return i.prototype=new e,i.prototype.init=function(e){return this.$el=t(e),this.options={target:this.$el.data("js-inputobserver")},this.on(document,"change",this.options.target,this.bind(this.updateValue)),this.updateValue(),this},i.prototype.updateValue=function(){var e=this.getText(t(this.options.target));return this.$el.html(e),this},i.prototype.getText=function(t){if(!(t.length>1))return i.getLabelText(t);var e=t.filter(":checked");return e.length?i.getLabelText(e):void 0},i.getLabelText=function(e){var i=t("[for="+e.attr("id")+"]");return i.text()},i}),define("app/modules/journal/JournalStateHandler",["jquery","app/modules/BaseModule","app/Config","app/modules/helpers/JSONP"],function(t,e,i,n){function s(t,e,i){i=i||";";for(var n=e+"=",s=decodeURIComponent(t),o=s.split(i),a=0;a<o.length;a++){for(var r=o[a];" "==r.charAt(0);)r=r.substring(1);if(0==r.indexOf(n))return r.substring(n.length,r.length)}return""}var o,a=0,r=".JournalStateHandler";return o=function(){this.$el=null,this.ns=r+a++},o.prototype=new e,o.prototype.init=function(e){return this.$el=t(e),this.checkLoginState(),this.checkLocation(),this},o.prototype.checkLoginState=function(){var e=this;this.$loggedInXHR&&this.$loggedInXHR.abort(),this.$loggedInXHR=t.ajax({dataType:"json",url:i.get("api_loginstate")||"/worldofswiss/api/v1/isloggedin",success:function(t){t.isLoggedIn&&e.setLoggedIn()}})},o.prototype.setLoggedIn=function(){t(".meta_nav--text-login").text(i.get("locale","logged-in"))},o.prototype.checkLocation=function(){var e=document.cookie,o=s(e,"location")||i.get("location")||"location=c=ch&cn=Switzerland&a=ZRH";if(""!==o){var a=s(o,"cn","&"),r=s(o,"a","&");new n,"//swiss.com/worldofswiss/api/v1/autocomplete?country=ch&lang="+t("html").attr("lang")+"&name="+a,t(".meta_nav--language .meta_nav--text").text((r+" / "+t("html").attr("lang").split("-")[0]).toUpperCase()),t(".meta_nav--language .evo-flag").removeClass("evo-flag-Switzerland").addClass("evo-flag-"+a)}},o}),define("app/modules",["lib/util/contextTrigger","lib/util/ModuleManager","app/Config"],function(t,e,i){new Date,t.add(".js-mainnavigation",function(){var t=this;require(["app/modules/nav/nav"],function(i){e.connect(i,t)})}),t.add("[data-delayed]",function(){var t=this;require(["app/modules/helpers/delayed"],function(i){e.connect(i,t)})}),t.add("[data-lazycontent]",function(){var t=this;require(["app/modules/helpers/lazyContent"],function(i){e.connect(i,t)})}),t.add("[data-lazyimage]",function(){var t=this;require(["app/modules/helpers/lazyImage"],function(i){e.connect(i,t)})}),t.add(".js-fitflowtext",function(){var t=this;require(["app/modules/helpers/fitFlowText"],function(i){e.connect(i,t)})}),t.add(".js-ajax-content",function(){var t=this;require(["app/modules/helpers/ajaxContent"],function(i){e.connect(i,t)})}),t.add(".js-ajax-update",function(){var t=this;require(["app/modules/helpers/ajaxUpdate"],function(i){e.connect(i,t)})}),t.add(".js-autocomplete-update",function(){var t=this;require(["app/modules/helpers/autocompleteUpdate"],function(i){e.connect(i,t)})}),t.add(".js-multirow",function(){var t=this;require(["app/modules/forms/multirow"],function(i){e.connect(i,t)})}),t.add(".js-listfilter",function(){var t=this;require(["app/modules/content/listfilter"],function(i){e.connect(i,t)})}),t.add(".js-form-submit-action",function(){var t=this;require(["app/modules/forms/formSubmitAction"],function(i){e.connect(i,t)})}),t.add("form[data-formactions]",function(){var t=this;require(["app/modules/forms/formChangeAction"],function(i){e.connect(i,t)})}),t.add(".js-range-picker",function(){var t=this;require(["app/modules/forms/rangePicker"],function(i){e.connect(i,t)})}),t.add(".js-date_range",function(){var t=this;require(["app/modules/forms/evo-dateRange"],function(i){e.connect(i,t)})}),t.add(".js-date_input",function(){var t=this;require(["app/modules/forms/evo-dateInput"],function(i){e.connect(i,t)})}),t.add(".js-input_checkbox_custom",function(){var t=this;require(["app/modules/forms/inputCheckboxCustom"],function(i){e.connect(i,t)})}),t.add(".js-auto-disable",function(){var t=this;require(["app/modules/forms/autoDisable"],function(i){e.connect(i,t)})}),t.add(".js-flyout-trigger",function(){var t=this;require(["app/modules/helpers/flyout-trigger"],function(i){e.connect(i,t)})}),t.add(".js-flyout-tooltip",function(){var t=this;require(["app/modules/content/flyout-tooltip"],function(i){e.connect(i,t)})}),t.add(".js-notification",function(){var t=this;require(["app/modules/content/notification"],function(i){e.connect(i,t)})}),t.add(".js-autocomplete",function(){var t=this;require(["app/modules/helpers/autocomplete"],function(i){e.connect(i,t)})}),t.add(".js-collapsable-trigger",function(){var t=this;require(["app/modules/helpers/collapsable-trigger"],function(i){e.connect(i,t)})}),t.add(".js-expandable-trigger",function(){var t=this;require(["app/modules/helpers/expandable-trigger"],function(i){e.connect(i,t)})}),t.add(".js-expandable",function(){var t=this;require(["app/modules/helpers/expandable"],function(i){e.connect(i,t)})}),t.add(".js-origin-chooser-dropdown",function(){var t=this;require(["app/modules/nav/originChooser"],function(i){e.connect(i,t)})}),t.add(".js-skiplinks",function(){var t=this;require(["app/modules/nav/skipNav"],function(i){e.connect(i,t)})}),t.add(".js-site_search",function(){var t=this;require(["app/modules/nav/SiteSearch"],function(i){e.connect(i,t)})}),t.add(".js-stage",function(){var t=this;require(["app/modules/stages/stages"],function(i){e.connect(i,t)})}),t.add(".js-interactive_stage",function(){var t=this;require(["app/modules/stages/interactiveStage"],function(i){e.connect(i,t)})}),t.add(".js-watch-change",function(){var t=this;require(["app/modules/forms/watchChange"],function(i){e.connect(i,t)})}),t.add(".js-date-input",function(){var t=this;require(["app/modules/forms/dateInput"],function(i){e.connect(i,t)})}),t.add(".js-date-range",function(){var t=this;require(["app/modules/forms/dateRangeRemote"],function(i){e.connect(i,t)})}),t.add(".js-date-multirange",function(){var t=this;require(["app/modules/forms/dateMultirange"],function(i){e.connect(i,t)})}),t.add(".js-char-counter",function(){var t=this;require(["app/modules/forms/charCounter"],function(i){e.connect(i,t)})}),t.add(".js-slide",function(){var t=this;require(["app/modules/content/slider"],function(i){e.connect(i,t)})}),t.add(".js-bookingbar",function(){var t=this;require(["app/modules/booking/bookingbar"],function(i){e.connect(i,t)})}),t.add(".js-evo-bookingbar",function(){var t=this;require(["app/modules/evolution/evoBookingbar"],function(i){e.connect(i,t)})}),t.add(".js-evo-bookingbar-switch",function(){var t=this;require(["app/modules/evolution/evoBookingbarSwitch"],function(i){e.connect(i,t)})}),t.add(".js-evo-passenger_select",function(){var t=this;require(["app/modules/evolution/evoPassengerSelect"],function(i){e.connect(i,t)})}),t.add(".js-evo-autocomplete",function(){var t=this;require(["app/modules/evolution/evoAutocomplete"],function(i){e.connect(i,t)})}),t.add(".js-payment-radio",function(){var t=this;require(["app/modules/booking/paymentRadio"],function(i){e.connect(i,t)})}),t.add(".js-book-options",function(){var t=this;require(["app/modules/booking/bookOptions"],function(i){e.connect(i,t)})}),t.add(".js-book-bundling",function(){var t=this;require(["app/modules/booking/bookBundling"],function(i){e.connect(i,t)})}),t.add(".js-widget-stage",function(){var t=this;require(["app/modules/widgets/widgetStage"],function(i){e.connect(i,t)})}),t.add(".js-auto-accordion-tabs",function(){var t=this;require(["app/modules/content/autoAccordionTabs"],function(i){e.connect(i,t)})}),t.add(".js-checkin-options",function(){var t=this;require(["app/modules/booking/checkInOptions"],function(i){e.connect(i,t)})}),t.add(".js-flight-book-tabs",function(){var t=this;require(["app/modules/booking/flightBookTabs"],function(i){e.connect(i,t)})}),t.add(".tabs-navigation",function(){var t=this;require(["app/modules/content/responsiveTabsNavigation"],function(i){e.connect(i,t)})}),t.add(".js-tabs",function(){var t=this;require(["app/modules/content/tabs"],function(i){e.connect(i,t)})}),t.add(".js-accordion",function(){var t=this;require(["app/modules/content/accordion"],function(i){e.connect(i,t)})}),t.add(".js-mashup-grid",function(){var t=this;require(["app/modules/explore/mashupGrid"],function(i){e.connect(i,t)})}),t.add(".js-stack-hover",function(){var t=this;require(["app/modules/explore/stackHover"],function(i){e.connect(i,t)})}),t.add(".js-explore_navigation",function(){var t=this;require(["app/modules/explore/ExploreNavigation"],function(i){e.connect(i,t)})}),t.add(".js-explore_meta_navigation",function(){var t=this;require(["app/modules/explore/ExploreMetaNavigation"],function(i){e.connect(i,t)})}),t.add(".js-explore_navigation_form",function(){var t=this;require(["app/modules/explore/ExploreNavigationForm"],function(i){e.connect(i,t)})}),t.add(".js-explore_navigation_search",function(){var t=this;require(["app/modules/explore/ExploreNavigationSearch"],function(i){e.connect(i,t)})}),t.add(".js-explorer-feed-items",function(){var t=this;require(["app/modules/content/ExplorerFeedItems"],function(i){e.connect(i,t)})}),t.add(".js-load_more",function(){var t=this;require(["app/modules/helpers/LoadMore"],function(i){e.connect(i,t)})}),t.add(".js-webcheckin__toggle-row",function(){var t=this;require(["app/modules/content/WebcheckinToggleRow"],function(i){e.connect(i,t)})}),t.add(".js-currency-convert",function(){var t=this;require(["app/modules/widgets/currencyConvert"],function(i){e.connect(i,t)})}),t.add(".js-widget-slider-top",function(){var t=this;require(["app/modules/widgets/widgetSlider"],function(i){e.connect(i,t)})}),t.add(".js-route-network",function(){var t=this;require(["app/modules/maps/routeNetwork"],function(i){e.connect(i,t)})}),t.add(".js-explorer-route-network",function(){var t=this;require(["app/modules/maps/explorerRouteNetwork"],function(i){e.connect(i,t)})}),t.add(".js-destination-finder-route-network",function(){var t=this;require(["app/modules/maps/destinationFinderRouteNetwork"],function(i){e.connect(i,t)})}),t.add(".js-seatselection",function(){var t=this;require(["app/modules/booking/seatselection"],function(i){e.connect(i,t)})}),t.add(".js-seatmap",function(){var t=this;require(["app/modules/booking/seatmap"],function(i){e.connect(i,t)})}),t.add(".js-sticky_basket",function(){var t=this;require(["app/modules/booking/stickyBasket"],function(i){e.connect(i,t)
})}),t.add(".js-sticky",function(){var t=this;require(["app/modules/layout/sticky"],function(i){e.connect(i,t)})}),t.add(".js-sameheight",function(){var t=this;require(["app/modules/layout/sameheight"],function(i){e.connect(i,t)})}),t.add(".js-no-scroll",function(){var t=this;require(["app/modules/helpers/noScroll"],function(i){e.connect(i,t)})}),t.add(".js-maxlength-jumper",function(){var t=this;require(["app/modules/forms/maxlengthJumper"],function(i){e.connect(i,t)})}),t.add(".js-site-header",function(){var t=this;require(["app/modules/nav/SiteHeader"],function(i){e.connect(i,t)})}),t.add(".js-stepinput",function(){var t=this;require(["app/modules/forms/StepInput"],function(i){e.connect(i,t)})}),t.add(".js-load-later",function(){var t=this;require(["app/modules/helpers/loadLater"],function(i){e.connect(i,t)})}),t.add(".js-timetable",function(){var t=this;require(["app/modules/booking/timetable"],function(i){e.connect(i,t)})}),t.add(".js-image",function(){var t=this;require(["app/modules/content/image"],function(i){e.connect(i,t)})}),t.add(".js-table",function(){var t=this;require(["app/modules/content/table"],function(i){e.connect(i,t)})}),t.add("label.error-message[for]",function(){var t=this;require(["app/modules/forms/errorLabel"],function(i){e.connect(i,t)})}),t.add(".frm-reset-holder",function(){var t=this;require(["app/modules/forms/inputReset"],function(i){e.connect(i,t)})}),t.add(".js-book_loading_overlay",function(){var t=this;require(["app/modules/booking/bookLoadingOverlay"],function(i){e.connect(i,t)})}),t.add("a",function(){var t=this;require(["app/modules/helpers/externalLink"],function(i){e.connect(i,t)})}),t.add("#tpl-timeout-disclaimer",function(){var t=this;require(["app/modules/booking/TimeoutDisclaimer"],function(i){e.connect(i,t)})}),t.add(".js-journal_teaser_grid",function(){var t=this;require(["app/modules/journal/JournalTeaserGrid"],function(i){e.connect(i,t)})}),t.add(".js-custom_content",function(){var t=this;require(["app/modules/journal/JournalCustomContent"],function(i){e.connect(i,t)})}),t.add(".js-journal_header",function(){var t=this;require(["app/modules/journal/JournalHeader"],function(i){e.connect(i,t)})}),t.add(".js-journal_parallax_image",function(){var t=this;require(["app/modules/journal/JournalParallaxImage"],function(i){e.connect(i,t)})}),t.add(".js-journal_collection_nav",function(){var t=this;require(["app/modules/journal/JournalCollectionNav"],function(i){e.connect(i,t)})}),t.add(".js-journal_tag_filter",function(){var t=this;require(["app/modules/journal/JournalTagFilter"],function(i){e.connect(i,t)})}),t.add(".js-journal_embedded_media",function(){var t=this;require(["app/modules/journal/JournalEmbeddedMedia"],function(i){e.connect(i,t)})}),t.add(".js-journal_embedded_media-lazy",function(){var t=this;require(["app/modules/journal/JournalEmbeddedMediaLazy"],function(i){e.connect(i,t)})}),t.add(".js-journal_teaser",function(){var t=this;require(["app/modules/journal/JournalTeaser"],function(i){e.connect(i,t)})}),t.add(".js-journal_overlay_share",function(){var t=this;require(["app/modules/journal/JournalOverlayShare"],function(i){e.connect(i,t)})}),t.add(".js-journal_collection_slider",function(){var t=this;require(["app/modules/journal/JournalCollectionSlider"],function(i){e.connect(i,t)})}),t.add(".js-journal_share_buttons",function(){var t=this;require(["app/modules/journal/JournalShareButtons"],function(i){e.connect(i,t)})}),t.add(".js-cover",function(){var t=this;require(["app/modules/layout/Cover"],function(i){e.connect(i,t)})}),t.add(".js-poster_video",function(){var t=this;require(["app/modules/content/PosterVideo"],function(i){e.connect(i,t)})}),t.add(".js-evo-input",function(){var t=this;require(["app/modules/forms/evo-input"],function(i){e.connect(i,t)})}),t.add(".js-evo-booking-links",function(){var t=this;require(["app/modules/evolution/evoBookingLinks"],function(i){e.connect(i,t)})}),t.add("[data-js-inputobserver]",function(){var t=this;require(["app/modules/forms/InputObserver"],function(i){e.connect(i,t)})}),t.add(".SWISSJOURNAL",function(){var t=this;require(["app/modules/journal/JournalStateHandler"],function(i){e.connect(i,t)})});var n=i.get("modules")||{};for(var s in n)t.add(s,function(){var t=this;require(["jquery","app/modules/BaseModule"],function(i,o){var a=n[s](i,o);e.connect(a,t)})});return e}),require.config({waitSeconds:20,paths:{jquery:"lib/util/loaded-jquery",moment:"lib/moment",pikarange:"vendor/pikarange",mapbox:"vendor/mapbox/mapbox",mapboxPlugins:"vendor/mapbox/mapbox.plugins",threejs:"vendor/threejs/three"},shim:{"app/plugins":{deps:["jquery"]},"app/modules":{deps:["jquery","app/plugins"]},mapboxPlugins:{deps:["mapbox"]}}}),define("pikaday",["vendor/pikaday","moment","app/Config"],function(t,e,i){var n=function(n){return"undefined"==typeof n.i18n&&(n.i18n={today:i.get("locale","today"),disabled:i.get("locale","disabled"),help:i.get("locale","date-picker-instruction"),previousMonth:i.get("locale","prev-month"),nextMonth:i.get("locale","next-month"),months:i.get("locale","months")||e.months(),weekdays:i.get("locale","weekdays")||e.weekdays(),weekdaysShort:i.get("locale","weekdaysShort")||e.weekdaysShort()}),"undefined"==typeof n.minRange&&(n.minRange=0),new t(n)};return n.util=t.util,n}),function(){try{console.log()}catch(t){window.console={}}return window.console}(),function(t){function e(){}for(var i,n="assert,count,debug,dir,dirxml,error,exception,group,groupCollapsed,groupEnd,info,log,markTimeline,profile,profileEnd,time,timeEnd,trace,warn".split(",");i=n.pop();)t[i]||(t[i]=e)}(console),window.performance||(window.performance={}),window.performance.now||(window.performance.now=function(){return(new Date).getTime()}),function(){var t,e=document.getElementsByTagName("html")[0];e.className+=" is-loading",t=setTimeout(function(){e.className+=" is-loaded is-load-error"},15e3),require(["app/Config"],function(e){function i(){require(["jquery","app/api","app/modules","app/plugins"],function(e){function i(){e(window).trigger("complete")}e('meta[name="viewport"]').attr("viewport","width=device-width"),"complete"==document.readyState?i():e(window).on("load",i),e("html").addClass("is-loaded").removeClass("is-loading"),clearTimeout(t),e('<div class="picto"></div>').css({position:"absolute",left:-1e3,top:-1e3}).appendTo("body")})}var n=navigator.userAgent,s=" "+document.getElementsByTagName("html")[0].className+" ";n.match(/(BlackBerry|BB\d)/);var o=s.indexOf(" lt-ie9 ")>-1,a=[];o&&require(["lib/shim/ie8IconFontFix"],function(t){t(".picto")});var r=e.get("language");"en"!=r&&a.push("vendor/moment/"+r),require(a,i)})}(),define("main",function(){});