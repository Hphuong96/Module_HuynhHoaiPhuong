<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
</head>
<body>
<script>
    let customerName = "Huynh Hoai Phuong";
    let idCard = "1234567890";
    let dateOfBirth = "17/03/1996";
    let email = "phuongdn996@gmail.com";
    let address = "Da Nang";
    let customerType = "Diamond";
    let discount = 10;
    let numberAccompanying = 2;
    let dayOfRent = 10;
    let serviceType = "Villa";
    let roomType = "Business";
    let totalPay;
    let checkValidate = true;
    let choose = prompt(
        "1. Show information customer. \n" +
        "2. Edit information customer. \n" +
        "3. Show the amount to be paid aafter discount. \n"
    );
    switch (choose) {
        case "1":
            alert("Customer Name : " + customerName
                + "\n" + "IdCard : " + idCard
                + "\n" + "Date Of Birth : " + dateOfBirth
                + "\n" + "Email : " + email
                + "\n" + "Address : " + address
                + "\n" + "Customer Type : " + customerType
                + "\n" + "Discount : " + discount
                + "\n" + "Number Of Accompanying : " + numberAccompanying
                + "\n" + "Day Of Rent : " + dayOfRent
                + "\n" + "Service Type : " + serviceType
                + "\n" + "Room Type : " + roomType);
        case "2":
            let chooseedit = prompt(
                "Choose Information Customer You Want Edit: \n" +
                "\n 1.Name : " + customerName +
                "\n 2.Id Card : " + idCard +
                "\n 3.Date Of Birth : " + dateOfBirth +
                "\n 4.Email : " + email +
                "\n 5.Address : " + address +
                "\n 6.Customer Type : " + customerType +
                "\n 7.Discound : " + discount +
                "\n 8.Number Of Accompanying : " + numberAccompanying +
                "\n 9.Day Of Rent : " + dayOfRent +
                "\n 10.Service Type : " + serviceType +
                "\n 11.Room Type : " + roomType
            );
            switch (chooseedit) {
                case "1":
                    let nameStandar = "" ;
                    customerName = prompt("Enter name :");
                    customerName = customerName.trim().toLocaleLowerCase();
                    for (let i=0; i<customerName.length; i++){
                        if (customerName.charAt(i) === " " && customerName.charAt(i + 1) === " "){
                            continue;
                        }
                        if (i===0 || customerName.charAt(i-1) === " " ){
                            nameStandar += customerName.charAt(i).toLocaleUpperCase();
                            continue;
                        }
                        nameStandar += customerName.charAt(i);
                    }
                    customerName = nameStandar;
                    break;
                case "2":
                    do {
                        checkValidate = false;
                        idCard = prompt("Enter Id Card :");
                        if (isNaN(idCard)) {
                            alert("Id card is in valid!!! Please try again");
                        } else if (idCard >= 1000000000 && idCard <= 9999999999) {
                            checkValidate = true;
                        }
                    } while (!checkValidate);

                    break;
                case "3":
                    do {
                        checkValidate = false;
                        dateOfBirth = prompt("Enter Date Of Birth (dd/mm/yyyy/ :");
                        if (dateOfBirth.charAt(2) !== '/' || dateOfBirth.charAt(5) !== '/') {
                            alert("Birth day is invalid !!! Please try again");
                            continue;
                        }
                        let day = dateOfBirth.substring(0, 2);
                        alert(day + "ac");
                        alert((dateOfBirth));
                        let month = dateOfBirth.substring(3, 5);
                        let year = dateOfBirth.substring(6, 10);
                        if (!isNaN(day) && !isNaN(month) && !isNaN(year)) {
                            day = Number.parseFloat(day);
                            month = Number.parseFloat(month);
                            year = Number.parseFloat(year);
                            if (Number.isInteger(day) && Number.isInteger(month) && Number.isInteger(year)) {
                                if (day > 0 && day < 32 && month > 0 && month < 13 && year > 1900 && year < 2019) {
                                    checkValidate = true;
                                }
                            }
                        }
                        if (!checkValidate) {
                            alert("Birth day is invalid !!! Please try again");
                        }
                    } while (!checkValidate);
                    break;
                case "4":
                    do {
                        email = prompt("Enter Email :");
                        let countAt = 0;
                        let countDoc = 0;
                        for (let i = 0; i < email.length; i++) {
                            if (email.charAt(i) === "@") {
                                countAt++;
                            }
                            if (email.charAt(i) === ".") {
                                countDoc++;
                            }
                        }
                        if (countDoc < 1 && countAt !== 1) {
                            checkValidate = false;
                            alert("Email is invalid !!! Try again");
                        }
                    } while (!checkValidate);
                    break;
                case "5":
                    address = prompt("Enter Address :");
                    break;
                case "6":
                    customerType = prompt("Enter Customer Type :");
                    break;
                case "7":
                    do {
                        discount = prompt("Enter Discount :");
                        checkValidate = false;
                        if (!isNaN(discount)) {
                            discount = Number.parseFloat(discount);
                            if (discount >= 0) {
                                checkValidate = true;
                            }
                        }
                        if (!checkValidate) {
                            alert("Discount is invalid !!! Please try again ");
                        }
                    } while (!checkValidate);
                    break;
                case "8":
                    do {
                        numberAccompanying = prompt("Enter Number Of Accompaying :");
                        checkValidate = false;
                        if (!isNaN(numberAccompanying)) {
                            discount = Number.parseFloat(numberAccompanying);
                            if (numberAccompanying >= 0 && Number.isInteger(numberAccompanying)) {
                                checkValidate = true;
                            }
                        }
                        if (!checkValidate) {
                            alert("Number of accompanying is invalid !!! Please try again ");
                        }
                    } while (!checkValidate);
                    break;
                case "9":
                    do {
                        dayOfRent = prompt("Enter Day Of Rent :");
                        checkValidate = false;
                        if (!isNaN(dayOfRent)) {
                            discount = Number.parseFloat(dayOfRent);
                            if (dayOfRent >= 0) {
                                checkValidate = true;
                            }
                        }
                        if (!checkValidate) {
                            alert("Rent day is invalid !!! Please try again ");
                        }
                    } while (!checkValidate);
                    break;
                case "10":
                    serviceType = prompt("Enter Service Type :");
                    break;
                case "11":
                    roomType = prompt("Enter Room Type :");
                    break;
                default:
                    alert("FAILLLLLL");

            }
            alert("Customer Name : " + customerName
                + "\n" + "IdCard : " + idCard
                + "\n" + "Date Of Birth : " + dateOfBirth
                + "\n" + "Email : " + email
                + "\n" + "Address : " + address
                + "\n" + "Customer Type : " + customerType
                + "\n" + "Discount : " + discount
                + "\n" + "Number Of Accompanying : " + numberAccompanying
                + "\n" + "Day Of Rent : " + dayOfRent
                + "\n" + "Service Type : " + serviceType
                + "\n" + "Room Type : " + roomType);
        case "3":
            let moneyperday = 0;
            if (serviceType === "Villa") {
                moneyperday = 500;
            } else if (serviceType === "House") {
                moneyperday = 300;
            } else {
                moneyperday = 100;
            }
            let discountCondition = 0;
            let currentYear = new Date().getFullYear();
            let birthday = new Date(dateOfBirth).getFullYear();
            let ageCustomer = currentYear - birthday;
            if (address === "Da Nang") {
                discountCondition += 20;
                if (ageCustomer > 30) {
                    discountCondition += 2;
                }
                if (ageCustomer > 20) {
                    discountCondition += 1;
                }
            } else if (address === "Hue") {
                discountCondition += 10;
            } else if (address === "Quang Nam") {
                discountCondition += 5;
            }
            if (dayOfRent > 7) {
                discountCondition += 30;
            } else if (dayOfRent >= 5) {
                discountCondition += 20;
            } else if (dayOfRent >= 2) {
                discountCondition += 10;
            }
            if (customerType === "Diamond") {
                discountCondition += 15;
            } else if (customerType === "Plantium") {
                discountCondition += 10;
            } else if (customerType === "Gold") {
                discountCondition += 5;
            } else if (customerType === "silver") {
                discountCondition += 2;
            } else if (customerType === "Member") {
                discountCondition += 0;
            }
            let price = moneyperday * dayOfRent * (1 - discount / 100);
            totalPay = price - discountCondition;
            alert(totalPay);
            break;
        default:
            alert("FAILLLLLL");
            break;

    }


</script>

</body>
</html>